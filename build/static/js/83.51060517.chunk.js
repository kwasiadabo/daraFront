(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[83],{1293:function(e,t,a){"use strict";a.r(t);var r=a(750),n=a(109),c=a.n(n),l=a(165),s=a(658),u=a(1),i=a.n(u),o=a(45),m=a.n(o),f=(a(661),a(164)),p=(a(111),a(662)),b=a.n(p),d=a(660),h=a.n(d),O=(a(696),a(657)),E=a(664);t.default=function(){var e=Object(u.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],o=Object(u.useState)([]),p=Object(s.a)(o,2),d=p[0],v=p[1],g=Object(u.useState)(!1),w=Object(s.a)(g,2),N=w[0],j=w[1],k=Object(u.useState)(0),x=Object(s.a)(k,2),S=x[0],y=x[1],C=Object(u.useState)(0),U=Object(s.a)(C,2),A=U[0],T=U[1],q=Object(u.useState)([]),D=Object(s.a)(q,2),P=D[0],F=D[1];Object(u.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(f.apiUrl+"/setup/staff");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N]);var J=function(){var e=Object(l.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Officer :"+t.currentTarget.value),y(t.currentTarget.value),e.next=4,m.a.get(f.apiUrl+"/customer/officer/"+t.currentTarget.value);case 4:a=e.sent,v(a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R={officer:b.a.number().required().label("Current Officer"),newOfficer:b.a.number().required().label("New Officer"),customer:b.a.number().required().label("Customer")},G=(b.a.object(R),""),I=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==A){e.next=2;break}return e.abrupt("return",h.a.fire("OOPS!","New Officer Not Selected","error"));case 2:if(!(P.length<1)){e.next=4;break}return e.abrupt("return");case 4:try{P.map(function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(f.apiUrl+"/customer/reassign",t);case 2:G=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}catch(a){h.a.fire("OOPS!",a.message,"error")}if(console.log(G.length),!(G.length>=0)){e.next=12;break}return h.a.fire("Success!","Customers Re-assigned","success"),e.next=10,m.a.get(f.apiUrl+"/customer/officer/"+S);case 10:t=e.sent,v(t.data);case 12:F([]),y(0),T(0),j(!N);case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement("div",{className:"row"},i.a.createElement(O.U,{className:"mt-3"},i.a.createElement(O.bb,{htmlFor:"phoneworship",className:"form-label col-sm-3"},"Current Assigned Officer *"),i.a.createElement(O.wb,{className:"form-select col-sm-8","aria-label":"Default select example",value:S,onChange:J},i.a.createElement("option",{value:""},"Current Officer *"),a.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.nameOfStaff)}))))),i.a.createElement("div",{className:"row"},i.a.createElement(O.U,{className:"mt-3"},i.a.createElement(O.bb,{htmlFor:"phoneworship",className:"form-label col-sm-3"},"New Assigned Officer *"),i.a.createElement(O.wb,{className:"form-select col-sm-8","aria-label":"Default select example",value:A,onChange:function(e){console.log("new Officer: "+e.currentTarget.value),T(e.currentTarget.value)}},i.a.createElement("option",{value:""},"New Officer *"),a.map((function(e){return i.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.nameOfStaff)})))),i.a.createElement(O.f,{type:"submit",className:"btn btn-success btn-block col-sm-2 float-right btn-sm mt-3 mb-3",onClick:I},"+ Assign")),i.a.createElement("div",{className:"row mt-3"},i.a.createElement(E.c,{className:"table-sm"},i.a.createElement("thead",null,i.a.createElement("tr",{className:"fs-sm"},i.a.createElement("th",null),i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Gender"),i.a.createElement("th",null,"ID Number"),i.a.createElement("th",null,"Phone"),i.a.createElement("th",null,"Res. Address"),i.a.createElement("th",null,"Officer"),i.a.createElement("th",null,"Select"))),i.a.createElement("tbody",null,d.map((function(e,t){return i.a.createElement("tr",{key:e.id,Style:"cursor: pointer;"},i.a.createElement("td",null,t+1),i.a.createElement("td",null,e.fullName),i.a.createElement("td",null,e.gender),i.a.createElement("td",null,e.idNumber),i.a.createElement("td",null,e.phone),i.a.createElement("td",null,e.residentialAddress),i.a.createElement("td",null,e.nameOfStaff),i.a.createElement("td",null,i.a.createElement("input",{type:"checkbox",className:"",value:e.id,onChange:function(t){return function(e,t){var a=Object(r.a)(P);e.target.checked?a=[].concat(Object(r.a)(P),[{customer:t.id,officer:S,newOfficer:A}]):a.splice(P.indexOf(t),1),F(a)}(t,e)}})))}))))))}}}]);
//# sourceMappingURL=83.51060517.chunk.js.map
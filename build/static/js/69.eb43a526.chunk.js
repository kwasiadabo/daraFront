(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[69],{1240:function(e,a,t){"use strict";t.r(a);var r=t(112),n=t(109),l=t.n(n),c=t(164),s=t(654),u=t(1),o=t.n(u),i=t(45),m=t.n(i),d=t(658),p=t.n(d),f=t(657),b=t.n(f),y=(t(752),t(163)),h=(t(111),t(656)),v=t.n(h),E=t(659),g=t(653);a.default=function(){var e=Object(u.useState)({holiday:"",hdate:"",year:""}),a=Object(s.a)(e,2),t=a[0],n=a[1],i=Object(u.useState)([]),d=Object(s.a)(i,2),f=d[0],h=d[1],O=Object(u.useState)((new Date).getFullYear()),w=Object(s.a)(O,2),D=w[0],S=w[1],Y=Object(u.useState)(!1),F=Object(s.a)(Y,2),j=F[0],k=F[1],x=Object(u.useState)(!1),N=Object(s.a)(x,2),H=N[0],C=N[1];Object(u.useEffect)((function(){function e(){return(e=Object(c.a)(l.a.mark((function e(){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return new Date,e.next=3,m.a.get(y.apiUrl+"/setup/holiday/"+D);case 3:a=e.sent,h(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[D,H]);var U=Object(u.useState)(!1),P=Object(s.a)(U,2),M=(P[0],P[1],p.a.object().keys({holiday:p.a.string().required().label("Holiday"),hdate:p.a.date().required().label("date"),year:p.a.number().required().label("Holiday Year")})),T=function(){var e=p.a.validate(f,M);return e.error?e.error.details[0].message:null},q=function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.prev=1,e.next=4,m.a.post(y.apiUrl+"/setup/holiday",t);case 4:200===e.sent.status?(v.a.fire("Success","Holiday Saved","success"),C(!H)):v.a.fire("OOPS !","Saving Holiday, failed !","error"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),v.a.fire(e.t0+" Saving Holiday, failed !","error");case 11:n({holiday:"",hdate:""});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=Object(c.a)(l.a.mark((function e(a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),""===t.holiday){e.next=22;break}return e.prev=2,e.next=5,m.a.put(y.apiUrl+"/setup/holiday",t);case 5:if(200===e.sent.status){e.next=10;break}return e.abrupt("return",v.a.fire("OOPS !","Submission Failed ! Check Entries and try again !","error"));case 10:v.a.fire("Success","Holiday Updated Successfully","success"),n({holiday:"",hdate:"",year:""}),C(!H),k(!1),C(!H);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),v.a.fire("OOPS ! "+e.t0.message,"error");case 20:e.next=23;break;case 22:return e.abrupt("return",v.a.fire("OOPS","Enter all Details !","error"));case 23:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(a){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.holiday){e.next=21;break}return e.prev=1,e.next=4,m.a.delete(y.apiUrl+"/setup/holiday/"+t.id);case 4:if(200===e.sent.status){e.next=9;break}return e.abrupt("return",v.a.fire("OOPS !","Submission Failed ! Check Entries and try again !","error"));case 9:v.a.fire("Success","Holiday Deleted Successfully","success"),n({holiday:"",hdate:"",year:""}),C(!H),k(!1),C(!H);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),v.a.fire("OOPS ! "+e.t0.message,"error");case 19:e.next=22;break;case 21:return e.abrupt("return",v.a.fire("OOPS","Select Holiday !","error"));case 22:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("h3",{className:"centertext m-3"},"Set up Holidays"),o.a.createElement("p",{className:"centertext m-3"},"Set up public holidays here. NB: Holidays are to be setup every year."),o.a.createElement(g.U,{className:"mt-3"},o.a.createElement(g.bb,{htmlFor:"dailysales",className:"col-sm-2"},"Year"),o.a.createElement(g.wb,{className:"form-select col-sm-8 mb-3","aria-label":"Default",value:D,onChange:function(e){return S(e.currentTarget.value)}},o.a.createElement("option",{value:(new Date).getFullYear()-4},(new Date).getFullYear()-4),o.a.createElement("option",{value:(new Date).getFullYear()-3},(new Date).getFullYear()-3),o.a.createElement("option",{value:(new Date).getFullYear()-2},(new Date).getFullYear()-2),o.a.createElement("option",{value:(new Date).getFullYear()-1},(new Date).getFullYear()-1),o.a.createElement("option",{defaultValue:(new Date).getFullYear()},(new Date).getFullYear()),o.a.createElement("option",{value:(new Date).getFullYear()+1},(new Date).getFullYear()+1),o.a.createElement("option",{value:(new Date).getFullYear()+2},(new Date).getFullYear()+2),o.a.createElement("option",{value:(new Date).getFullYear()+3},(new Date).getFullYear()+3),o.a.createElement("option",{value:(new Date).getFullYear()+4},(new Date).getFullYear()+4))),o.a.createElement(g.U,{className:"mt-3"},o.a.createElement(g.bb,{htmlFor:"holiday",className:"col-sm-2"},"Holiday"),o.a.createElement(g.R,{autoComplete:"off",name:"holiday",type:"text",className:"form-control col-sm-8",value:t.holiday,onChange:function(e){return n(Object(r.a)(Object(r.a)({},t),{},{holiday:e.currentTarget.value}))}})),o.a.createElement(g.U,{className:"mt-3"},o.a.createElement(g.bb,{htmlFor:"dailysales",className:"col-sm-2"},"Holiday Date"),o.a.createElement(g.R,{name:"hdate",type:"date",className:"form-control col-sm-8",value:t.hdate,onChange:function(e){var a=new Date(e.currentTarget.value);n(Object(r.a)(Object(r.a)({},t),{},{hdate:e.currentTarget.value,year:a.getFullYear()}))}})),o.a.createElement("div",{className:"row justify-content-center"},j?null:o.a.createElement(g.f,{className:"btn btn-primary col-sm-2 mt-3 btn-sm",onClick:q},"Submit"),j?o.a.createElement(g.f,{className:"btn-sm m-3 col-sm-2",color:"success",onClick:J},"Update"):null,j&&o.a.createElement(g.f,{className:"btn btn-danger col-sm-2 m-3 btn-sm",onClick:R},"Delete")),o.a.createElement(E.c,{className:"sm mt-3"},o.a.createElement("thead",null,o.a.createElement("tr",{className:"fs-sm"},o.a.createElement("th",null),o.a.createElement("th",null,"Holiday"),o.a.createElement("th",null,"Date"),o.a.createElement("th",null,"Year"))),o.a.createElement("tbody",null,f.map((function(e,a){return o.a.createElement("tr",{key:e.id,Style:"cursor: pointer;",onClick:function(){return a=e,console.log(a),k(!0),void n({id:a.id,holiday:a.holiday,hdate:new Date(a.hdate).toISOString().slice(0,10),year:a.year});var a}},o.a.createElement("td",null,a+1),o.a.createElement("td",null,e.holiday),o.a.createElement("td",null,b()(e.hdate).format("DD-MMMM-YYYY")),o.a.createElement("td",null,e.year))})))))}}}]);
//# sourceMappingURL=69.eb43a526.chunk.js.map
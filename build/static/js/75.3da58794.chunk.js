(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[75],{1304:function(e,t,a){"use strict";a.r(t);var r=a(109),n=a.n(r),l=a(165),c=a(658),s=a(1),u=a.n(s),o=a(19),m=a(45),i=a.n(m),f=(a(661),a(164)),p=a(111),d=(a(662),a(660),a(696),a(657)),E=a(664);t.default=function(){var e=Object(s.useState)([]),t=Object(c.a)(e,2),a=t[0],r=t[1],m=Object(s.useState)([]),b=Object(c.a)(m,2),h=b[0],O=b[1],v=Object(s.useState)(""),j=Object(c.a)(v,2),w=j[0],g=j[1],S=Object(s.useState)(!1),y=Object(c.a)(S,2),N=y[0],k=(y[1],Object(s.useState)((new Date).toISOString().slice(0,10))),C=Object(c.a)(k,2),D=C[0],L=(C[1],Object(o.g)(),p.a.getCurrentUser());"Loan Officer"==L.userRole&&L.staff;Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(f.apiUrl+"/loanreports/arrears/"+L.staff);case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[D]),Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(f.apiUrl+"/setup/staff");case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[N,h]);var x={sData:a.filter((function(e){return e.staff.toLowerCase().includes(w.toLowerCase())}))},A=0===w.length?a:x.sData,I=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}),U=a.reduce((function(e,t){return e+t.due}),0),R=a.reduce((function(e,t){return e+t.paid}),0),J=a.reduce((function(e,t){return e+t.Arrears}),0);return u.a.createElement("div",null,u.a.createElement("div",{className:"col-sm-12 mt-3 mb-3"},u.a.createElement("h3",null,"Loans In Arrears"),u.a.createElement("div",{className:"table-responsive"},u.a.createElement(d.f,{color:"success",className:"col-sm-2 float-right btn-sm mb-3",onClick:function(){return e=f.reportUrl+"/loansInArrears.aspx?"+L.staff,void window.open(e,"loan in arrears","popup","left=100,top=100,width=320,height=320");var e}},"View as Report"),"Loan Officer"!=L.userRole&&u.a.createElement(d.wb,{className:"form-select col-sm-12 mb-3","aria-label":"Default",value:w,onChange:function(e){return g(e.currentTarget.value)}},u.a.createElement("option",{defaultValue:""},"--Select Officer *--"),h.map((function(e){return u.a.createElement("option",{key:e.id,value:e.nameOfStaff,id:e.id},e.nameOfStaff)}))),u.a.createElement(E.c,{className:"table-sm"},u.a.createElement("thead",null,u.a.createElement("tr",{className:"fs-sm"},u.a.createElement("th",null),u.a.createElement("th",null,"Loan ID"),u.a.createElement("th",null,"Customer"),u.a.createElement("th",null,u.a.createElement("div",{className:"sm mb-3"},u.a.createElement("strong",null," ",I.format(U))),"Due"),u.a.createElement("th",null,u.a.createElement("div",{className:"sm mb-3"},u.a.createElement("strong",null," ",I.format(R))),"Paid"),u.a.createElement("th",null,u.a.createElement("div",{className:"sm mb-3"},u.a.createElement("strong",null," ",I.format(J))),"Arrears"," "),u.a.createElement("th",null,"Officer"))),u.a.createElement("tbody",null,A.map((function(e,t){return u.a.createElement("tr",{key:e.id,Style:"cursor: pointer;"},u.a.createElement("td",null,t+1),u.a.createElement("td",null,e.idNumber),u.a.createElement("td",null,e.customer),u.a.createElement("td",null,I.format(e.due)),u.a.createElement("td",null,I.format(e.paid)),u.a.createElement("td",null,I.format(e.Arrears)),u.a.createElement("td",null,e.staff))})))))))}}}]);
//# sourceMappingURL=75.3da58794.chunk.js.map
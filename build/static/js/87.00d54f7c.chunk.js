(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[87],{1303:function(e,t,a){"use strict";a.r(t);var n=a(109),r=a.n(n),c=a(165),l=a(658),s=a(1),o=a.n(s),u=a(19),i=a(45),m=a.n(i),d=(a(661),a(111)),b=(a(662),a(660)),f=a.n(b),h=a(164),O=a(664),E=a(657);t.default=function(){var e=Object(s.useState)(d.a.getCurrentUser),t=Object(l.a)(e,2),a=t[0],n=(t[1],Object(s.useState)([])),i=Object(l.a)(n,2),b=i[0],j=i[1],p=Object(s.useState)(""),v=Object(l.a)(p,2),w=(v[0],v[1],Object(s.useState)(!1)),N=Object(l.a)(w,2),S=(N[0],N[1],Object(s.useState)(!1)),D=Object(l.a)(S,2),g=D[0],y=D[1],C=Object(s.useState)(0),x=Object(l.a)(C,2),k=(x[0],x[1],Object(s.useState)(0)),B=Object(l.a)(k,2),T=(B[0],B[1],Object(s.useState)("")),R=Object(l.a)(T,2),U=(R[0],R[1],Object(s.useState)(0)),q=Object(l.a)(U,2),I=(q[0],q[1],Object(s.useState)(0)),F=Object(l.a)(I,2),A=(F[0],F[1],Object(s.useState)({customer:0,amount:0,narration:"",entryBy:a.staff})),J=Object(l.a)(A,2),G=(J[0],J[1],Object(s.useState)({idNumber:"",dr:0,narration:"",date:new Date})),H=Object(l.a)(G,2),V=(H[0],H[1]),W=Object(s.useState)(5),Y=Object(l.a)(W,2),z=(Y[0],Y[1],Object(s.useState)(1)),K=Object(l.a)(z,2),L=(K[0],K[1],Object(s.useState)((new Date).toISOString().slice(0,10))),M=Object(l.a)(L,2),P=M[0],Q=M[1],X=Object(s.useState)((new Date).toISOString().slice(0,10)),Z=Object(l.a)(X,2),$=Z[0],_=Z[1];Object(u.g)();Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(h.apiUrl+"/loan/cashcollateral/withdrawals/"+P+"/"+$);case 2:t=e.sent,j(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[P,$,g]);var ee=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}),te=b.reduce((function(e,t){return e+t.Dr}),0);return o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-12 mt-2"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("h4",{className:"centertext mb-3"},"Cash Collateral Withdrawals and Transfers")),o.a.createElement("p",{className:"text-left"},"NB: The list shows customer collateral withdrawals and Transfers. You can filter by selecting a date range. Using the start and end Dates."),o.a.createElement("div",{class:"mb-3 row mt-5 col-sm-12"},o.a.createElement(E.bb,{htmlFor:"dateOnCheque",className:"form-label"},"Start Date"),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement(E.R,{type:"date",class:"form-control",id:"dateOnCheque",value:P,onChange:function(e){Q(e.currentTarget.value)}})),o.a.createElement(E.bb,{htmlFor:"dateOnCheque",className:"form-label"},"End Date"),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement(E.R,{type:"date",class:"form-control",id:"dateOnCheque",value:$,onChange:function(e){_(e.currentTarget.value)}})),o.a.createElement("div",{className:"col-sm-4 text-right"},"Total Amt: ",o.a.createElement("strong",null,ee.format(te)))),o.a.createElement(O.c,{className:"table-sm col-sm-12"},o.a.createElement("thead",{className:""},o.a.createElement("tr",{className:"fs-sm"},o.a.createElement("th",null),o.a.createElement("th",null,"ID"),o.a.createElement("th",null,"Drawer"),o.a.createElement("th",null,"Date"),o.a.createElement("th",null,"Amount"),o.a.createElement("th",null,"Description"))),o.a.createElement("tbody",null,b.map((function(e,t){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,t+1),o.a.createElement("td",null,e.idNumber),o.a.createElement("td",null,e.fullName),o.a.createElement("td",null,e.tDate),o.a.createElement("td",null,ee.format(e.Dr)),o.a.createElement("td",null,e.narration),o.a.createElement("td",null,o.a.createElement(E.f,{onClick:function(){return V({id:(t=e).id,idNumber:t.idNumber,dr:t.Dr,narration:t.narration,date:new Date(t.tdate)}),void f.a.fire({title:"Do you want to REVERSE this transaction?",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Reverse",denyButtonText:"Don't"}).then(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=9;break}return console.log(t),e.next=4,m.a.put(h.apiUrl+"/loan/cashcollateral/reversal",{id:t.id,idNumber:t.idNumber,dr:t.Dr,narration:t.narration,date:t.tdate});case 4:e.sent,f.a.fire("Reversed!","","success"),y(!g),e.next=10;break;case 9:a.isDenied&&f.a.fire("Cancelled","","info");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var t},className:"btn-sm float-right mt-3",color:"danger"},"Reverse")))})))),o.a.createElement(E.f,{onClick:function(){return e=h.reportUrl+"/collateralBalances.aspx",void window.open(e,"customerlist","popup","left=100,top=100,width=320,height=320");var e},className:"btn-sm float-left mt-3 mb-3",color:"success"},"Collateral Balances"))))}}}]);
//# sourceMappingURL=87.00d54f7c.chunk.js.map
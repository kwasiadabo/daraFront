(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[84],{1278:function(e,a,t){"use strict";t.r(a);var n=t(112),r=t(109),c=t.n(r),l=t(164),s=t(654),o=t(1),u=t.n(o),m=t(45),i=t.n(m),f=(t(657),t(656)),b=t.n(f),p=t(163),d=t(653),h=t(659);a.default=function(e){var a=Object(o.useState)(""),t=Object(s.a)(a,2),r=t[0],m=(t[1],Object(o.useState)({username:"",name:"",role:"",branch:B})),f=Object(s.a)(m,2),E=f[0],v=f[1],O=Object(o.useState)([]),w=Object(s.a)(O,2),j=w[0],k=w[1],g=Object(o.useState)([]),N=Object(s.a)(g,2),S=N[0],C=N[1],y=Object(o.useState)([]),x=Object(s.a)(y,2),R=x[0],U=x[1],D=Object(o.useState)([]),F=Object(s.a)(D,2),B=F[0],A=F[1],P=Object(o.useState)(!1),T=Object(s.a)(P,2),V=(T[0],T[1]),z=Object(o.useState)(!1),q=Object(s.a)(z,2),J=q[0],L=q[1],M=Object(o.useState)({username:"",password:"pass1234",staff:0,branch:0,userRole:""}),G=Object(s.a)(M,2),H=G[0],K=G[1];Object(o.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(p.apiUrl+"/setup/staff");case 2:a=e.sent,U(a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(p.apiUrl+"/setup/userroles");case 2:a=e.sent,C(a.data),console.log(a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(o.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var a,t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(p.apiUrl+"/setup/branch");case 2:return a=e.sent,e.next=5,i.a.get(p.apiUrl+"/users/useraccounts");case 5:t=e.sent,A(a.data),k(t.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){for(var e="123456789abcdefghijklmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",a=0;a<=8;a++){var t=Math.floor(Math.random()*e.length);e.substring(t,t+1)}K(Object(n.a)(Object(n.a)({},H),{},{password:"pass1234"}))}()}),[]);var Q=function(){var e=Object(l.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,i.a.post(p.apiUrl+"/setup/user",H);case 4:if(200===e.sent.status){e.next=9;break}return e.abrupt("return",b.a.fire("Failed","Submission Failed ! Check Entries and try again !","error"));case 9:b.a.fire("Success","User Account Created Successfully","success"),b.a.fire("Default Password","Default Password: "+H.password+" : Change this on your first login.","info"),K({username:"",password:"pass1234",userRole:"",branch:0,staff:0});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),b.a.fire("OOPS ! "+e.t0,"error");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(a){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(c.a.mark((function e(a){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.put(p.apiUrl+"/setup/user/"+a,{password:"pass1234"});case 3:if(200===e.sent.status){e.next=8;break}return e.abrupt("return",b.a.fire("Failed","Submission Failed ! Check Entries and try again !","error"));case 8:b.a.fire("Success","Account Reset Successfully","success"),b.a.fire("Default Password","Default Password: pass1234 : Change this on your first login.","info"),K({username:"",password:"pass1234",userRole:"",branch:0,staff:0});case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),b.a.fire("OOPS ! "+e.t0,"error");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(a){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post(p.apiUrl+"/backup",{db:"Daraplus"});case 2:if(200===e.sent.status){e.next=7;break}return e.abrupt("return",b.a.fire("Backup Failed","Db Back Failed ! try again !","error"));case 7:b.a.fire("Success","Backup Completed Successfully","success");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y={sAccounts:j.filter((function(e){return e.nameOfStaff.toLowerCase().includes(r.toLowerCase())}))},Z=0===r.length?j:Y.sAccounts;return u.a.createElement("div",{className:"container"},u.a.createElement("h1",{className:"centertext"},"Setup User Accounts"),u.a.createElement("p",{className:"staffp mb-3"},"A user account is an established technique for connecting a user and an information service and/or computer network. User accounts determine whether or not a user can connect to a computer, network or similar networks."),u.a.createElement("div",{className:"mb-3 row"},u.a.createElement("label",{htmlFor:"phoneworship",className:"form-label col-sm-2"},"FullName"),u.a.createElement(d.wb,{className:"col-sm-6","aria-label":"Default select example",value:H.staff,onChange:function(e){return K(Object(n.a)(Object(n.a)({},H),{},{staff:e.currentTarget.value}))}},u.a.createElement("option",{defaultValue:""},"--Select Officer--"),R.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.nameOfStaff)})))),u.a.createElement("div",{className:"mb-3 row"},u.a.createElement("label",{htmlFor:"username",className:"form-label col-sm-2"},"Username"),u.a.createElement(d.R,{type:"text",className:"col-sm-6",id:"username",value:H.username,onChange:function(e){return K(Object(n.a)(Object(n.a)({},H),{},{username:e.currentTarget.value}))}})),u.a.createElement("div",{className:"mb-3 row"},u.a.createElement("label",{htmlFor:"gender",className:"form-label col-sm-2"},"User Role"),u.a.createElement(d.wb,{className:"col-sm-6","aria-label":"Default select example",value:H.userRole,onChange:function(e){K(Object(n.a)(Object(n.a)({},H),{},{userRole:e.currentTarget.value}))}},u.a.createElement("option",{defaultValue:""},"--Select User Role--"),S.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.role)})))),u.a.createElement("div",{className:"mb-3 row"},u.a.createElement("label",{htmlFor:"branch",className:"form-label col-sm-2"},"Branch"),u.a.createElement(d.wb,{className:"col-sm-6","aria-label":"Default select example",value:H.branch,onChange:function(e){K(Object(n.a)(Object(n.a)({},H),{},{branch:e.currentTarget.value}))}},u.a.createElement("option",{defaultValue:""},"--Select Branch--"),B.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.branch)})))),u.a.createElement(d.f,{className:"col-sm-3 mt-3 btn-sm float-right mb-3",color:"success",onClick:Q},"Submit"),u.a.createElement(d.f,{color:"danger",className:"btn-sm",onClick:X},"DB Backup"),u.a.createElement("div",null,u.a.createElement(h.c,null,u.a.createElement("thead",null,u.a.createElement("tr",{className:"fs-sm"},u.a.createElement("th",null),u.a.createElement("th",null,"Name"),u.a.createElement("th",null,"Username"),u.a.createElement("th",null,"Role"),u.a.createElement("th",null,"Branch"),u.a.createElement("th",null,"Actions"))),u.a.createElement("tbody",null,Z.map((function(e,a){return u.a.createElement("tr",{key:e.id,Style:"cursor: pointer;",onClick:function(){return V(!0),void K({})}},u.a.createElement("td",null,a+1),u.a.createElement("td",null,e.nameOfStaff),u.a.createElement("td",null,e.username),u.a.createElement("td",null,e.userRole),u.a.createElement("td",null,e.branch),u.a.createElement("td",null,u.a.createElement(d.z,{className:"btn-sm"},u.a.createElement(d.E,{color:"info",size:"sm",onClick:null},"Select Action"),u.a.createElement(d.D,{size:"sm"},u.a.createElement(d.C,{onClick:function(){return W(e.id)}},"Reset"),u.a.createElement(d.C,{onClick:function(){return function(e){L(!0),v({username:e.username,name:e.nameOfStaff,role:e.userRole,branch:e.branch}),console.log(e)}(e)}},"Changes")))))}))))),u.a.createElement(d.fb,{className:"modal fade col-sm-12",size:"lg",show:J,color:"warning","data-backdrop":"static","data-keyboard":"false",onClose:function(){L(!J)}},u.a.createElement(d.ib,{className:"modal-header",closeButton:!0},u.a.createElement("p",null,u.a.createElement("h3",{className:"centertext"},"Change Username"))),u.a.createElement(d.gb,{className:"modal-body col-sm-12"},u.a.createElement("div",{class:"mb-3 row"},u.a.createElement(d.bb,{htmlFor:"nameOfCustomer",className:"col-sm-3 col-form-label"},"Name of Staff"),u.a.createElement("div",{class:"col-sm-8"},u.a.createElement(d.R,{className:"form-control-xl mb-2 mt-2 input-lg",value:E.name,readOnly:!0}))),u.a.createElement("div",{class:"mb-3 row"},u.a.createElement(d.bb,{htmlFor:"bank",className:"col-sm-3 col-form-label"},"Username"),u.a.createElement("div",{class:"col-sm-8"},u.a.createElement(d.R,{id:"bank",className:"form-control","aria-label":"Default select example",value:E.username,onChange:null}))),u.a.createElement("div",{class:"mb-3 row"},u.a.createElement(d.bb,{htmlFor:"bankAccount",className:"col-sm-3 col-form-label"},"User Role"),u.a.createElement("div",{class:"col-sm-8"},u.a.createElement(d.wb,{className:"col-sm-12","aria-label":"Default select example",value:E.role,onChange:function(e){K(Object(n.a)(Object(n.a)({},H),{},{userRole:e.currentTarget.value}))}},u.a.createElement("option",{defaultValue:E.role},E.role),S.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.role)}))))),u.a.createElement("div",{class:"mb-3 row"},u.a.createElement(d.bb,{htmlFor:"dateOnCheque",className:"col-sm-3 col-form-label"},"Branch"),u.a.createElement("div",{className:"col-sm-8"},u.a.createElement(d.wb,{className:"col-sm-12","aria-label":"Default select example",value:H.branch,onChange:function(e){K(Object(n.a)(Object(n.a)({},H),{},{branch:e.currentTarget.value}))}},u.a.createElement("option",{defaultValue:E.branch},E.branch),B.map((function(e){return u.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.branch)})))))),u.a.createElement(d.hb,null,u.a.createElement("div",{className:"justify-content-center"},u.a.createElement(d.f,{onClick:null,className:"m-3",color:"success"},"Submit"),u.a.createElement(d.f,{onClick:function(){return L(!1)},className:"m-3",color:"danger"},"Close")))))}}}]);
//# sourceMappingURL=84.4043b156.chunk.js.map
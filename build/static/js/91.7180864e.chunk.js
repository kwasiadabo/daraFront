(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[91],{1307:function(e,t,a){"use strict";a.r(t);var l=a(112),n=a(168),c=a(109),r=a.n(c),o=a(165),m=a(658),s=a(1),u=a.n(s),f=a(1308),i=a(45),d=a.n(i),b=(a(661),a(662),a(669),a(660)),O=a.n(b),E=(a(111),a(164)),p=(a(679),a(680),a(681),a(682),a(683),a(684),a(664)),h=a(657);t.default=function(){var e,t,a=Object(s.useState)([]),c=Object(m.a)(a,2),i=c[0],b=c[1],C=Object(s.useState)(!1),y=Object(m.a)(C,2),j=y[0],v=y[1],N=Object(s.useState)(""),x=Object(m.a)(N,2),S=x[0],g=x[1],w=Object(s.useState)(new Date),k=Object(m.a)(w,2),P=(k[0],k[1],Object(s.useState)(!1)),F=Object(m.a)(P,2),I=F[0],R=F[1],B=Object(s.useState)(!0),D=Object(m.a)(B,2),A=(D[0],D[1],Object(s.useState)(!1)),M=Object(m.a)(A,2),L=(M[0],M[1],Object(s.useState)((new Date).toISOString().slice(0,10))),U=Object(m.a)(L,2),T=U[0],G=U[1],H=Object(s.useState)({id:"",dateOfCollection:"",customer:"",officer:"",amount:"",ModeOfPayment:"",status:"",loanId:""}),J=Object(m.a)(H,2),z=J[0],K=J[1],q=Object(s.useState)({id:0,amount:0}),Q=Object(m.a)(q,2),V=Q[0],W=Q[1];Object(s.useEffect)((function(){function e(){return(e=Object(o.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(E.apiUrl+"/loan/dailycollections/correction/"+T);case 2:t=e.sent,b(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j,T]);var X={dailycollectionsFilter:i.filter((function(e){return e.Officer.toLowerCase().includes(S.toLowerCase())||e.Customer.toLowerCase().includes(S.toLowerCase())}))},Y=0===S.length?i:X.dailycollectionsFilter,Z=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}),$=function(){var e=Object(o.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(V),e.prev=1,e.next=4,d.a.post(E.apiUrl+"/loan/dailycollections/payment/correctdailycollection",{id:V.id,amount:V.amount});case 4:if("OK"!==e.sent.statusText){e.next=12;break}O.a.fire("Success","Correction Made","success"),K({id:"",dateOfCollection:"",customer:"",officer:"",amount:"",ModeOfPayment:"",status:"",loanId:""}),W({id:0,amount:0}),v(!j),e.next=13;break;case 12:return e.abrupt("return",O.a.fire("OOPS","Correction Unsuccessful","error"));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",O.a.fire(e.t0.message+"[OOPS","Correction Unsuccessful]","error"));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();return u.a.createElement("div",null,u.a.createElement(h.vb,null,u.a.createElement(h.u,{lg:12},u.a.createElement(h.j,null,u.a.createElement("h4",{className:"text-left mt-3"},"Daily Collections Update"),u.a.createElement(h.k,null,u.a.createElement("div",{class:"mb-3 row mt-5 col-sm-12"},u.a.createElement(h.bb,{htmlFor:"dateOfPayment",className:"form-label"},"Date Of Payment"),u.a.createElement("div",{className:"col-sm-3"},u.a.createElement(h.R,{type:"date",class:"form-control",id:"dateOfPayment",value:T,onChange:function(e){G(e.currentTarget.value)}})),u.a.createElement(h.bb,{htmlFor:"search",className:"form-label"},"Search"),u.a.createElement("div",{className:"col-sm-3"},u.a.createElement(h.R,{type:"text",class:"form-control",id:"search",value:S,onChange:function(e){g(e.currentTarget.value)}}))),u.a.createElement(p.c,{className:"table-sm"},u.a.createElement("caption",null,"Daily Collections"),u.a.createElement("thead",null,u.a.createElement("tr",{className:"fs-sm"},u.a.createElement("th",null),u.a.createElement("th",null,"ID"),u.a.createElement("th",null,"Customer"),u.a.createElement("th",null,"Officer"),u.a.createElement("th",null,"Amount"),u.a.createElement("th",null,"Mode Of Payment"),u.a.createElement("th",null,"Status"),u.a.createElement("th",null,"Loan ID"),u.a.createElement("th",null))),u.a.createElement("tbody",null,Y.map((function(e,t){return u.a.createElement("tr",{key:e.id},u.a.createElement("td",null,t+1),u.a.createElement("td",null,e.id),u.a.createElement("td",null,e.Customer),u.a.createElement("td",null,e.Officer),u.a.createElement("td",null,Z.format(e.Amount)),u.a.createElement("td",null,e.ModeOfPayment),u.a.createElement("td",null,e.status),u.a.createElement("td",null,e.loanId),u.a.createElement("td",null,u.a.createElement(h.f,{color:"success btn-sm",onClick:function(){return K({id:(t=e).id,dateOfCollection:t.dateOfCollection,customer:t.Customer,officer:t.Officer,amount:t.Amount,modeOfPayment:t.ModeOfPayment,status:t.status,loanId:t.loanId}),W({id:t.id,amount:t.Amount}),void R(!I);var t}},"Select")))})))))))),u.a.createElement(f.a,{className:"modalCustomer fade ",size:"md",show:I,"data-backdrop":"static","data-keyboard":"false",closeButton:!0,align:"left"},u.a.createElement(f.a.Body,{className:"modal-body col-sm-12"},u.a.createElement("form",null,u.a.createElement(h.bb,{htmlFor:"nameOfOfficer",className:"form-label"},"Name of Customer"),u.a.createElement(h.R,{name:"nameOfCustomer",className:"text-left",type:"text",id:"nameOfCustomer",value:z.customer,autoComplete:"off"}),u.a.createElement(h.bb,{htmlFor:"Balance",className:"form-label"},"Officer"),u.a.createElement(h.R,{name:"Balance",className:"form-control  text-left",type:"text",id:"Balance",value:z.officer,autoComplete:"off"}),u.a.createElement(h.bb,{htmlFor:"amountReceived",className:"form-label"},"Mode Of Payment"),u.a.createElement(h.R,{autoComplete:"off",type:"text",name:"amountReceived",className:"form-control  text-right",id:"amountReceived",value:z.modeOfPayment,onChange:null}),u.a.createElement(h.bb,{htmlFor:"comment",className:"form-label"},"Status"),u.a.createElement(h.R,(e={autoComplete:"off",type:"textArea",name:"comment",className:"form-control text-left",id:"comment",value:z.status},Object(n.a)(e,"autoComplete","off"),Object(n.a)(e,"onChange",null),e)),u.a.createElement(h.bb,{htmlFor:"comment",className:"form-label"},"Loan ID"),u.a.createElement(h.R,(t={autoComplete:"off",type:"textArea",name:"comment",className:"form-control text-left",id:"comment",value:z.loanId},Object(n.a)(t,"autoComplete","off"),Object(n.a)(t,"onChange",null),t)),u.a.createElement(h.bb,{htmlFor:"Balance",className:"form-label"},"Amount (GHC)"),u.a.createElement(h.R,{name:"Balance",className:"form-control  text-left",type:"text",id:"Balance",value:V.amount,onChange:function(e){return W(Object(l.a)(Object(l.a)({},V),{},{amount:e.currentTarget.value}))},autoComplete:"off"}))),u.a.createElement(f.a.Footer,null,u.a.createElement(h.f,{onClick:$,color:"success"},"Submit"),u.a.createElement(h.f,{onClick:function(){return R(!1)},color:"danger"},"Close"))))}}}]);
//# sourceMappingURL=91.7180864e.chunk.js.map
(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[83],{1239:function(e,a,t){"use strict";t.r(a);var n=t(112),r=t(109),o=t.n(r),c=t(164),l=t(654),s=t(1),u=t.n(s),m=t(45),f=t.n(m),i=t(657),b=t.n(i),p=t(163),h=(t(111),t(658),t(656)),d=t.n(h),O=t(653),E=t(659);a.default=function(){var e=Object(s.useState)({nameOfStaff:"",phone:"",dob:"",dateEmployed:"",qualification:"",guarantorOne:"",guarantorOnePhone:"",guarantorTwo:"",guarantorTwoPhone:""}),a=Object(l.a)(e,2),t=a[0],r=a[1],m=Object(s.useState)([]),i=Object(l.a)(m,2),h=i[0],g=i[1],S=Object(s.useState)(""),N=Object(l.a)(S,2),v=N[0],y=N[1],j=Object(s.useState)(!1),w=Object(l.a)(j,2),P=w[0],x=w[1],T=Object(s.useState)(!1),k=Object(l.a)(T,2),C=k[0],F=k[1],D=Object(s.useState)(!1),U=Object(l.a)(D,2),q=U[0],M=U[1];Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(p.apiUrl+"/setup/staff");case 2:a=e.sent,g(a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),console.log(h)}),[h]);var R=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.post(p.apiUrl+"/setup/staff",t);case 3:if(200===e.sent.status){e.next=8;break}return e.abrupt("return",d.a.fire("Failed","Submission Failed ! Check Entries and try again !","error"));case 8:d.a.fire("Success","Staff Saved Successfully","success"),r({nameOfStaff:"",phone:"",dob:"",dateEmployed:"",qualification:"",guarantorOne:"",guarantorOnePhone:"",guarantorTwo:"",guarantorTwoPhone:""});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),d.a.fire("Error","OOPS ! "+e.t0.message,"error");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),Y={sStaff:h.filter((function(e){return e.nameOfStaff.toLowerCase().includes(v.toLowerCase())}))},G=function(){var e=Object(c.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),""===t.nameOfStaff){e.next=21;break}return e.prev=2,e.next=5,f.a.put(p.apiUrl+"/setup/staff",t);case 5:if(200===e.sent.status){e.next=10;break}return e.abrupt("return",d.a.fire("OOPS !","Submission Failed ! Check Entries and try again !","error"));case 10:d.a.fire("Success","Staff Updated Successfully","success"),r({nameOfStaff:"",phone:"",dob:"",dateEmployed:"",qualification:"",guarantorOne:"",guarantorOnePhone:"",guarantorTwo:"",guarantorTwoPhone:""}),F(!1),M(!q);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),d.a.fire("OOPS ! "+e.t0.message,"error");case 19:e.next=22;break;case 21:return e.abrupt("return",d.a.fire("OOPS","Enter all Details !","error"));case 22:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(a){return e.apply(this,arguments)}}(),A=function(){var e=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.nameOfStaff){e.next=20;break}return e.prev=1,e.next=4,f.a.delete(p.apiUrl+"/setup/staff/"+t.id);case 4:if(200===e.sent.status){e.next=9;break}return e.abrupt("return",d.a.fire("OOPS !","Submission Failed ! Check Entries and try again !","error"));case 9:d.a.fire("Success","Staff Deleted Successfully","success"),r({nameOfStaff:"",phone:"",dob:"",dateEmployed:"",qualification:"",guarantorOne:"",guarantorOnePhone:"",guarantorTwo:"",guarantorTwoPhone:""}),F(!1),M(!q);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),d.a.fire("OOPS ! "+e.t0.message,"error");case 18:e.next=21;break;case 20:return e.abrupt("return",d.a.fire("OOPS","Select a Staff !","error"));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),B=0===v.length?h:Y.sStaff;return u.a.createElement("div",{className:"col-sm-12 mt-3"},u.a.createElement("h1",{className:"centertext"},"Staff Details"),u.a.createElement("p",{className:"staffp"},"People and their behaviors are what deliver results to your organization. Not systems, not processes, not computers, not machines."," ",u.a.createElement("br",null),'"Mark Hortsman"'),u.a.createElement("div",{className:"centreStaff row "},u.a.createElement("div",{className:"table-responsive"},u.a.createElement(O.f,{type:"submit",className:"btn btn-success btn-block col-sm-3 float-right btn-sm",onClick:function(){return x(!P)}},"Enter New Staff"),u.a.createElement(O.R,{className:"mt-3 mb-3 col-4",type:"text",placeholder:"Search with Staff Name or Phone",onChange:function(e){y(e.target.value)}}),u.a.createElement(E.c,null,u.a.createElement("thead",null,u.a.createElement("tr",{className:"fs-sm"},u.a.createElement("th",null),u.a.createElement("th",null,"Name"),u.a.createElement("th",null,"Date of Birth"),u.a.createElement("th",null,"Phone"),u.a.createElement("th",null,"Qualification"),u.a.createElement("th",{className:"hidden-sm-down"},"Date Employed"))),u.a.createElement("tbody",null,B.map((function(e,a){return u.a.createElement("tr",{key:e.id,Style:"cursor: pointer;",onClick:function(){return a=e,F(!0),r({nameOfStaff:a.nameOfStaff,phone:a.phone,dob:new Date(a.dob).toISOString().slice(0,10),dateEmployed:new Date(a.dateEmployed).toISOString().slice(0,10),qualification:a.qualification,guarantorOne:a.guarantorOne,guarantorOnePhone:a.guarantorOnePhone,guarantorTwo:a.guarantorTwo,guarantorTwoPhone:a.guarantorTwoPhone,id:a.id}),void x(!P);var a}},u.a.createElement("td",null,a+1),u.a.createElement("td",null,e.nameOfStaff),u.a.createElement("td",null,b()(e.dob).format("DD-MMMM-YYYY")),u.a.createElement("td",null,e.phone),u.a.createElement("td",null,e.qualification),u.a.createElement("td",null,b()(e.dateEmployed).format("DD-MMMM-YYYY")))}))))),u.a.createElement(O.fb,{show:P,onClose:function(){x(!P)},color:"success",size:"lg"},u.a.createElement(O.ib,{closeButton:!0},u.a.createElement(O.jb,null,"STAFF MGT | ADD STAFF ")),u.a.createElement(O.gb,null,u.a.createElement(O.K,null,u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"fullName",className:"form-Label col-sm-3"},"Staff Name"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"fullName",value:t.nameOfStaff,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{nameOfStaff:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"dob",className:"form-label col-sm-3"},"Date of Birth"),u.a.createElement(O.R,{type:"date",className:"form-control col-sm-8",id:"dob",value:t.dob,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{dob:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"appdate",className:"form-label col-sm-3"},"Appointment Date"),u.a.createElement(O.R,{type:"date",className:"form-control col-sm-8",id:"appdate",value:t.dateEmployed,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{dateEmployed:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"phone",className:"form-label col-sm-3"},"Phone Number"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"phone",value:t.phone,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{phone:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"qualification",className:"form-label col-sm-3"},"Qualification"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"qualification",value:t.qualification,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{qualification:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"guarantor",className:"form-label col-sm-3"},"Guarantor 1"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"guarantor",value:t.guarantorOne,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{guarantorOne:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"phoneofgurantor1",className:"form-label col-sm-3"},"Phone of Guarantor 1"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"phoneofgurantor1",value:t.guarantorOnePhone,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{guarantorOnePhone:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"guarantor2",className:"form-label col-sm-3"},"Guarantor 2"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"guarantor2",value:t.guarantorTwo,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{guarantorTwo:e.currentTarget.value}))}})),u.a.createElement(O.U,{className:"mt-3"},u.a.createElement(O.bb,{htmlFor:"phoneofgurantor2",className:"form-label col-sm-3"},"Phone of Guarantor 2"),u.a.createElement(O.R,{type:"text",className:"form-control col-sm-8",id:"phoneofgurantor2",value:t.guarantorTwoPhone,onChange:function(e){return r(Object(n.a)(Object(n.a)({},t),{},{guarantorTwoPhone:e.currentTarget.value}))}})),u.a.createElement("div",{className:"d-flex justify-content-center mt-3 mb-3"},C?null:u.a.createElement(O.f,{className:"btn btn-primary col-sm-2 mt-3 btn-sm",onClick:R},"Submit"),C?u.a.createElement(O.f,{className:"btn-sm m-3 col-sm-2",color:"success",onClick:G},"Update"):null,C&&u.a.createElement(O.f,{className:"btn btn-danger col-sm-2 m-3 btn-sm",onClick:A},"Delete")))))))}}}]);
//# sourceMappingURL=83.377109c6.chunk.js.map
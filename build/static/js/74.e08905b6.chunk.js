(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[74],{1247:function(e,a,t){"use strict";t.r(a),function(e){var s=t(112),n=t(109),r=t.n(n),c=t(165),l=t(658),o=t(1),m=t.n(o),i=t(19),u=t(45),d=t.n(u),p=(t(661),t(662)),f=t.n(p),N=(t(669),t(660)),E=t.n(N),h=(t(111),t(164)),b=(t(694),t(657));a.default=function(){var a=Object(o.useState)({}),t=Object(l.a)(a,2),n=t[0],u=t[1],p=Object(i.i)(),N=p.customer,v=p.disbursementId,g=Object(o.useState)(""),k=Object(l.a)(g,2),y=(k[0],k[1],Object(o.useState)("")),O=Object(l.a)(y,2),w=O[0],G=O[1],P=Object(o.useState)(!1),B=Object(l.a)(P,2),j=B[0],S=(B[1],Object(o.useState)([])),C=Object(l.a)(S,2),x=(C[0],C[1]),D=Object(i.g)(),I=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"});Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(h.apiUrl+"/loan/booking/summary/"+N+"/"+v);case 2:if(a=e.sent,u(a.data[0]),null!=a.data[0].img){e.next=6;break}return e.abrupt("return");case 6:G(a.data[0].img.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j]),Object(o.useEffect)((function(){function e(){return(e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get(h.apiUrl+"/loan/booking/check/"+N+"/"+v);case 2:a=e.sent,x(a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[j]);var R=e.from(w).toString("base64"),H={disbursementId:f.a.number().required().label("Disbursement ID"),customer:f.a.number().required().label("Customer"),interestRate:f.a.number().required().label("Interest Rate"),dateOfBooking:f.a.date().required().label("Date of Booking")},F=f.a.object(H),q=function(){var e=f.a.validate({customer:N,disbursementId:v,interestRate:n.interestRate,dateOfBooking:n.dateOfBooking},F);return e.error?e.error.details[0].message:null},T=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(a=q())){e.next=3;break}return e.abrupt("return",E.a.fire("Validation",a,"error"));case 3:E.a.fire({title:"Do you want to Complete Booking?",html:"Make sure all details have been checked before completing. You will not be allowed to make changes after completing booking.",showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Yes",denyButtonText:"No"}).then(function(){var e=Object(c.a)(r.a.mark((function e(a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.isConfirmed){e.next=19;break}return e.prev=1,e.next=4,d.a.put(h.apiUrl+"/loan/booking/complete",{customer:N,disbursementId:v,period:n.duration,interestRate:n.interestRate,dateOfBooking:n.dateOfBooking});case 4:if(200===e.sent.status){e.next=9;break}return e.abrupt("return",E.a.fire("OOPs !","Submission Failed ! Check Entries and try again !","error"));case 9:E.a.fire("Good job!","Loan Booking Completed Successfully","success"),D.push("/paymentschedule/"+v+"/"+N),U(h.reportUrl+"/paymentSchedule.aspx?"+v+"?"+N);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),E.a.fire("OOPS ! ","Loan Booking NOT Completed","error");case 17:e.next=20;break;case 19:a.isDenied&&E.a.fire("Cancelled","","info");case 20:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(a){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(e){window.open(e,"Payment Schedule","popup","left=100,top=100,width=320,height=320")};return m.a.createElement("div",{className:"container-fluid"},m.a.createElement("h4",{className:"mb-3 text-center"},"Loan Application Summary"),m.a.createElement("p",{className:"centerparagraph"},"An individual who promises to pay a borrower's debt in the event that the borrower defaults on their loan obligation. Guarantors pledge their own assets as collateral against the loans."),m.a.createElement("div",{className:"row mb-3"},m.a.createElement("div",{className:"col-sm-10"}," ",m.a.createElement("strong",null,"Customer : ",n.fullName)),m.a.createElement("div",{className:"col-sm-10"},"Gender : ",n.gender),m.a.createElement("div",{className:"col-sm-10"},"Phone : ",n.phone),m.a.createElement("div",{className:"col-sm-9"},"Field Officer : ",n.nameOfStaff),m.a.createElement("div",{className:"col-sm-9"},"Branch: ",n.branch),m.a.createElement("div",{className:"col-sm-3 float-right"},m.a.createElement("img",{src:"data:image/jpeg;base64,".concat(R),width:"120px",className:"ms-3"}))),m.a.createElement("div",{className:"row col-sm-12"},m.a.createElement("strong",null," ","Amount Requested : ",I.format(n.principal))),m.a.createElement("div",{className:"row mt-3"},m.a.createElement("h5",{className:"summaryheadings col-sm-12"},"Product Details"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Loan Product "),": ",n.product),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Processing Fee (",n.processingFee,"%) :")," ","GHC ",n.processingFee/100*n.principal),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Interest Rate (",n.interestRate,"%) :")," ","GHC ",n.interestRate/100*n.principal)),m.a.createElement("div",{className:"row mt-3"},m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Reg. Fee :"),I.format(n.registrationFee)),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," Duration :")," ",n.duration," ","Daily"===n.frequency?"Days":"Weekly"===n.frequency?"Weeks":"Months"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," Payment Freq. :")," ",n.frequency)),m.a.createElement("div",{className:"row  mt-3"},m.a.createElement("h5",{className:"summaryheadings col-sm-12"},"Collateral and Purpose"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," Cash Colateral:")," ",I.format(n.cashCollateral)),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," Purpose for Loan: "),n.purpose)),m.a.createElement("div",{className:"row  mt-3"},m.a.createElement("h5",{className:"summaryheadings col-sm-12"},"First Guarantor Details"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Name :")," ",n.firstGuarantor),m.a.createElement("div",{className:"col-sm-4 "},m.a.createElement("span",{className:""},"Phone :")," ",n.firstGuarantorPhone),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," GPS :")," ",n.firstGuarantorGPS),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""}," Relationship:")," ",n.firstGuarantorRelationship),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Household Person:")," ",n.firstGuarantorHouseHoldPerson),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Person's Phone:")," ",n.firstGuarantorHouseHoldPhone),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"ID Type :")," ",n.firstGuarantorIdType),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"ID Number :")," ",n.firstGuarantorIdNumber),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Business :")," ",n.firstGuarantorBusiness)),m.a.createElement("div",{className:"row  mt-3"},m.a.createElement("h5",{className:"summaryheadings col-sm-12"},"Second Guarantor"),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""},"Name :")," ",n.secondGuarantor),m.a.createElement("div",{className:"col-sm-4 "},m.a.createElement("span",{className:""},"Phone :")," ",n.secondGuarantorPhone),m.a.createElement("div",{className:"col-sm-4"},m.a.createElement("span",{className:""}," GPS :")," ",n.secondGuarantorGPS),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""}," Relationship:")," ",n.secondGuarantorRelationship),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Household Person:")," ",n.secondGuarantorHouseHoldPerson),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Person's Phone:")," ",n.secondGuarantorHouseHoldPhone),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"ID Type :")," ",n.secondGuarantorIdType),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"ID Number :")," ",n.secondGuarantorIdNumber),m.a.createElement("div",{className:"col-sm-4 mt-3"},m.a.createElement("span",{className:""},"Business :")," ",n.secondGuarantorBusiness),m.a.createElement("h5",{className:"summaryheadings col-sm-12 mt-2"},"Booking Date Confirmation"),m.a.createElement("div",{className:"col-sm-12"},m.a.createElement(b.bb,{htmlFor:"dateOfBooking",className:"col-sm-4 col-form-label"},"Confirm Date of Booking")," ",m.a.createElement(b.R,{type:"date",className:"form-control col-sm-12",id:"dateOfBooking",value:n.dateOfBooking,onChange:function(e){return u(Object(s.a)(Object(s.a)({},n),{},{dateOfBooking:e.currentTarget.value}))}}))),m.a.createElement("div",{className:"col-sm-12 mt-3 float-right"},m.a.createElement(b.f,{className:"float-right mb-3 mr-3",color:"success",onClick:function(){return U(h.reportUrl+"/paymentSchedule.aspx?"+v+"?"+N)}},"Print Summary"),!n.isActive&&m.a.createElement(b.f,{className:"float-right mb-3 mr-3",color:"info",onClick:T},"Complete Booking")))}}.call(this,t(690).Buffer)}}]);
//# sourceMappingURL=74.e08905b6.chunk.js.map
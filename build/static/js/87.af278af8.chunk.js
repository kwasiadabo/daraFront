(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[87],{1246:function(e,t,a){"use strict";a.r(t);var l=a(109),n=a.n(l),c=a(164),r=a(654),s=a(1),m=a.n(s),o=a(45),u=a.n(o),i=(a(657),a(658),a(665),a(656),a(111),a(163)),d=(a(675),a(676)),E=(a(677),a(678),a(679),a(680),a(659)),f=a(653);t.default=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),a=t[0],l=t[1],o=Object(s.useState)([]),b=Object(r.a)(o,2),p=(b[0],b[1],Object(s.useState)(!1)),h=Object(r.a)(p,2),N=(h[0],h[1],Object(s.useState)(!1)),g=Object(r.a)(N,2),v=g[0],w=g[1],O=Object(s.useState)(!1),S=Object(r.a)(O,2),j=S[0],y=S[1],x=Object(s.useState)(new Date),k=Object(r.a)(x,2),D=(k[0],k[1],Object(s.useState)("")),C=Object(r.a)(D,2),L=C[0],A=C[1],B=Object(s.useState)((new Date).toISOString().slice(0,10)),P=Object(r.a)(B,2),I=P[0],R=P[1],z=Object(s.useState)((new Date).toISOString().slice(0,10)),U=Object(r.a)(z,2),F=U[0],J=U[1];function T(e){var t=new Date(e);return t.getFullYear().toString()+"-"+(t.getMonth()+101).toString().substring(1)+"-"+(t.getDate()+100).toString().substring(1)}Object(s.useEffect)((function(){function e(){return(e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get(i.apiUrl+"/loan/booking/report/"+I+"/"+F);case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[I,F]);a.filter((function(e){return T(e.dateCompleted)===T(new Date)}));var V={loans:a.filter((function(e){return e.fullName.toLowerCase().includes(L.toLowerCase())}))},G=function(e){window.open(e,"Loan Details","popup","left=100,top=100,width=320,height=320")},H=0===L.length?a:V.loans,M=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"});return m.a.createElement("div",null,m.a.createElement("div",{className:"row justify-content-center mb-3"},m.a.createElement("p",{className:"mb-2"},"Loans in the list are fully booked and various accounting effects completed. Loan beneficiaries are expected to complete the payment of such loans")),m.a.createElement(f.vb,null,m.a.createElement(f.u,{lg:12},m.a.createElement(f.j,null,m.a.createElement(f.n,{className:"text-right"},m.a.createElement("div",{className:"m-2"},m.a.createElement("label",{className:"m-2"},"Start Date"),m.a.createElement(f.R,{type:"date",className:"col-sm-3 float-right",onChange:function(e){R(e.currentTarget.value)}})),m.a.createElement("div",{className:"m-2"},m.a.createElement("label",{className:"m-2"},"End Date"),m.a.createElement(f.R,{type:"date",className:"col-sm-3 float-right ms-3",onChange:function(e){J(e.currentTarget.value)}})),m.a.createElement(f.f,{className:"float-right m-3 col-sm-3 btn-sm",color:"warning",onClick:function(){return G(i.reportUrl+"/bookedLoans.aspx?"+I+"?"+F)}},"View")),m.a.createElement("h4",{className:"text-center mt-3"},"Booked Loans"),m.a.createElement(f.k,null,m.a.createElement(E.b,{className:"mt-3 mb-3 ms-3 col-sm-4",type:"text",placeholder:"Search with Customer Name",onChange:function(e){A(e.target.value)}}),m.a.createElement(E.c,{className:"table-sm"},m.a.createElement("caption",null,"Booked Loans"),m.a.createElement("thead",null,m.a.createElement("tr",{className:"fs-sm"},m.a.createElement("th",null),m.a.createElement("th",null,"Customer"),m.a.createElement("th",null,"Product"),m.a.createElement("th",null,"Prinicipal"),m.a.createElement("th",null,"Rate (%)"),m.a.createElement("th",null,"Loan Amount"),m.a.createElement("th",null,"Loan Officer"),m.a.createElement("th",null))),m.a.createElement("tbody",null,H.map((function(e,t){return m.a.createElement("tr",{key:e.id},m.a.createElement("td",null,t+1),m.a.createElement("td",null,e.fullName),m.a.createElement("td",null,e.product),m.a.createElement("td",null,M.format(e.principal)),m.a.createElement("td",null,e.interestRate),m.a.createElement("td",null,M.format(e.principal+e.interestRate/100*e.principal)),m.a.createElement("td",null,e.nameOfStaff),m.a.createElement("td",null,m.a.createElement(f.z,{className:"m-1"},m.a.createElement(f.E,{color:"info",size:"sm"},"View"),m.a.createElement(f.D,{size:"sm"},m.a.createElement(f.C,{onClick:function(){return G(i.reportUrl+"/individualLoanDetails.aspx?"+e.id)}},"Loan Report"),m.a.createElement(f.A,null),m.a.createElement(f.C,{onClick:function(){return G(i.reportUrl+"/paymentSchedule.aspx?"+e.disbursementId+"?"+e.customer)}},"Payment Schedule"),m.a.createElement(f.C,{onClick:function(){return y(!j)}},"Change Loan Status")))))})))))))),m.a.createElement(f.fb,{className:"modal fade col-sm-12",size:"lg",show:v,color:"info","data-backdrop":"static","data-keyboard":"false",onClose:function(){w(!v)}},m.a.createElement(f.ib,{className:"modal-header",closeButton:!0},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Applicant: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Bank: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Amount Disbursed: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Date Disbursed :")),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Disbursed By: ",null)))),m.a.createElement(f.gb,{className:"modal-body col-sm-12"},m.a.createElement("h4",{className:"text-center mb-3"},"Loan Principal And Purpose"),m.a.createElement(d.a,{customer:null,disbursementId:null,disbursedAmount:null})),m.a.createElement(f.hb,null)),m.a.createElement(f.fb,{className:"modal fade col-sm-12",size:"sm",show:j,color:"primary","data-backdrop":"static","data-keyboard":"false",onClose:function(){w(!v)}},m.a.createElement(f.ib,{className:"modal-header",closeButton:!0},m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Applicant: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Bank: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Amount Disbursed: ",null)),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Date Disbursed :")),m.a.createElement("div",{className:"col-sm-4 text-left"},m.a.createElement("h6",{className:""},"Disbursed By: ",null)))),m.a.createElement(f.gb,{className:"modal-body col-sm-12"},m.a.createElement("h4",{className:"text-center mb-3"},"Loan Principal And Purpose"),m.a.createElement(d.a,{customer:null,disbursementId:null,disbursedAmount:null})),m.a.createElement(f.hb,null)))}}}]);
//# sourceMappingURL=87.af278af8.chunk.js.map
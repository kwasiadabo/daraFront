(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[12],{1025:function(e,t){},1039:function(e,t){},1041:function(e,t){},1300:function(e,t,a){"use strict";a.r(t);var r=a(112),n=a(109),c=a.n(n),l=a(165),o=a(658),u=a(1),s=a.n(u),m=a(45),i=a.n(m),f=a(661),b=a.n(f),O=a(662),d=a.n(O),p=(a(669),a(660)),h=a.n(p),g=a(111),v=a(164),S=(a(679),a(680),a(681),a(682),a(683),a(684),a(664)),E=a(657);a(972);t.default=function(){var e=Object(u.useState)(g.a.getCurrentUser),t=Object(o.a)(e,2),a=t[0],n=(t[1],Object(u.useState)([])),m=Object(o.a)(n,2),f=m[0],O=m[1],p=Object(u.useState)([]),j=Object(o.a)(p,2),C=j[0],k=j[1],y=Object(u.useState)(""),N=Object(o.a)(y,2),R=(N[0],N[1]),T=Object(u.useState)(""),w=Object(o.a)(T,2),x=(w[0],w[1],Object(u.useState)(!1)),A=Object(o.a)(x,2),D=A[0],M=A[1],B=Object(u.useState)(!1),F=Object(o.a)(B,2),I=F[0],U=F[1],q=Object(u.useState)([]),G=Object(o.a)(q,2),P=G[0],Y=(G[1],Object(u.useState)((new Date).toISOString().slice(0,10))),H=Object(o.a)(Y,2),J=H[0],L=H[1],V=Object(u.useState)(new Date),z=Object(o.a)(V,2),K=(z[0],z[1],Object(u.useState)(!1)),_=Object(o.a)(K,2),Q=(_[0],_[1],Object(u.useState)({Officer:"",dateOfReceipt:(new Date).toISOString().slice(0,10),Momo:"",Cash:"",TotalAmount:"",Overage:"",Shortage:"",receivedBy:a.nameOfStaff})),W=Object(o.a)(Q,2),X=W[0],Z=W[1],$=Object(u.useState)((new Date).toISOString().slice(0,10)),ee=Object(o.a)($,2),te=ee[0],ae=ee[1];Object(u.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(v.apiUrl+"/setup/staff");case 2:t=e.sent,k(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(u.useEffect)((function(){function e(){return(e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get(v.apiUrl+"/loan/bulkCash/"+te);case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[te,I]);var re={Officer:d.a.string().required().label("Field Officer"),dateOfReceipt:d.a.date().required().label("Date of Collection"),Momo:d.a.number().required().label("Momo Received"),Cash:d.a.number().required().label("Cash Received"),TotalAmount:d.a.number().required().label("Total Amount"),Overage:d.a.number().default(0),Shortage:d.a.number().default(0),receivedBy:d.a.string().allow("")},ne=d.a.object(re),ce=function(){var e=d.a.validate(X,ne);return e.error?e.error.details[0].message:null},le=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(X),null===(t=ce())){e.next=4;break}return e.abrupt("return",h.a.fire("Validation",t,"error"));case 4:return e.prev=4,e.next=7,i.a.post(v.apiUrl+"/loan/bulkcash",X);case 7:if(200===e.sent.status){e.next=12;break}return e.abrupt("return",h.a.fire("OOPs !","Submission Failed ! Check Entries and try again !","error"));case 12:h.a.fire("Good job!","Bulk Cash Received Successfully","success"),Z({Officer:"",dateOfReceipt:(new Date).toISOString().slice(0,10),Momo:"",Cash:"",TotalAmount:"",Overage:"",Shortage:"",receivedBy:a.nameOfStaff}),U(!I);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),h.a.fire("OOPS ! ","Bulk Cash NOT Received","error");case 20:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(){return e.apply(this,arguments)}}(),oe=new Intl.NumberFormat("en-US",{style:"currency",currency:"GHS"}),ue=function(){var e=Object(l.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.prev=1,e.next=4,i.a.delete(v.apiUrl+"/loan/bulkCash/"+t.id+"/"+t.officerId+"/"+t.dateOfReceipt);case 4:if(200!==e.sent.status){e.next=12;break}h.a.fire("OK","Bulk Cash Deleted","success"),Z({Officer:"",dateOfReceipt:(new Date).toISOString().slice(0,10),Momo:"",Cash:"",TotalAmount:"",Overage:"",Shortage:"",receivedBy:a.nameOfStaff}),U(!I),ae((new Date).toISOString().slice(0,10)),e.next=13;break;case 12:return e.abrupt("return",h.a.fire("OOPS","Bulk Cash NOT Deleted","error"));case 13:e.next=18;break;case 15:return e.prev=15,e.t0=e.catch(1),e.abrupt("return",h.a.fire("OOPS",e.t0+"  [Bulk Cash NOT Deleted]","error"));case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),se=[];P.map((function(e){var t={Officer:e.Officer.nameOfStaff,Amount:e.amount};se.push(t)}));return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("button",{type:"button",className:"btn btn-success btn-sm float-right",onClick:function(){Z({dateOfReceipt:(new Date).toISOString().slice(0,10),Officer:"",receivedBy:a.nameOfStaff,Momo:"",Cash:"",TotalAmount:"",Overage:0,Shortage:0}),console.log(X),M(!D)}},"Receive Bulk Collections"),s.a.createElement("input",{type:"date",name:"dateOfReceipt",className:"form-control col-sm-4 mb-3",id:"dateOfReceipt",value:J,onChange:function(e){L(e.currentTarget.value),ae(e.currentTarget.value),U(!I)}}),s.a.createElement(S.c,{className:"table align-middle mb-0 table-sm"},s.a.createElement("thead",null,s.a.createElement("tr",{className:"fs-sm"},s.a.createElement("th",null),s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Officer"),s.a.createElement("th",null,"Momo"),s.a.createElement("th",null,"Cash"),s.a.createElement("th",null,"Amount"),s.a.createElement("th",null,"Overage"),s.a.createElement("th",null,"Shortage"),s.a.createElement("th",null))),s.a.createElement("tbody",null,f.map((function(e,t){return s.a.createElement("tr",{key:e._id},s.a.createElement("td",null,t+1),s.a.createElement("td",null,b()(e.dateOfReceipt).format("DD-MMMM-YYYY")),s.a.createElement("td",null,e.Officer),s.a.createElement("td",null,oe.format(e.Momo)),s.a.createElement("td",null,oe.format(e.Cash)),s.a.createElement("td",null,oe.format(e.TotalAmount)),s.a.createElement("td",null,oe.format(e.Overage)),s.a.createElement("td",null,oe.format(e.Shortage)),s.a.createElement("td",null,null==e.status?s.a.createElement("td",null,s.a.createElement(E.f,{className:"btn-sm",color:"danger",onClick:function(){return ue(e)}},"Remove")):null))})))),s.a.createElement(E.fb,{className:"fade col-sm-10",size:"md",show:D,color:"success","data-backdrop":"static","data-keyboard":"false",onClose:function(){M(!D)}},s.a.createElement(E.ib,{className:"modal-header",closeButton:!0},s.a.createElement("p",null,s.a.createElement("h3",{className:"centertext"},"Receive Bulk Amount"))),s.a.createElement(E.gb,{className:"modal-body"},s.a.createElement("form",null,s.a.createElement("label",{htmlFor:"dateOfReceipt",className:"form-label"},"Date of Receipt"),s.a.createElement("input",{type:"date",name:"dateOfReceipt",className:"form-control text-center col-sm-12 mb-3",id:"dateOfReceipt",value:X.dateOfReceipt,onChange:function(e){return Z(Object(r.a)(Object(r.a)({},X),{},{dateOfReceipt:e.currentTarget.value}))}}),s.a.createElement(E.wb,{className:"form-select col-sm-12 mb-3","aria-label":"Default select example",value:X.Officer,onChange:function(e){Z(Object(r.a)(Object(r.a)({},X),{},{Officer:e.currentTarget.value,Overage:0,Shortage:0}))}},s.a.createElement("option",{defaultValue:""},"--Select Loan Officer--"),C.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id,id:e.id},e.nameOfStaff)}))),s.a.createElement("label",{htmlFor:"amountReceived",className:"form-label"},"Momo Amount (GHS) *"),s.a.createElement("input",{autoComplete:"off",type:"text",name:"amountReceived",className:"form-control col-sm-12 mb-3",id:"MomoAmount",value:X.Momo,onChange:function(e){var t=parseFloat(X.Cash)+parseFloat(e.currentTarget.value);Z(Object(r.a)(Object(r.a)({},X),{},{Momo:e.currentTarget.value,TotalAmount:t}))}}),s.a.createElement("label",{htmlFor:"amountReceived",className:"form-label"},"Cash Amount (GHS) *"),s.a.createElement("input",{autoComplete:"off",type:"text",name:"amountReceived",className:"form-control  col-sm-12 mb-3",id:"CashAmount",value:X.Cash,onChange:function(e){var t=parseFloat(X.Momo)+parseFloat(e.currentTarget.value);Z(Object(r.a)(Object(r.a)({},X),{},{Cash:e.currentTarget.value,TotalAmount:t}))}}),s.a.createElement("label",{className:"form-label mb-3 dispLabel float-right"},"Total Amount : ",oe.format(X.TotalAmount)),s.a.createElement("label",{htmlFor:"overage",className:"form-label mt-3"},"Overage (if any)"),s.a.createElement("input",{autoComplete:"off",type:"text",name:"overage",className:"form-control  col-sm-12 mb-3",id:"overage",value:X.Overage,onChange:function(e){Z(Object(r.a)(Object(r.a)({},X),{},{Overage:e.currentTarget.value,Shortage:0}))}}),s.a.createElement("label",{htmlFor:"shortage",className:"form-label"},"Shortage (if any)"),s.a.createElement("input",{autoComplete:"off",type:"text",name:"shortage",className:"form-control  col-sm-12 mb-3",id:"shortage",value:X.Shortage,onChange:function(e){Z(Object(r.a)(Object(r.a)({},X),{},{Shortage:e.currentTarget.value,Overage:0}))}}))),s.a.createElement(E.hb,null,s.a.createElement(E.f,{onClick:le,color:"success",className:"btn-sm"},"Submit"),s.a.createElement(E.f,{onClick:function(){Z({Officer:"",dateOfReceipt:(new Date).toISOString().slice(0,10),Momo:"",Cash:"",TotalAmount:"",Overage:"",Shortage:"",receivedBy:a.nameOfStaff}),R(""),M(!1)},color:"danger",className:"btn-sm"},"Close"))))}},977:function(e,t){}}]);
//# sourceMappingURL=12.ac8e7462.chunk.js.map
{"ast":null,"code":"import _objectSpread from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/roleAccess.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { apiUrl } from '../../config.json';\nimport auth from '../../components/services/authService';\nimport Joi, { stringify } from 'joi-browser';\nimport Swal from 'sweetalert2';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup, CInputCheckbox //CForm,\n} from '@coreui/react';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from 'reactstrap';\nimport Dashboard from '../planning/FamDetails';\n\nvar RoleAccess = function RoleAccess() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      mainMenuData = _useState2[0],\n      setMainMenuData = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      search = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      roles = _useState6[0],\n      setRoles = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      show = _useState8[0],\n      setShow = _useState8[1];\n\n  var _useState9 = useState([]),\n      _useState10 = _slicedToArray(_useState9, 2),\n      menus = _useState10[0],\n      setMenus = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      mainMenus = _useState12[0],\n      setMainMenus = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectedMenu = _useState14[0],\n      setSelectedMenu = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      subMenus = _useState16[0],\n      setSubMenus = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      menuArray = _useState18[0],\n      setMenuArray = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      rA = _useState20[0],\n      setRA = _useState20[1];\n\n  var _useState21 = useState(0),\n      _useState22 = _slicedToArray(_useState21, 2),\n      role = _useState22[0],\n      setRole = _useState22[1];\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      editMode = _useState24[0],\n      setEditMode = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      render = _useState26[0],\n      setRender = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      checked = _useState28[0],\n      setChecked = _useState28[1];\n\n  var _useState29 = useState({\n    role: '',\n    access: ''\n  }),\n      _useState30 = _slicedToArray(_useState29, 2),\n      roleAccess = _useState30[0],\n      setRoleAccess = _useState30[1];\n\n  useEffect(function () {\n    function getUserRoles() {\n      return _getUserRoles.apply(this, arguments);\n    }\n\n    function _getUserRoles() {\n      _getUserRoles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results, subs, mainMenu, roleAcc;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(apiUrl + '/setup/userroles');\n\n              case 2:\n                results = _context.sent;\n                setRoles(results.data);\n                _context.next = 6;\n                return axios.get(apiUrl + '/menus/submenu/all');\n\n              case 6:\n                subs = _context.sent;\n                setMenus(subs.data);\n                _context.next = 10;\n                return axios.get(apiUrl + '/menus/mainmenu');\n\n              case 10:\n                mainMenu = _context.sent;\n                setMainMenus(mainMenu.data);\n                _context.next = 14;\n                return axios.get(apiUrl + '/setup/userroles/rolemenus/' + role);\n\n              case 14:\n                roleAcc = _context.sent;\n                console.log(roleAcc.data);\n                setRA(roleAcc.data);\n\n              case 17:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getUserRoles.apply(this, arguments);\n    }\n\n    getUserRoles();\n  }, [render, role]);\n\n  var subGetSubMenus = function subGetSubMenus(s) {\n    setSelectedMenu(s.currentTarget.value);\n    setSubMenus(menus.filter(function (m) {\n      return m.menu == s.currentTarget.value;\n    }));\n  };\n\n  var arr = [];\n\n  var checkedMenus = function checkedMenus(s, i) {\n    if (i === true) {\n      s.role = roleAccess.role;\n      arr.push(s);\n    } else {\n      arr = arr.filter(function (selected) {\n        return selected.id !== s.id;\n      });\n    } //console.log(arr);\n    // setMenuArray(arr);\n\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.prev = 0;\n              _context2.next = 3;\n              return axios.post(apiUrl + '/setup/userroles/roleaccess', arr);\n\n            case 3:\n              results = _context2.sent;\n\n              if (!(results.status !== 200)) {\n                _context2.next = 8;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", Swal.fire('Failed', 'Submission Failed ! Check Entries and try again !', 'error'));\n\n            case 8:\n              Swal.fire('Success', 'Role Access Saved Successfully', 'success');\n              arr = [];\n              setSubMenus([]);\n              setRender(!render);\n\n            case 12:\n              _context2.next = 17;\n              break;\n\n            case 14:\n              _context2.prev = 14;\n              _context2.t0 = _context2[\"catch\"](0);\n              Swal.fire('Error', 'OOPS ! ' + _context2.t0.message, 'error');\n\n            case 17:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[0, 14]]);\n    }));\n\n    return function handleSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleDeleteRoleAccess = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(id) {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              console.log(id);\n              Swal.fire({\n                title: 'Do you want to remove this role access ?',\n                showDenyButton: true,\n                showCancelButton: true,\n                confirmButtonText: 'Remove',\n                denyButtonText: \"Don't Remove\"\n              }).then( /*#__PURE__*/function () {\n                var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(result) {\n                  var results;\n                  return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                    while (1) {\n                      switch (_context3.prev = _context3.next) {\n                        case 0:\n                          if (!result.isConfirmed) {\n                            _context3.next = 21;\n                            break;\n                          }\n\n                          _context3.prev = 1;\n                          _context3.next = 4;\n                          return axios.delete(apiUrl + '/setup/userroles/roleaccess/' + id);\n\n                        case 4:\n                          results = _context3.sent;\n\n                          if (!(results.status == '200')) {\n                            _context3.next = 12;\n                            break;\n                          }\n\n                          Swal.fire('Success', 'Role Access Removed Successfully', 'success');\n                          arr = [];\n                          setSubMenus([]);\n                          setRender(!render);\n                          _context3.next = 13;\n                          break;\n\n                        case 12:\n                          return _context3.abrupt(\"return\", Swal.fire('Failed', 'Deletion Failed ! Check Entries and try again !', 'error'));\n\n                        case 13:\n                          setRender(!render);\n                          _context3.next = 19;\n                          break;\n\n                        case 16:\n                          _context3.prev = 16;\n                          _context3.t0 = _context3[\"catch\"](1);\n                          Swal.fire('Error', _context3.t0 + ' Role Access Removal Failed', 'error');\n\n                        case 19:\n                          _context3.next = 22;\n                          break;\n\n                        case 21:\n                          if (result.isDenied) {\n                            Swal.fire('Role Access Removal Failed', '', 'error');\n                          }\n\n                        case 22:\n                        case \"end\":\n                          return _context3.stop();\n                      }\n                    }\n                  }, _callee3, null, [[1, 16]]);\n                }));\n\n                return function (_x2) {\n                  return _ref3.apply(this, arguments);\n                };\n              }());\n\n            case 2:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function handleDeleteRoleAccess(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(e) {\n    setSearch(e.currentTarget.value);\n  };\n\n  var data = {\n    sRoleAccess: rA === null || rA === void 0 ? void 0 : rA.filter(function (m) {\n      var _m$menu, _m$subMenu, _m$role;\n\n      return ((_m$menu = m.menu) === null || _m$menu === void 0 ? void 0 : _m$menu.toLowerCase().includes(search.toLowerCase())) || ((_m$subMenu = m.subMenu) === null || _m$subMenu === void 0 ? void 0 : _m$subMenu.toLowerCase().includes(search.toLowerCase())) || ((_m$role = m.role) === null || _m$role === void 0 ? void 0 : _m$role.toLowerCase().includes(search.toLowerCase()));\n    })\n  };\n  var dataTouse = search.length === 0 ? rA : data.sRoleAccess;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"staffp\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, \"User role refers to the set of permissions and access levels assigned to a particular type of user within an application or system. These roles define what actions a user can perform, what features they can access, and how they interact with the software. User roles help ensure security, manage permissions, and organize the user experience based on responsibilities or needs.\"), /*#__PURE__*/React.createElement(CInputGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CSelect, {\n    className: \"form-select col-sm-10\",\n    \"aria-label\": \"Default select example\",\n    value: roleAccess.role,\n    onChange: function onChange(e) {\n      setRoleAccess(_objectSpread(_objectSpread({}, roleAccess), {}, {\n        role: e.currentTarget.value\n      }));\n      setRole(e.currentTarget.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }, \"Select Role *\"), roles.map(function (s) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: s.id,\n      value: s.id,\n      id: s.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 8\n      }\n    }, s.role);\n  }))), /*#__PURE__*/React.createElement(CInputGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CSelect, {\n    className: \"form-select mt-3 col-sm-10\",\n    \"aria-label\": \"Default select example\",\n    value: selectedMenu,\n    onChange: function onChange(s) {\n      return subGetSubMenus(s);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }, \"Select Menu *\"), mainMenus.map(function (s) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: s.id,\n      value: s.id,\n      id: s.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 8\n      }\n    }, s.menu);\n  }))), /*#__PURE__*/React.createElement(Table, {\n    className: \"sm mt-3 col-md-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 8\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 8\n    }\n  }, \"Sub Menu\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 6\n    }\n  }, subMenus.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      Style: \"cursor: pointer;\" //onClick={() => handleOnEdit(c)}\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 9\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }\n    }, c.subMenu), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(CInputCheckbox, {\n      value: checked,\n      onChange: function onChange(e) {\n        return checkedMenus(c, e.currentTarget.checked);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 10\n      }\n    })));\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 5\n    }\n  }, !editMode ? /*#__PURE__*/React.createElement(CButton, {\n    className: \"btn btn-success mt-3 btn-sm float-rigth\",\n    onClick: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }\n  }, \"Submit\") : null, editMode ? /*#__PURE__*/React.createElement(CButton, {\n    className: \"btn-sm m-3 col-sm-2\",\n    color: \"success\",\n    onClick: null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }\n  }, \"Update\") : null, editMode && /*#__PURE__*/React.createElement(CButton, {\n    className: \"btn btn-danger col-sm-2 m-3 btn-sm\",\n    onClick: null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }\n  }, \"Delete\")), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CInputGroup, {\n    className: \"mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    type: \"text\",\n    className: \"form-control col-sm-4\",\n    id: \"menu\",\n    value: search,\n    onChange: handleSearch,\n    placeholder: \"Search\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Table, {\n    className: \"lg mt-3 table-lg\",\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 9\n    }\n  }, \"Role\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 9\n    }\n  }, \"Menu\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, \"Sub Menu\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 9\n    }\n  }, \"Tag\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 9\n    }\n  }, \"Icon\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }\n  }, dataTouse.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.roleId,\n      Style: \"cursor: pointer;\" //onClick={() => handleOnEdit(c)}\n      ,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 10\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 10\n      }\n    }, c.role), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 10\n      }\n    }, c.menu), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 10\n      }\n    }, c.subMenu), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 10\n      }\n    }, c._tag), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 10\n      }\n    }, c.icon), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 10\n      }\n    }, /*#__PURE__*/React.createElement(CButton, {\n      className: \"btn-sm\",\n      color: \"danger\",\n      onClick: function onClick() {\n        return handleDeleteRoleAccess(c.roleId);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 11\n      }\n    }, \"- Remove\")));\n  }))))));\n};\n\nexport default RoleAccess;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/roleAccess.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","axios","moment","apiUrl","auth","Joi","stringify","Swal","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","CInputCheckbox","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","Dashboard","RoleAccess","mainMenuData","setMainMenuData","search","setSearch","roles","setRoles","show","setShow","menus","setMenus","mainMenus","setMainMenus","selectedMenu","setSelectedMenu","subMenus","setSubMenus","menuArray","setMenuArray","rA","setRA","role","setRole","editMode","setEditMode","render","setRender","checked","setChecked","access","roleAccess","setRoleAccess","getUserRoles","get","results","data","subs","mainMenu","roleAcc","console","log","subGetSubMenus","s","currentTarget","value","filter","m","menu","arr","checkedMenus","i","push","selected","id","handleSubmit","post","status","fire","message","handleDeleteRoleAccess","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","delete","isDenied","handleSearch","e","sRoleAccess","toLowerCase","includes","subMenu","dataTouse","length","map","c","index","roleId","_tag","icon"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { apiUrl } from '../../config.json';\nimport auth from '../../components/services/authService';\nimport Joi, { stringify } from 'joi-browser';\nimport Swal from 'sweetalert2';\n\nimport {\n\tCBadge,\n\tCCard,\n\tCCardBody,\n\t//CCardHeader,\n\tCCol,\n\tCDataTable,\n\tCRow,\n\tCButton,\n\tCModal,\n\tCModalFooter,\n\tCModalHeader,\n\tCModalBody,\n\tCCardHeader,\n\tCInputGroupAppend,\n\tCInputGroupPrepend,\n\tCDropdownItem,\n\tCForm,\n\t//CCardFooter,\n\tCDropdownToggle,\n\t//CInputRadio,\n\tCDropdown,\n\tCModalTitle,\n\t//CFormText,\n\t//CTextarea,\n\tCFormGroup,\n\tCLabel,\n\t// CSwitch,\n\tCInput,\n\t//CInputFile,\n\tCSelect,\n\tCDropdownMenu,\n\t//CCardFooter,\n\tCInputGroup,\n\tCInputCheckbox,\n\t//CForm,\n} from '@coreui/react';\n\nimport {\n\tRow,\n\tCol,\n\tTable,\n\tProgress,\n\tButton,\n\tUncontrolledButtonDropdown,\n\tDropdownMenu,\n\tDropdownToggle,\n\tDropdownItem,\n\tInput,\n\tLabel,\n\tBadge,\n} from 'reactstrap';\nimport Dashboard from '../planning/FamDetails';\n\nconst RoleAccess = () => {\n\tconst [mainMenuData, setMainMenuData] = useState([]);\n\tconst [search, setSearch] = useState('');\n\tconst [roles, setRoles] = useState([]);\n\tconst [show, setShow] = useState(false);\n\tconst [menus, setMenus] = useState([]);\n\tconst [mainMenus, setMainMenus] = useState([]);\n\tconst [selectedMenu, setSelectedMenu] = useState('');\n\tconst [subMenus, setSubMenus] = useState([]);\n\tconst [menuArray, setMenuArray] = useState([]);\n\tconst [rA, setRA] = useState([]);\n\tconst [role, setRole] = useState(0);\n\n\tconst [editMode, setEditMode] = useState(false);\n\tconst [render, setRender] = useState(false);\n\tconst [checked, setChecked] = useState(false);\n\tconst [roleAccess, setRoleAccess] = useState({\n\t\trole: '',\n\t\taccess: '',\n\t});\n\n\tuseEffect(() => {\n\t\tasync function getUserRoles() {\n\t\t\tconst results = await axios.get(apiUrl + '/setup/userroles');\n\t\t\tsetRoles(results.data);\n\t\t\tconst subs = await axios.get(apiUrl + '/menus/submenu/all');\n\t\t\tsetMenus(subs.data);\n\t\t\tconst mainMenu = await axios.get(apiUrl + '/menus/mainmenu');\n\t\t\tsetMainMenus(mainMenu.data);\n\t\t\tconst roleAcc = await axios.get(\n\t\t\t\tapiUrl + '/setup/userroles/rolemenus/' + role\n\t\t\t);\n\t\t\tconsole.log(roleAcc.data);\n\t\t\tsetRA(roleAcc.data);\n\t\t}\n\t\tgetUserRoles();\n\t}, [render, role]);\n\n\tconst subGetSubMenus = (s) => {\n\t\tsetSelectedMenu(s.currentTarget.value);\n\t\tsetSubMenus(menus.filter((m) => m.menu == s.currentTarget.value));\n\t};\n\n\tlet arr = [];\n\tconst checkedMenus = (s, i) => {\n\t\tif (i === true) {\n\t\t\ts.role = roleAccess.role;\n\t\t\tarr.push(s);\n\t\t} else {\n\t\t\tarr = arr.filter((selected) => selected.id !== s.id);\n\t\t}\n\t\t//console.log(arr);\n\t\t// setMenuArray(arr);\n\t};\n\n\tconst handleSubmit = async () => {\n\t\ttry {\n\t\t\tconst results = await axios.post(\n\t\t\t\tapiUrl + '/setup/userroles/roleaccess',\n\t\t\t\tarr\n\t\t\t);\n\t\t\tif (results.status !== 200) {\n\t\t\t\treturn Swal.fire(\n\t\t\t\t\t'Failed',\n\t\t\t\t\t'Submission Failed ! Check Entries and try again !',\n\t\t\t\t\t'error'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tSwal.fire('Success', 'Role Access Saved Successfully', 'success');\n\t\t\t\tarr = [];\n\t\t\t\tsetSubMenus([]);\n\t\t\t\tsetRender(!render);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tSwal.fire('Error', 'OOPS ! ' + err.message, 'error');\n\t\t}\n\t};\n\n\tconst handleDeleteRoleAccess = async (id) => {\n\t\tconsole.log(id);\n\t\tSwal.fire({\n\t\t\ttitle: 'Do you want to remove this role access ?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: 'Remove',\n\t\t\tdenyButtonText: `Don't Remove`,\n\t\t}).then(async (result) => {\n\t\t\t/* Read more about isConfirmed, isDenied below */\n\t\t\tif (result.isConfirmed) {\n\t\t\t\ttry {\n\t\t\t\t\tconst results = await axios.delete(\n\t\t\t\t\t\tapiUrl + '/setup/userroles/roleaccess/' + id\n\t\t\t\t\t);\n\t\t\t\t\tif (results.status == '200') {\n\t\t\t\t\t\tSwal.fire('Success', 'Role Access Removed Successfully', 'success');\n\t\t\t\t\t\tarr = [];\n\t\t\t\t\t\tsetSubMenus([]);\n\t\t\t\t\t\tsetRender(!render);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Swal.fire(\n\t\t\t\t\t\t\t'Failed',\n\t\t\t\t\t\t\t'Deletion Failed ! Check Entries and try again !',\n\t\t\t\t\t\t\t'error'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tsetRender(!render);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tSwal.fire('Error', ex + ' Role Access Removal Failed', 'error');\n\t\t\t\t}\n\t\t\t} else if (result.isDenied) {\n\t\t\t\tSwal.fire('Role Access Removal Failed', '', 'error');\n\t\t\t}\n\t\t});\n\t};\n\tconst handleSearch = (e) => {\n\t\tsetSearch(e.currentTarget.value);\n\t};\n\tconst data = {\n\t\tsRoleAccess: rA?.filter(\n\t\t\t(m) =>\n\t\t\t\tm.menu?.toLowerCase().includes(search.toLowerCase()) ||\n\t\t\t\tm.subMenu?.toLowerCase().includes(search.toLowerCase()) ||\n\t\t\t\tm.role?.toLowerCase().includes(search.toLowerCase())\n\t\t),\n\t};\n\n\tconst dataTouse = search.length === 0 ? rA : data.sRoleAccess;\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container-fluid\">\n\t\t\t\t<p className=\"staffp\">\n\t\t\t\t\tUser role refers to the set of permissions and access levels assigned\n\t\t\t\t\tto a particular type of user within an application or system. These\n\t\t\t\t\troles define what actions a user can perform, what features they can\n\t\t\t\t\taccess, and how they interact with the software. User roles help\n\t\t\t\t\tensure security, manage permissions, and organize the user experience\n\t\t\t\t\tbased on responsibilities or needs.\n\t\t\t\t</p>\n\t\t\t\t<CInputGroup>\n\t\t\t\t\t<CSelect\n\t\t\t\t\t\tclassName=\"form-select col-sm-10\"\n\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\tvalue={roleAccess.role}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetRoleAccess({\n\t\t\t\t\t\t\t\t...roleAccess,\n\t\t\t\t\t\t\t\trole: e.currentTarget.value,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetRole(e.currentTarget.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\">Select Role *</option>\n\t\t\t\t\t\t{roles.map((s) => (\n\t\t\t\t\t\t\t<option key={s.id} value={s.id} id={s.id}>\n\t\t\t\t\t\t\t\t{s.role}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</CSelect>\n\t\t\t\t</CInputGroup>\n\n\t\t\t\t<CInputGroup>\n\t\t\t\t\t<CSelect\n\t\t\t\t\t\tclassName=\"form-select mt-3 col-sm-10\"\n\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\tvalue={selectedMenu}\n\t\t\t\t\t\tonChange={(s) => subGetSubMenus(s)}\n\t\t\t\t\t>\n\t\t\t\t\t\t<option value=\"\">Select Menu *</option>\n\t\t\t\t\t\t{mainMenus.map((s) => (\n\t\t\t\t\t\t\t<option key={s.id} value={s.id} id={s.id}>\n\t\t\t\t\t\t\t\t{s.menu}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</CSelect>\n\t\t\t\t</CInputGroup>\n\n\t\t\t\t<Table className=\"sm mt-3 col-md-3\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t<th></th>\n\n\t\t\t\t\t\t\t<th>Sub Menu</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{subMenus.map((c, index) => (\n\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\tkey={c.id}\n\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t//onClick={() => handleOnEdit(c)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\n\t\t\t\t\t\t\t\t<td>{c.subMenu}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<CInputCheckbox\n\t\t\t\t\t\t\t\t\t\tvalue={checked}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => checkedMenus(c, e.currentTarget.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t\t<div className=\"row justify-content-right\">\n\t\t\t\t\t{!editMode ? (\n\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\tclassName=\"btn btn-success mt-3 btn-sm float-rigth\"\n\t\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t) : null}\n\t\t\t\t\t{editMode ? (\n\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\tclassName=\"btn-sm m-3 col-sm-2\"\n\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\tonClick={null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tUpdate\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t{editMode && (\n\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\tclassName=\"btn btn-danger col-sm-2 m-3 btn-sm\"\n\t\t\t\t\t\t\tonClick={null}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\n\t\t\t\t<hr />\n\t\t\t\t<div className=\"table-responsive\">\n\t\t\t\t\t<CInputGroup className=\"mt-3\">\n\t\t\t\t\t\t<CInput\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control col-sm-4\"\n\t\t\t\t\t\t\tid=\"menu\"\n\t\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t<Table className=\"lg mt-3 table-lg\" size=\"lg\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t\t\t\t<th>Menu</th>\n\t\t\t\t\t\t\t\t<th>Sub Menu</th>\n\t\t\t\t\t\t\t\t<th>Tag</th>\n\t\t\t\t\t\t\t\t<th>Icon</th>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{dataTouse.map((c, index) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={c.roleId}\n\t\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t\t//onClick={() => handleOnEdit(c)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.role}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.menu}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.subMenu}</td>\n\t\t\t\t\t\t\t\t\t<td>{c._tag}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.icon}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-sm\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteRoleAccess(c.roleId)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t- Remove\n\t\t\t\t\t\t\t\t\t\t</CButton>\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport default RoleAccess;\n"]},"metadata":{},"sourceType":"module"}
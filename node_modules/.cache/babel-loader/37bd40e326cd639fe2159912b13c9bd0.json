{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import CIcon from\"@coreui/icons-react\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Joi from\"joi-browser\";import Swal from\"sweetalert2\";import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n//CSelect,\n,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from\"@coreui/react\";//import { DocsLink } from 'src/reusable'\n//import usersData from './psm/users/usersData';\nimport usersData from\"../users/UsersData\";import DepartmentSetup from\"./Directorate\";var UnitSetup=function UnitSetup(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),unit=_useState2[0],setUnit=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),units=_useState4[0],setUnits=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),department=_useState6[0],setDepartment=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),selectedDepartment=_useState8[0],setSelectedDepartment=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),disableButton=_useState10[0],setDisableButton=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),search=_useState12[0],setSearch=_useState12[1];var _useState13=useState({unit:\"\",department:\"\"}),_useState14=_slicedToArray(_useState13,2),iUnit=_useState14[0],setIUnit=_useState14[1];var joiUnitSchema=Joi.object().keys({unit:Joi.string().required().label(\"Unit\"),department:Joi.string().required().label(\"Department\")});var validateEntry=function validateEntry(){var result=Joi.validate({unit:unit,department:department},joiUnitSchema);if(result.error){return result.error.details[0].message;}else{return null;}};useEffect(function(){function getUnits(){return _getUnits.apply(this,arguments);}function _getUnits(){_getUnits=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://ugmcservice.herokuapp.com/api/units\");case 2:results=_context.sent;setUnits(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getUnits.apply(this,arguments);}getUnits();},[units]);useEffect(function(){function getDepartmentsInHooks(){return _getDepartmentsInHooks.apply(this,arguments);}function _getDepartmentsInHooks(){_getDepartmentsInHooks=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"https://ugmcservice.herokuapp.com/api/departments\");case 2:results=_context2.sent;setDepartment(results.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getDepartmentsInHooks.apply(this,arguments);}getDepartmentsInHooks();},[]);var handleDepartmentChange=function handleDepartmentChange(e){//setSelectedDepartment(e.target.value);\nsetIUnit(_objectSpread(_objectSpread({},iUnit),{},{department:e.currentTarget.value}));console.log(e.currentTarget.value);};var handleUnitChange=function handleUnitChange(e){setIUnit(_objectSpread(_objectSpread({},iUnit),{},{unit:e.currentTarget.value}));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(iUnit);setDisableButton(true);_context3.next=4;return axios.post(\"https://ugmcservice.herokuapp.com/api/units\",iUnit);case 4:results=_context3.sent;if(results.status===200){Swal.fire({title:\"Success\",text:\"Unit Successfully Added\",icon:\"success\"});setDisableButton(false);}else{Swal.fire({title:\"Success\",text:\"Unit Setup Failed\",icon:\"error\"});setDisableButton(false);}setDisableButton(false);setUnit(\"\");setSelectedDepartment(\"\");setIUnit({unit:\"\",department:\"\"});case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var getBadge=function getBadge(status){switch(status){case\"Active\":return\"success\";case\"Inactive\":return\"secondary\";case\"Pending\":return\"warning\";case\"Banned\":return\"danger\";default:return\"primary\";}};var fields=[\"name\",\"Phone Number\",\"GH-ID\",\"registered\",\"role\",\"status\"];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),visible=_useState16[0],setVisible=_useState16[1];var handleSearch=function handleSearch(e){setSearch(e.currentTarget.value);};var handleEditClicked=function handleEditClicked(s){console.log(s);};var data={units:units.filter(function(item){return item.unit.toLowerCase().includes(search.toLowerCase());})};var dataTouse=search.length===0?units:data.units;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CModalHeader,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"appendedInputButtons\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"controls\"},/*#__PURE__*/React.createElement(CInputGroup,null,/*#__PURE__*/React.createElement(CInput,{id:\"appendedInputButtons\",size:\"16\",type:\"text\",onChange:handleSearch}),/*#__PURE__*/React.createElement(CInputGroupAppend,null,/*#__PURE__*/React.createElement(CCol,null),/*#__PURE__*/React.createElement(CButton,{color:\"primary\",onClick:function onClick(){return setVisible(!visible);}},\"+ New Units\"),\" \"))))))),/*#__PURE__*/React.createElement(CModal,{show:visible,onClose:function onClose(){return setVisible(!visible);},color:\"primary\",size:\"lg\"},/*#__PURE__*/React.createElement(CModalHeader,{closeButton:true},/*#__PURE__*/React.createElement(CModalTitle,null,\"Set Up | Unit Setting\")),/*#__PURE__*/React.createElement(CModalBody,null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,{xs:\"12\",md:\"12\"},/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(CCardHeader,null,\"UNIT MANAGEMENT\"),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(CFormGroup,{row:true},/*#__PURE__*/React.createElement(CCol,{md:\"12\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"departmentId\",className:\"form-label\"},\"Department\"),/*#__PURE__*/React.createElement(\"select\",{id:\"departmentId\",className:\"form-control classic\",value:iUnit.department,onChange:handleDepartmentChange},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Department *\"),department.map(function(m){return/*#__PURE__*/React.createElement(\"option\",{key:m._id,value:m._id,id:m._id},m.department);})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Unit\",className:\"form-label\"},\"Unit\"),\" \",/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",value:iUnit.unit,placeholder:\"Unit\",onChange:handleUnitChange}))))))))),/*#__PURE__*/React.createElement(CModalFooter,null,/*#__PURE__*/React.createElement(CButton,{color:\"success\",size:\"sm\",onClick:handleSubmit},\"Save\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"warning\",size:\"sm\",onClick:function onClick(){return setVisible(!visible);}},\"Reset\"),/*#__PURE__*/React.createElement(CButton,{color:\"danger\",size:\"sm\",onClick:function onClick(){return setVisible(!visible);}},\"Cancel\"))),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-hover table-outline mb-0 d-none d-sm-table\"},/*#__PURE__*/React.createElement(\"caption\",null,\"Grades\"),/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Unit\"),/*#__PURE__*/React.createElement(\"th\",null,\"Department\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"\"},dataTouse.map(function(s,index){return/*#__PURE__*/React.createElement(\"tr\",{key:s._id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,s.unit),/*#__PURE__*/React.createElement(\"td\",null,s.department.department),/*#__PURE__*/React.createElement(\"td\",{className:\"float-right\"},/*#__PURE__*/React.createElement(CButton,{color:\"info\",size:\"sm\",onClick:function onClick(s){return handleEditClicked(s);}},\"Edit\")));}))),/*#__PURE__*/React.createElement(\"p\",{className:\"hou-p\"},\"Showing \",dataTouse.length,\" Units...\"))))));};export default UnitSetup;//0243039436 - Bentum;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/setup/Uni.js"],"names":["CIcon","React","useState","useEffect","axios","Joi","Swal","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CDropdownMenu","CInputGroup","usersData","DepartmentSetup","UnitSetup","unit","setUnit","units","setUnits","department","setDepartment","selectedDepartment","setSelectedDepartment","disableButton","setDisableButton","search","setSearch","iUnit","setIUnit","joiUnitSchema","object","keys","string","required","label","validateEntry","result","validate","error","details","message","getUnits","get","results","data","getDepartmentsInHooks","handleDepartmentChange","e","currentTarget","value","console","log","handleUnitChange","handleSubmit","post","status","fire","title","text","icon","getBadge","fields","visible","setVisible","handleSearch","handleEditClicked","s","filter","item","toLowerCase","includes","dataTouse","length","map","m","_id","index"],"mappings":"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","sourcesContent":["import CIcon from \"@coreui/icons-react\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Joi from \"joi-browser\";\nimport Swal from \"sweetalert2\";\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  //CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from \"@coreui/react\";\n//import { DocsLink } from 'src/reusable'\n\n//import usersData from './psm/users/usersData';\n\nimport usersData from \"../users/UsersData\";\nimport DepartmentSetup from \"./Directorate\";\n\nconst UnitSetup = () => {\n  const [unit, setUnit] = useState(\"\");\n  const [units, setUnits] = useState([]);\n  const [department, setDepartment] = useState([]);\n  const [selectedDepartment, setSelectedDepartment] = useState(\"\");\n  const [disableButton, setDisableButton] = useState(false);\n  const [search, setSearch] = useState(\"\");\n  const [iUnit, setIUnit] = useState({\n    unit: \"\",\n    department: \"\",\n  });\n  const joiUnitSchema = Joi.object().keys({\n    unit: Joi.string().required().label(\"Unit\"),\n    department: Joi.string().required().label(\"Department\"),\n  });\n\n  const validateEntry = () => {\n    const result = Joi.validate({ unit, department }, joiUnitSchema);\n    if (result.error) {\n      return result.error.details[0].message;\n    } else {\n      return null;\n    }\n  };\n\n  useEffect(() => {\n    async function getUnits() {\n      const results = await axios.get(\n        \"https://ugmcservice.herokuapp.com/api/units\"\n      );\n      setUnits(results.data);\n    }\n    getUnits();\n  }, [units]);\n\n  useEffect(() => {\n    async function getDepartmentsInHooks() {\n      const results = await axios.get(\n        \"https://ugmcservice.herokuapp.com/api/departments\"\n      );\n      setDepartment(results.data);\n    }\n    getDepartmentsInHooks();\n  }, []);\n\n  const handleDepartmentChange = (e) => {\n    //setSelectedDepartment(e.target.value);\n    setIUnit({ ...iUnit, department: e.currentTarget.value });\n    console.log(e.currentTarget.value);\n  };\n\n  const handleUnitChange = (e) => {\n    setIUnit({ ...iUnit, unit: e.currentTarget.value });\n  };\n\n  const handleSubmit = async () => {\n    console.log(iUnit);\n    setDisableButton(true);\n    const results = await axios.post(\n      \"https://ugmcservice.herokuapp.com/api/units\",\n      iUnit\n    );\n\n    if (results.status === 200) {\n      Swal.fire({\n        title: \"Success\",\n        text: \"Unit Successfully Added\",\n        icon: \"success\",\n      });\n      setDisableButton(false);\n    } else {\n      Swal.fire({\n        title: \"Success\",\n        text: \"Unit Setup Failed\",\n        icon: \"error\",\n      });\n      setDisableButton(false);\n    }\n    setDisableButton(false);\n    setUnit(\"\");\n    setSelectedDepartment(\"\");\n    setIUnit({ unit: \"\", department: \"\" });\n  };\n\n  const getBadge = (status) => {\n    switch (status) {\n      case \"Active\":\n        return \"success\";\n      case \"Inactive\":\n        return \"secondary\";\n      case \"Pending\":\n        return \"warning\";\n      case \"Banned\":\n        return \"danger\";\n      default:\n        return \"primary\";\n    }\n  };\n  const fields = [\n    \"name\",\n    \"Phone Number\",\n    \"GH-ID\",\n    \"registered\",\n    \"role\",\n    \"status\",\n  ];\n  const [visible, setVisible] = useState(false);\n\n  const handleSearch = (e) => {\n    setSearch(e.currentTarget.value);\n  };\n  const handleEditClicked = (s) => {\n    console.log(s);\n  };\n\n  const data = {\n    units: units.filter((item) =>\n      item.unit.toLowerCase().includes(search.toLowerCase())\n    ),\n  };\n\n  const dataTouse = search.length === 0 ? units : data.units;\n\n  return (\n    <>\n      <CRow>\n        <CCol>\n          <CCard>\n            <div>\n              <CModalHeader>\n                <CCol>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"appendedInputButtons\"></CLabel>\n                    <div className=\"controls\">\n                      <CInputGroup>\n                        <CInput\n                          id=\"appendedInputButtons\"\n                          size=\"16\"\n                          type=\"text\"\n                          onChange={handleSearch}\n                        />\n                        <CInputGroupAppend>\n                          <CCol></CCol>\n                          <CButton\n                            color=\"primary\"\n                            onClick={() => setVisible(!visible)}\n                          >\n                            + New Units\n                          </CButton>{\" \"}\n                        </CInputGroupAppend>\n                      </CInputGroup>\n                    </div>\n                  </CFormGroup>\n                </CCol>\n              </CModalHeader>\n            </div>\n\n            {/*<CButton color=\"success\" onClick={() => setSuccess(!success)} className=\"mr-1\">Success modal</CButton>\n            <CButton color=\"warning\" onClick={() => setWarning(!warning)} className=\"mr-1\">Warning modal</CButton>\n            <CButton color=\"danger\" onClick={() => setDanger(!danger)} className=\"mr-1\">Danger modal</CButton>\n  <CButton color=\"info\" onClick={() => setInfo(!info)} className=\"mr-1\">Info modal</CButton>*/}\n\n            <CModal\n              show={visible}\n              onClose={() => setVisible(!visible)}\n              color=\"primary\"\n              size=\"lg\"\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>Set Up | Unit Setting</CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n                <form>\n                  <CRow>\n                    <CCol xs=\"12\" md=\"12\">\n                      <CCard>\n                        <CCardHeader>UNIT MANAGEMENT</CCardHeader>\n                        <CCardBody>\n                          <CFormGroup row>\n                            <CCol md=\"12\">\n                              <label\n                                htmlFor=\"departmentId\"\n                                className=\"form-label\"\n                              >\n                                Department\n                              </label>\n                              <select\n                                id=\"departmentId\"\n                                className=\"form-control classic\"\n                                value={iUnit.department}\n                                onChange={handleDepartmentChange}\n                              >\n                                <option value=\"\">Department *</option>\n                                {department.map((m) => (\n                                  <option key={m._id} value={m._id} id={m._id}>\n                                    {m.department}\n                                  </option>\n                                ))}\n                              </select>\n                              <label htmlFor=\"Unit\" className=\"form-label\">\n                                Unit\n                              </label>{\" \"}\n                              <input\n                                className=\"form-control\"\n                                type=\"text\"\n                                value={iUnit.unit}\n                                placeholder=\"Unit\"\n                                onChange={handleUnitChange}\n                              />\n                            </CCol>\n                          </CFormGroup>\n                        </CCardBody>\n                      </CCard>\n                    </CCol>\n                  </CRow>\n                </form>\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"success\" size=\"sm\" onClick={handleSubmit}>\n                  Save\n                </CButton>{\" \"}\n                <CButton\n                  color=\"warning\"\n                  size=\"sm\"\n                  onClick={() => setVisible(!visible)}\n                >\n                  Reset\n                </CButton>\n                <CButton\n                  color=\"danger\"\n                  size=\"sm\"\n                  onClick={() => setVisible(!visible)}\n                >\n                  Cancel\n                </CButton>\n              </CModalFooter>\n            </CModal>\n\n            <CCardBody>\n              <table className=\"table table-hover table-outline mb-0 d-none d-sm-table\">\n                <caption>Grades</caption>\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th>Number</th>\n                    <th>Unit</th>\n                    <th>Department</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody className=\"\">\n                  {dataTouse.map((s, index) => (\n                    <tr key={s._id}>\n                      <td>{index + 1}</td>\n                      <td>{s.unit}</td>\n                      <td>{s.department.department}</td>\n                      <td className=\"float-right\">\n                        <CButton\n                          color=\"info\"\n                          size=\"sm\"\n                          onClick={(s) => handleEditClicked(s)}\n                        >\n                          Edit\n                        </CButton>\n\n                        {/*<CButton color=\"primary\" size=\"sm\" onClick={(s)=>handleEditClicked(s)}>\n                  Edit\n                </CButton>\n                <CButton color=\"danger\" size=\"sm\" onClick={(s)=>handleEditClicked(s)}>\n                  Edit\n              </CButton>*/}\n                      </td>\n                      {/*<td>\n                    <button\n                      className=\"but btn-houReject\"\n                      onClick={() => handleShow(s)}\n                    >\n                      Reject\n                    </button>\n                  </td>*/}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              <p className=\"hou-p\">Showing {dataTouse.length} Units...</p>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default UnitSetup;\n\n//0243039436 - Bentum;\n"]},"metadata":{},"sourceType":"module"}
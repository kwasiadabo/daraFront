{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useNavigate,Navigate}from'react-router-dom';import axios from'axios';import moment from'moment';import{apiUrl}from'../../config.json';import auth from'../../components/services/authService';import Joi,{stringify}from'joi-browser';import Swal from'sweetalert2';import CIcon from'@coreui/icons-react';import{FcAdvance}from'react-icons/fc';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup,CInputCheckbox,CInputGroupText//CForm,\n}from'@coreui/react';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';import Dashboard from'../planning/FamDetails';var UserAccess=function UserAccess(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),mainMenuData=_useState2[0],setMainMenuData=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),menuSearch=_useState6[0],setMenuSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),roles=_useState8[0],setRoles=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),show=_useState10[0],setShow=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),menus=_useState12[0],setMenus=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),mainMenus=_useState14[0],setMainMenus=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),selectedMenu=_useState16[0],setSelectedMenu=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),subMenus=_useState18[0],setSubMenus=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),menuArray=_useState20[0],setMenuArray=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),allAccounts=_useState22[0],setAllAccounts=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),rA=_useState24[0],setRA=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),userMenus=_useState26[0],setUserMenus=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),user=_useState28[0],setUser=_useState28[1];var _useState29=useState({username:'',nameOfStaff:'',userRole:'',branch:'',staffId:0}),_useState30=_slicedToArray(_useState29,2),userAccount=_useState30[0],setUserAccount=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),editMode=_useState32[0],setEditMode=_useState32[1];var _useState33=useState(false),_useState34=_slicedToArray(_useState33,2),render=_useState34[0],setRender=_useState34[1];var _useState35=useState(false),_useState36=_slicedToArray(_useState35,2),checked=_useState36[0],setChecked=_useState36[1];var _useState37=useState({user:'',role:'',access:''}),_useState38=_slicedToArray(_useState37,2),userAccess=_useState38[0],setUserAccess=_useState38[1];useEffect(function(){function getUserRoles(){return _getUserRoles.apply(this,arguments);}function _getUserRoles(){_getUserRoles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var subs,mainMenu,roleAcc;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(apiUrl+'/menus/submenu/all');case 2:subs=_context.sent;setMenus(subs.data);_context.next=6;return axios.get(apiUrl+'/menus/mainmenu');case 6:mainMenu=_context.sent;setMainMenus(mainMenu.data);_context.next=10;return axios.get(apiUrl+'/setup/useraccess/myroles/'+userAccount.staffId);case 10:roleAcc=_context.sent;setRA(roleAcc.data);case 12:case\"end\":return _context.stop();}}},_callee);}));return _getUserRoles.apply(this,arguments);}getUserRoles();},[userAccount]);useEffect(function(){function getUserAccounts(_x){return _getUserAccounts.apply(this,arguments);}function _getUserAccounts(){_getUserAccounts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(params){var allUserAccounts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(apiUrl+'/users/useraccounts');case 2:allUserAccounts=_context2.sent;setAllAccounts(allUserAccounts.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getUserAccounts.apply(this,arguments);}getUserAccounts();},[render]);useEffect(function(){function getUserMenus(){return _getUserMenus.apply(this,arguments);}function _getUserMenus(){_getUserMenus=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var subs;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(apiUrl+'/setup/useraccess/myroles/'+userAccount.staffId);case 2:subs=_context3.sent;console.log(subs.data);setUserMenus(subs.data);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return _getUserMenus.apply(this,arguments);}getUserMenus();},[render,userAccount.nameOfStaff]);var subGetSubMenus=function subGetSubMenus(s){setSelectedMenu(s.currentTarget.value);setSubMenus(menus.filter(function(m){return m.menu==s.currentTarget.value;}));};var arr=[];var checkedMenus=function checkedMenus(s,i){if(i===true){s.nameOfStaff=userAccount.staffId;arr.push(s);}else{arr=arr.filter(function(selected){return selected.id!==s.id;});}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return axios.post(apiUrl+'/setup/useraccess',arr);case 3:results=_context4.sent;if(!(results.status!==200)){_context4.next=8;break;}return _context4.abrupt(\"return\",Swal.fire('Failed','Submission Failed ! Check Entries and try again !','error'));case 8:Swal.fire('Success','User Access Saved Successfully, STATUS:'+results.status,'success');arr=[];setSubMenus([]);setRender(!render);case 12:_context4.next=17;break;case 14:_context4.prev=14;_context4.t0=_context4[\"catch\"](0);Swal.fire('Error','OOPS ! '+_context4.t0.message,'error');case 17:case\"end\":return _context4.stop();}}},_callee4,null,[[0,14]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleDeleteUserAccess=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(id){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:Swal.fire({title:'Do you want to remove this user access ?',showDenyButton:true,showCancelButton:true,confirmButtonText:'Remove',denyButtonText:\"Don't Remove\"}).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(result){var results;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!result.isConfirmed){_context5.next=21;break;}_context5.prev=1;_context5.next=4;return axios.delete(apiUrl+'/setup/useraccess/'+id);case 4:results=_context5.sent;if(!(results.status=='200')){_context5.next=12;break;}Swal.fire('Success','User Access Removed Successfully','success');arr=[];setSubMenus([]);setRender(!render);_context5.next=13;break;case 12:return _context5.abrupt(\"return\",Swal.fire('Failed','Removal Failed ! Check Entries and try again !','error'));case 13:setRender(!render);_context5.next=19;break;case 16:_context5.prev=16;_context5.t0=_context5[\"catch\"](1);Swal.fire('Error',_context5.t0+' User Access Removal Failed','error');case 19:_context5.next=22;break;case 21:if(result.isDenied){Swal.fire('User Access Removal Failed','','error');}case 22:case\"end\":return _context5.stop();}}},_callee5,null,[[1,16]]);}));return function(_x3){return _ref3.apply(this,arguments);};}());case 1:case\"end\":return _context6.stop();}}},_callee6);}));return function handleDeleteUserAccess(_x2){return _ref2.apply(this,arguments);};}();var handleSearch=function handleSearch(e){setSearch(e.currentTarget.value);};var handleMenuSearch=function handleMenuSearch(e){setMenuSearch(e.currentTarget.value);};var data={sUserMenus:userMenus.filter(function(m){var _m$menu,_m$subMenu;return((_m$menu=m.menu)===null||_m$menu===void 0?void 0:_m$menu.toLowerCase().includes(menuSearch.toLowerCase()))||((_m$subMenu=m.subMenu)===null||_m$subMenu===void 0?void 0:_m$subMenu.toLowerCase().includes(menuSearch.toLowerCase()));})};var userData={sUserAccounts:allAccounts.filter(function(m){var _m$nameOfStaff,_m$userName;return((_m$nameOfStaff=m.nameOfStaff)===null||_m$nameOfStaff===void 0?void 0:_m$nameOfStaff.toLowerCase().includes(search.toLowerCase()))||((_m$userName=m.userName)===null||_m$userName===void 0?void 0:_m$userName.toLowerCase().includes(search.toLowerCase()));})};var dataToUse=search.length===0?allAccounts:userData.sUserAccounts;var menuData=menuSearch.length===0?userMenus:data.sUserMenus;var handleSelectUser=function handleSelectUser(){setShow(!show);};var handleUserSelected=function handleUserSelected(user){setUserAccount({username:user.username,nameOfStaff:user.nameOfStaff,role:user.userRole,branch:user.branch,staffId:user.staff});setSearch('');setShow(!show);};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"p\",{className:\"staffp\"},\"User role refers to the set of permissions and access levels assigned to a particular type of user within an application or system. These roles define what actions a user can perform, what features they can access, and how they interact with the software. User roles help ensure security, manage permissions, and organize the user experience based on responsibilities or needs.\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(CButton,{className:\"float-right mt-3 btn-sm btn btn-primary\",onClick:handleSelectUser,name:\"cil-user\"},\"Select User\"))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{backgroundColor:'#8fc7f7',borderRadius:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mt-2 justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-1\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-4 text-muted\"},/*#__PURE__*/React.createElement(\"span\",null,\"Name :\")),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-sm-8\"},userAccount.nameOfStaff))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mt-2 justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-1\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-4 text-muted\"},/*#__PURE__*/React.createElement(\"span\",null,\"Username :\")),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-sm-8 \"},userAccount.username))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mt-2 justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-1\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-4 text-muted\"},/*#__PURE__*/React.createElement(\"span\",null,\"Role :\")),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-sm-8 \"},userAccount.role))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 mt-2 justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-1\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-4 text-muted\"},/*#__PURE__*/React.createElement(\"span\",null,\"Branch :\")),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"menu\",className:\"form-Label col-sm-8 \"},userAccount.branch))),/*#__PURE__*/React.createElement(\"hr\",null)),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\" col-5 justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-1\"},/*#__PURE__*/React.createElement(CSelect,{className:\"form-select col-sm-10\",\"aria-label\":\"Default select example\",value:selectedMenu,onChange:function onChange(s){return subGetSubMenus(s);}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Menu *\"),mainMenus.map(function(s){return/*#__PURE__*/React.createElement(\"option\",{key:s.id,value:s.id,id:s.id},s.menu);})))),/*#__PURE__*/React.createElement(Table,{className:\"sm mt-3 col-md-3\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Sub Menu\"))),/*#__PURE__*/React.createElement(\"tbody\",null,subMenus.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id,Style:\"cursor: pointer;\"//onClick={() => handleOnEdit(c)}\n},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.subMenu),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CInputCheckbox,{value:checked,onChange:function onChange(e){return checkedMenus(c,e.currentTarget.checked);}})));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(CButton,{className:\"btn btn-success mt-3 btn-sm float-right\",onClick:handleSubmit},\"Submit\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-4\",id:\"menu\",value:menuSearch,onChange:handleMenuSearch,placeholder:\"Search\"})),/*#__PURE__*/React.createElement(Table,{className:\"lg mt-3 table-lg\",size:\"lg\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Menu\"),/*#__PURE__*/React.createElement(\"th\",null,\"Menu Item\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,menuData.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id//onClick={() => handleOnEdit(c)}\n},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.menu),/*#__PURE__*/React.createElement(\"td\",null,c.subMenu),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"label\",{className:\"sm\",Style:\"cursor: pointer;\",onClick:function onClick(){return handleDeleteUserAccess(c.id);}},/*#__PURE__*/React.createElement(FcAdvance,null),\" Remove\")));}))))),/*#__PURE__*/React.createElement(CModal,{size:\"lg\",show:show,onClose:function onClose(){setShow(!show);},color:\"success\"},/*#__PURE__*/React.createElement(CModalHeader,{closeButton:true},/*#__PURE__*/React.createElement(CModalTitle,null,\" Search for User \")),/*#__PURE__*/React.createElement(CModalBody,null,/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-12\",id:\"menu\",value:search,onChange:handleSearch,placeholder:\"Search\"})),/*#__PURE__*/React.createElement(Table,{className:\"mt-3 table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Username\"),/*#__PURE__*/React.createElement(\"th\",null,\"FullName\"),/*#__PURE__*/React.createElement(\"th\",null,\"Role\"))),/*#__PURE__*/React.createElement(\"tbody\",null,dataToUse.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id,Style:\"cursor: pointer;\",onClick:function onClick(){return handleUserSelected(c);}},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.username),/*#__PURE__*/React.createElement(\"td\",null,c.nameOfStaff),/*#__PURE__*/React.createElement(\"td\",null,c.userRole));})))))));};export default UserAccess;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/userAccess.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","axios","moment","apiUrl","auth","Joi","stringify","Swal","CIcon","FcAdvance","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","CInputCheckbox","CInputGroupText","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","Dashboard","UserAccess","mainMenuData","setMainMenuData","search","setSearch","menuSearch","setMenuSearch","roles","setRoles","show","setShow","menus","setMenus","mainMenus","setMainMenus","selectedMenu","setSelectedMenu","subMenus","setSubMenus","menuArray","setMenuArray","allAccounts","setAllAccounts","rA","setRA","userMenus","setUserMenus","user","setUser","username","nameOfStaff","userRole","branch","staffId","userAccount","setUserAccount","editMode","setEditMode","render","setRender","checked","setChecked","role","access","userAccess","setUserAccess","getUserRoles","get","subs","data","mainMenu","roleAcc","getUserAccounts","params","allUserAccounts","getUserMenus","console","log","subGetSubMenus","s","currentTarget","value","filter","m","menu","arr","checkedMenus","i","push","selected","id","handleSubmit","post","results","status","fire","message","handleDeleteUserAccess","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","delete","isDenied","handleSearch","e","handleMenuSearch","sUserMenus","toLowerCase","includes","subMenu","userData","sUserAccounts","userName","dataToUse","length","menuData","handleSelectUser","handleUserSelected","staff","backgroundColor","borderRadius","map","c","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { apiUrl } from '../../config.json';\nimport auth from '../../components/services/authService';\nimport Joi, { stringify } from 'joi-browser';\nimport Swal from 'sweetalert2';\nimport CIcon from '@coreui/icons-react';\nimport { FcAdvance } from 'react-icons/fc';\n\nimport {\n\tCBadge,\n\tCCard,\n\tCCardBody,\n\t//CCardHeader,\n\tCCol,\n\tCDataTable,\n\tCRow,\n\tCButton,\n\tCModal,\n\tCModalFooter,\n\tCModalHeader,\n\tCModalBody,\n\tCCardHeader,\n\tCInputGroupAppend,\n\tCInputGroupPrepend,\n\tCDropdownItem,\n\tCForm,\n\t//CCardFooter,\n\tCDropdownToggle,\n\t//CInputRadio,\n\tCDropdown,\n\tCModalTitle,\n\t//CFormText,\n\t//CTextarea,\n\tCFormGroup,\n\tCLabel,\n\t// CSwitch,\n\tCInput,\n\t//CInputFile,\n\tCSelect,\n\tCDropdownMenu,\n\t//CCardFooter,\n\tCInputGroup,\n\tCInputCheckbox,\n\tCInputGroupText,\n\t//CForm,\n} from '@coreui/react';\n\nimport {\n\tRow,\n\tCol,\n\tTable,\n\tProgress,\n\tButton,\n\tUncontrolledButtonDropdown,\n\tDropdownMenu,\n\tDropdownToggle,\n\tDropdownItem,\n\tInput,\n\tLabel,\n\tBadge,\n} from 'reactstrap';\nimport Dashboard from '../planning/FamDetails';\n\nconst UserAccess = () => {\n\tconst [mainMenuData, setMainMenuData] = useState([]);\n\tconst [search, setSearch] = useState('');\n\tconst [menuSearch, setMenuSearch] = useState('');\n\n\tconst [roles, setRoles] = useState([]);\n\tconst [show, setShow] = useState(false);\n\tconst [menus, setMenus] = useState([]);\n\tconst [mainMenus, setMainMenus] = useState([]);\n\tconst [selectedMenu, setSelectedMenu] = useState('');\n\tconst [subMenus, setSubMenus] = useState([]);\n\tconst [menuArray, setMenuArray] = useState([]);\n\tconst [allAccounts, setAllAccounts] = useState([]);\n\tconst [rA, setRA] = useState([]);\n\tconst [userMenus, setUserMenus] = useState([]);\n\tconst [user, setUser] = useState(0);\n\tconst [userAccount, setUserAccount] = useState({\n\t\tusername: '',\n\t\tnameOfStaff: '',\n\t\tuserRole: '',\n\t\tbranch: '',\n\t\tstaffId: 0,\n\t});\n\n\tconst [editMode, setEditMode] = useState(false);\n\tconst [render, setRender] = useState(false);\n\tconst [checked, setChecked] = useState(false);\n\tconst [userAccess, setUserAccess] = useState({\n\t\tuser: '',\n\t\trole: '',\n\t\taccess: '',\n\t});\n\n\tuseEffect(() => {\n\t\tasync function getUserRoles() {\n\t\t\t// const results = await axios.get(apiUrl + '/setup/userroles');\n\t\t\t// setRoles(results.data);\n\t\t\tconst subs = await axios.get(apiUrl + '/menus/submenu/all');\n\t\t\tsetMenus(subs.data);\n\t\t\tconst mainMenu = await axios.get(apiUrl + '/menus/mainmenu');\n\t\t\tsetMainMenus(mainMenu.data);\n\t\t\tconst roleAcc = await axios.get(\n\t\t\t\tapiUrl + '/setup/useraccess/myroles/' + userAccount.staffId\n\t\t\t);\n\t\t\tsetRA(roleAcc.data);\n\t\t}\n\t\tgetUserRoles();\n\t}, [userAccount]);\n\n\tuseEffect(() => {\n\t\tasync function getUserAccounts(params) {\n\t\t\tconst allUserAccounts = await axios.get(apiUrl + '/users/useraccounts');\n\t\t\tsetAllAccounts(allUserAccounts.data);\n\t\t}\n\t\tgetUserAccounts();\n\t}, [render]);\n\n\tuseEffect(() => {\n\t\tasync function getUserMenus() {\n\t\t\tconst subs = await axios.get(\n\t\t\t\tapiUrl + '/setup/useraccess/myroles/' + userAccount.staffId\n\t\t\t);\n\t\t\tconsole.log(subs.data);\n\t\t\tsetUserMenus(subs.data);\n\t\t}\n\t\tgetUserMenus();\n\t}, [render, userAccount.nameOfStaff]);\n\n\tconst subGetSubMenus = (s) => {\n\t\tsetSelectedMenu(s.currentTarget.value);\n\t\tsetSubMenus(menus.filter((m) => m.menu == s.currentTarget.value));\n\t};\n\n\tlet arr = [];\n\tconst checkedMenus = (s, i) => {\n\t\tif (i === true) {\n\t\t\ts.nameOfStaff = userAccount.staffId;\n\t\t\tarr.push(s);\n\t\t} else {\n\t\t\tarr = arr.filter((selected) => selected.id !== s.id);\n\t\t}\n\t};\n\n\tconst handleSubmit = async () => {\n\t\ttry {\n\t\t\tconst results = await axios.post(apiUrl + '/setup/useraccess', arr);\n\t\t\tif (results.status !== 200) {\n\t\t\t\treturn Swal.fire(\n\t\t\t\t\t'Failed',\n\t\t\t\t\t'Submission Failed ! Check Entries and try again !',\n\t\t\t\t\t'error'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tSwal.fire(\n\t\t\t\t\t'Success',\n\t\t\t\t\t'User Access Saved Successfully, STATUS:' + results.status,\n\t\t\t\t\t'success'\n\t\t\t\t);\n\t\t\t\tarr = [];\n\t\t\t\tsetSubMenus([]);\n\t\t\t\tsetRender(!render);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tSwal.fire('Error', 'OOPS ! ' + err.message, 'error');\n\t\t}\n\t};\n\n\tconst handleDeleteUserAccess = async (id) => {\n\t\tSwal.fire({\n\t\t\ttitle: 'Do you want to remove this user access ?',\n\t\t\tshowDenyButton: true,\n\t\t\tshowCancelButton: true,\n\t\t\tconfirmButtonText: 'Remove',\n\t\t\tdenyButtonText: `Don't Remove`,\n\t\t}).then(async (result) => {\n\t\t\t/* Read more about isConfirmed, isDenied below */\n\t\t\tif (result.isConfirmed) {\n\t\t\t\ttry {\n\t\t\t\t\tconst results = await axios.delete(\n\t\t\t\t\t\tapiUrl + '/setup/useraccess/' + id\n\t\t\t\t\t);\n\t\t\t\t\tif (results.status == '200') {\n\t\t\t\t\t\tSwal.fire('Success', 'User Access Removed Successfully', 'success');\n\t\t\t\t\t\tarr = [];\n\t\t\t\t\t\tsetSubMenus([]);\n\t\t\t\t\t\tsetRender(!render);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn Swal.fire(\n\t\t\t\t\t\t\t'Failed',\n\t\t\t\t\t\t\t'Removal Failed ! Check Entries and try again !',\n\t\t\t\t\t\t\t'error'\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tsetRender(!render);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\tSwal.fire('Error', ex + ' User Access Removal Failed', 'error');\n\t\t\t\t}\n\t\t\t} else if (result.isDenied) {\n\t\t\t\tSwal.fire('User Access Removal Failed', '', 'error');\n\t\t\t}\n\t\t});\n\t};\n\tconst handleSearch = (e) => {\n\t\tsetSearch(e.currentTarget.value);\n\t};\n\n\tconst handleMenuSearch = (e) => {\n\t\tsetMenuSearch(e.currentTarget.value);\n\t};\n\n\tconst data = {\n\t\tsUserMenus: userMenus.filter(\n\t\t\t(m) =>\n\t\t\t\tm.menu?.toLowerCase().includes(menuSearch.toLowerCase()) ||\n\t\t\t\tm.subMenu?.toLowerCase().includes(menuSearch.toLowerCase())\n\t\t),\n\t};\n\n\tconst userData = {\n\t\tsUserAccounts: allAccounts.filter(\n\t\t\t(m) =>\n\t\t\t\tm.nameOfStaff?.toLowerCase().includes(search.toLowerCase()) ||\n\t\t\t\tm.userName?.toLowerCase().includes(search.toLowerCase())\n\t\t),\n\t};\n\n\tconst dataToUse = search.length === 0 ? allAccounts : userData.sUserAccounts;\n\n\tconst menuData = menuSearch.length === 0 ? userMenus : data.sUserMenus;\n\n\tconst handleSelectUser = () => {\n\t\tsetShow(!show);\n\t};\n\n\tconst handleUserSelected = (user) => {\n\t\tsetUserAccount({\n\t\t\tusername: user.username,\n\t\t\tnameOfStaff: user.nameOfStaff,\n\t\t\trole: user.userRole,\n\t\t\tbranch: user.branch,\n\t\t\tstaffId: user.staff,\n\t\t});\n\t\tsetSearch('');\n\t\tsetShow(!show);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"container-fluid\">\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t<p className=\"staffp\">\n\t\t\t\t\t\t\tUser role refers to the set of permissions and access levels\n\t\t\t\t\t\t\tassigned to a particular type of user within an application or\n\t\t\t\t\t\t\tsystem. These roles define what actions a user can perform, what\n\t\t\t\t\t\t\tfeatures they can access, and how they interact with the software.\n\t\t\t\t\t\t\tUser roles help ensure security, manage permissions, and organize\n\t\t\t\t\t\t\tthe user experience based on responsibilities or needs.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"row\">\n\t\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\tclassName=\"float-right mt-3 btn-sm btn btn-primary\"\n\t\t\t\t\t\t\tonClick={handleSelectUser}\n\t\t\t\t\t\t\tname=\"cil-user\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSelect User\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<hr />\n\n\t\t\t\t{/* <CInputGroupText className=\"float-right mt-3\"> */}\n\n\t\t\t\t{/* </CInputGroupText> */}\n\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"row\"\n\t\t\t\t\tstyle={{ backgroundColor: '#8fc7f7', borderRadius: '10px' }}\n\t\t\t\t>\n\t\t\t\t\t<div className=\"col-4 mt-2 justify-content-center align-items-center\">\n\t\t\t\t\t\t<CInputGroup className=\"mt-1\">\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-4 text-muted\">\n\t\t\t\t\t\t\t\t<span>Name :</span>\n\t\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-sm-8\">\n\t\t\t\t\t\t\t\t{userAccount.nameOfStaff}\n\t\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-4 mt-2 justify-content-center align-items-center\">\n\t\t\t\t\t\t<CInputGroup className=\"mt-1\">\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-4 text-muted\">\n\t\t\t\t\t\t\t\t<span>Username :</span>\n\t\t\t\t\t\t\t</CLabel>\n\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-sm-8 \">\n\t\t\t\t\t\t\t\t{userAccount.username}\n\t\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-4 mt-2 justify-content-center align-items-center\">\n\t\t\t\t\t\t<CInputGroup className=\"mt-1\">\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-4 text-muted\">\n\t\t\t\t\t\t\t\t<span>Role :</span>\n\t\t\t\t\t\t\t</CLabel>\n\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-sm-8 \">\n\t\t\t\t\t\t\t\t{userAccount.role}\n\t\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-4 mt-2 justify-content-center align-items-center\">\n\t\t\t\t\t\t<CInputGroup className=\"mt-1\">\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-4 text-muted\">\n\t\t\t\t\t\t\t\t<span>Branch :</span>\n\t\t\t\t\t\t\t</CLabel>\n\n\t\t\t\t\t\t\t<CLabel htmlFor=\"menu\" className=\"form-Label col-sm-8 \">\n\t\t\t\t\t\t\t\t{userAccount.branch}\n\t\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t</div>\n\t\t\t\t\t<hr />\n\t\t\t\t</div>\n\t\t\t\t<hr />\n\t\t\t\t<div className=\" col-5 justify-content-center align-items-center\">\n\t\t\t\t\t<CInputGroup className=\"mt-1\">\n\t\t\t\t\t\t<CSelect\n\t\t\t\t\t\t\tclassName=\"form-select col-sm-10\"\n\t\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\t\tvalue={selectedMenu}\n\t\t\t\t\t\t\tonChange={(s) => subGetSubMenus(s)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value=\"\">Select Menu *</option>\n\t\t\t\t\t\t\t{mainMenus.map((s) => (\n\t\t\t\t\t\t\t\t<option key={s.id} value={s.id} id={s.id}>\n\t\t\t\t\t\t\t\t\t{s.menu}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</CSelect>\n\t\t\t\t\t</CInputGroup>\n\t\t\t\t</div>\n\t\t\t\t<Table className=\"sm mt-3 col-md-3\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t<th>Sub Menu</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{subMenus.map((c, index) => (\n\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\tkey={c.id}\n\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t//onClick={() => handleOnEdit(c)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\n\t\t\t\t\t\t\t\t<td>{c.subMenu}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<CInputCheckbox\n\t\t\t\t\t\t\t\t\t\tvalue={checked}\n\t\t\t\t\t\t\t\t\t\tonChange={(e) => checkedMenus(c, e.currentTarget.checked)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t\t<div className=\"col-12\">\n\t\t\t\t\t<CButton\n\t\t\t\t\t\tclassName=\"btn btn-success mt-3 btn-sm float-right\"\n\t\t\t\t\t\tonClick={handleSubmit}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</CButton>\n\t\t\t\t</div>\n\t\t\t\t<hr />\n\t\t\t\t<div className=\"table-responsive\">\n\t\t\t\t\t<CInputGroup className=\"mt-3\">\n\t\t\t\t\t\t<CInput\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclassName=\"form-control col-sm-4\"\n\t\t\t\t\t\t\tid=\"menu\"\n\t\t\t\t\t\t\tvalue={menuSearch}\n\t\t\t\t\t\t\tonChange={handleMenuSearch}\n\t\t\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t<Table className=\"lg mt-3 table-lg\" size=\"lg\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t<th>Menu</th>\n\t\t\t\t\t\t\t\t<th>Menu Item</th>\n\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{menuData.map((c, index) => (\n\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\tkey={c.id}\n\n\t\t\t\t\t\t\t\t\t//onClick={() => handleOnEdit(c)}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.menu}</td>\n\t\t\t\t\t\t\t\t\t<td>{c.subMenu}</td>\n\t\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t\t{/* <FcAdvance /> */}\n\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"sm\"\n\t\t\t\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteUserAccess(c.id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<FcAdvance /> Remove\n\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t{/* <CButton\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-sm m-3\"\n\t\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteRoleAccess(c.id)}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t- Remove\n\t\t\t\t\t\t\t\t\t\t</CButton> */}\n\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<CModal\n\t\t\t\tsize=\"lg\"\n\t\t\t\tshow={show}\n\t\t\t\tonClose={() => {\n\t\t\t\t\tsetShow(!show);\n\t\t\t\t}}\n\t\t\t\tcolor=\"success\"\n\t\t\t>\n\t\t\t\t<CModalHeader closeButton>\n\t\t\t\t\t<CModalTitle> Search for User </CModalTitle>\n\t\t\t\t</CModalHeader>\n\t\t\t\t<CModalBody>\n\t\t\t\t\t<CFormGroup>\n\t\t\t\t\t\t<CInputGroup className=\"mt-3\">\n\t\t\t\t\t\t\t<CInput\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclassName=\"form-control col-sm-12\"\n\t\t\t\t\t\t\t\tid=\"menu\"\n\t\t\t\t\t\t\t\tvalue={search}\n\t\t\t\t\t\t\t\tonChange={handleSearch}\n\t\t\t\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</CInputGroup>\n\t\t\t\t\t\t<Table className=\"mt-3 table-sm\">\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t\t\t<th>Username</th>\n\t\t\t\t\t\t\t\t\t<th>FullName</th>\n\t\t\t\t\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t{dataToUse.map((c, index) => (\n\t\t\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\t\t\tkey={c.id}\n\t\t\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\t\t\tonClick={() => handleUserSelected(c)}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{c.username}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{c.nameOfStaff}</td>\n\t\t\t\t\t\t\t\t\t\t<td>{c.userRole}</td>\n\n\t\t\t\t\t\t\t\t\t\t{/* <td className=\"sm\">\n\t\t\t\t\t\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn-sm m-3\"\n\t\t\t\t\t\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => handleDeleteRoleAccess(c.id)}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t- Remove\n\t\t\t\t\t\t\t\t\t\t\t</CButton>\n\t\t\t\t\t\t\t\t\t\t</td> */}\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</Table>\n\t\t\t\t\t</CFormGroup>\n\t\t\t\t</CModalBody>\n\t\t\t</CModal>\n\t\t</>\n\t);\n};\n\nexport default UserAccess;\n"]},"metadata":{},"sourceType":"module"}
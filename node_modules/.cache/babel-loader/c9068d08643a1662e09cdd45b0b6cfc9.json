{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import moment from'moment';import Swal from'sweetalert2';import auth from'../../components/services/authService';import{useHistory}from'react-router-dom';import{apiUrl}from'../../config.json';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CDropdownDivider,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';var ChangePassword=function ChangePassword(){//const { addToast } = useToasts()\nvar navigate=useHistory();var user=auth.getCurrentUser();var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),userAccount=_useState2[0],setUserAccount=_useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(userAccount);console.log(user);e.preventDefault();_context.prev=3;_context.next=6;return axios.put(apiUrl+'/setup/user/'+user.id+'/',{password:userAccount.password});case 6:results=_context.sent;if(!(results.status!==200)){_context.next=11;break;}return _context.abrupt(\"return\",Swal.fire('OOPS','Unsuccessful','error'));case 11:Swal.fire('Password Changed Successfully','success');setUserAccount({username:'',password:''});navigate.push('/home');case 14:_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](3);Swal.fire('OOPS ! '+_context.t0,'error');case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,16]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();function genPassword(){var chars='123456789abcdefghijklmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';var passwordLength=8;var tempPassword='';for(var i=0;i<=passwordLength;i++){var randomNumber=Math.floor(Math.random()*chars.length);tempPassword+=chars.substring(randomNumber,randomNumber+1);}setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{password:tempPassword,confirmPassword:tempPassword}));}return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"centertext\"},\"Change User Password\"),/*#__PURE__*/React.createElement(\"p\",{className:\"staffp\"},\"A user account is an established technique for connecting a user and an information service and/or computer network. User accounts determine whether or not a user can connect to a computer, network or similar networks.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"nameOfStaff\",className:\"col-sm-3\"},\"FullName\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-6\",id:\"nameOfStaff\",value:user.nameOfStaff})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\",className:\" col-sm-3\"},\"Username\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-6\",id:\"username\",value:user.username})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"gender\",className:\"col-sm-3\"},\"User Role\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-6\",\"aria-label\":\"Default select example\",value:user.userRole})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"branch\",className:\"col-sm-3\"},\"Branch\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-6\",\"aria-label\":\"Default select example\",value:user.branch})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\",className:\"col-sm-3\"},\"New Password\"),/*#__PURE__*/React.createElement(CInput,{type:\"password\",className:\"col-sm-6\",value:userAccount.password,onChange:function onChange(e){return setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{password:e.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"confirmpassword\",className:\"col-sm-3\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(CInput,{type:\"password\",className:\"col-sm-6\",value:userAccount.confirmPassword,onChange:function onChange(e){return setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{confirmPassword:e.target.value}));}})),/*#__PURE__*/React.createElement(CButton,{className:\"btn-sm col-sm-3 mt-3 float-right\",color:\"danger\",onClick:handleSubmit},\"Submit\"));};export default ChangePassword;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/changePassword.jsx"],"names":["React","useState","useEffect","axios","moment","Swal","auth","useHistory","apiUrl","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","ChangePassword","navigate","user","getCurrentUser","username","password","userAccount","setUserAccount","handleSubmit","e","console","log","preventDefault","put","id","results","status","fire","push","genPassword","chars","passwordLength","tempPassword","i","randomNumber","Math","floor","random","length","substring","confirmPassword","nameOfStaff","userRole","branch","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Swal from 'sweetalert2';\nimport auth from '../../components/services/authService';\nimport { useHistory } from 'react-router-dom';\nimport { apiUrl } from '../../config.json';\n\nimport {\n\tCBadge,\n\tCCard,\n\tCCardBody,\n\t//CCardHeader,\n\tCCol,\n\tCDataTable,\n\tCRow,\n\tCButton,\n\tCModal,\n\tCModalFooter,\n\tCModalHeader,\n\tCModalBody,\n\tCCardHeader,\n\tCInputGroupAppend,\n\tCInputGroupPrepend,\n\tCDropdownItem,\n\tCForm,\n\t//CCardFooter,\n\tCDropdownToggle,\n\t//CInputRadio,\n\tCDropdown,\n\tCDropdownDivider,\n\tCModalTitle,\n\t//CFormText,\n\t//CTextarea,\n\tCFormGroup,\n\tCLabel,\n\t// CSwitch,\n\tCInput,\n\t//CInputFile,\n\tCSelect,\n\tCDropdownMenu,\n\t//CCardFooter,\n\tCInputGroup,\n\t//CForm,\n} from '@coreui/react';\nconst ChangePassword = () => {\n\t//const { addToast } = useToasts()\n\tconst navigate = useHistory();\n\tconst user = auth.getCurrentUser();\n\n\tconst [userAccount, setUserAccount] = useState({\n\t\tusername: '',\n\t\tpassword: '',\n\t});\n\n\tconst handleSubmit = async (e) => {\n\t\tconsole.log(userAccount);\n\t\tconsole.log(user);\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst results = await axios.put(apiUrl + '/setup/user/' + user.id + '/', {\n\t\t\t\tpassword: userAccount.password,\n\t\t\t});\n\n\t\t\tif (results.status !== 200) {\n\t\t\t\treturn Swal.fire('OOPS', 'Unsuccessful', 'error');\n\t\t\t} else {\n\t\t\t\tSwal.fire('Password Changed Successfully', 'success');\n\t\t\t\tsetUserAccount({\n\t\t\t\t\tusername: '',\n\t\t\t\t\tpassword: '',\n\t\t\t\t});\n\t\t\t\tnavigate.push('/home');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tSwal.fire('OOPS ! ' + err, 'error');\n\t\t}\n\t};\n\n\tfunction genPassword() {\n\t\tlet chars = '123456789abcdefghijklmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\n\t\tlet passwordLength = 8;\n\t\tlet tempPassword = '';\n\t\tfor (let i = 0; i <= passwordLength; i++) {\n\t\t\tlet randomNumber = Math.floor(Math.random() * chars.length);\n\t\t\ttempPassword += chars.substring(randomNumber, randomNumber + 1);\n\t\t}\n\t\tsetUserAccount({\n\t\t\t...userAccount,\n\t\t\tpassword: tempPassword,\n\t\t\tconfirmPassword: tempPassword,\n\t\t});\n\t}\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<h1 className=\"centertext\">Change User Password</h1>\n\t\t\t<p className=\"staffp\">\n\t\t\t\tA user account is an established technique for connecting a user and an\n\t\t\t\tinformation service and/or computer network. User accounts determine\n\t\t\t\twhether or not a user can connect to a computer, network or similar\n\t\t\t\tnetworks.\n\t\t\t</p>\n\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"nameOfStaff\" className=\"col-sm-3\">\n\t\t\t\t\tFullName\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\tid=\"nameOfStaff\"\n\t\t\t\t\tvalue={user.nameOfStaff}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"username\" className=\" col-sm-3\">\n\t\t\t\t\tUsername\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tvalue={user.username}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"gender\" className=\"col-sm-3\">\n\t\t\t\t\tUser Role\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\tvalue={user.userRole}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"branch\" className=\"col-sm-3\">\n\t\t\t\t\tBranch\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\tvalue={user.branch}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"password\" className=\"col-sm-3\">\n\t\t\t\t\tNew Password\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\tvalue={userAccount.password}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetUserAccount({ ...userAccount, password: e.target.value })\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"row mb-3\">\n\t\t\t\t<label htmlFor=\"confirmpassword\" className=\"col-sm-3\">\n\t\t\t\t\tConfirm Password\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\tvalue={userAccount.confirmPassword}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\tconfirmPassword: e.target.value,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<CButton\n\t\t\t\tclassName=\"btn-sm col-sm-3 mt-3 float-right\"\n\t\t\t\tcolor=\"danger\"\n\t\t\t\tonClick={handleSubmit}\n\t\t\t>\n\t\t\t\tSubmit\n\t\t\t</CButton>\n\t\t</div>\n\t);\n};\n\nexport default ChangePassword;\n"]},"metadata":{},"sourceType":"module"}
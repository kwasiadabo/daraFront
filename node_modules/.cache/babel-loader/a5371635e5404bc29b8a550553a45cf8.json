{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useNavigate,Navigate}from'react-router-dom';import axios from'axios';import baseUrl from'../../config.json';import auth from'../../components/services/authService';import Swal from'sweetalert2';import moment from'moment';import{apiUrl}from'../../config.json';import Joi from'joi-browser';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';var BookProduct=function BookProduct(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selectedProduct=_useState4[0],setSelectedProduct=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),productShow=_useState6[0],setProductShow=_useState6[1];var _useState7=useState({disbursementId:0,customer:0,product:0,cashCollateral:0,interestRate:0,frequency:'',duration:0}),_useState8=_slicedToArray(_useState7,2),productData=_useState8[0],setProductData=_useState8[1];useEffect(function(){function getProducts(){return _getProducts.apply(this,arguments);}function _getProducts(){_getProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl.apiUrl+'/setup/product');case 2:results=_context.sent;setProducts(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getProducts.apply(this,arguments);}getProducts();},[products]);var handleProductSelect=function handleProductSelect(e){//console.log(products)\nsetSelectedProduct(products.filter(function(p){return p.id==e.currentTarget.value;}));var productSelected=products.filter(function(p){return p.id==e.currentTarget.value;});//console.log(selectedProduct[0])\nsetProductData(_objectSpread(_objectSpread({},productData),{},{product:e.currentTarget.value,customer:props.customer,disbursementId:props.disbursementId,cashCollateral:props.cashCollateral,interestRate:productSelected[0].interestRate,frequency:productSelected[0].frequency,duration:productSelected[0].duration}));};var schemaMap={disbursementId:Joi.number().required().label('Cheque Details'),customer:Joi.number().required().label('Disbursed By'),product:Joi.number().required().label('Customer'),cashCollateral:Joi.number().label('Cash Collateral'),interestRate:Joi.number().label('Interest Rate'),frequency:Joi.string().label('Frequency'),duration:Joi.number().label('Duration')};var schema=Joi.object(schemaMap);var validateForm=function validateForm(){var result=Joi.validate(productData,schema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var validate,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(productData);/* if (productData.interestRate < selectedProduct[0].interestRate)\n      return Swal.fire(\n        'Interest Rate Voilation',\n        'Below 20% Interest Rates are not acceptable',\n        'error',\n      )*/validate=validateForm();if(!(validate!==null)){_context2.next=4;break;}return _context2.abrupt(\"return\",Swal.fire('Validation',validate,'error'));case 4:_context2.prev=4;_context2.next=7;return axios.post(apiUrl+'/loan/booking/product',productData);case 7:results=_context2.sent;if(!(results.status!==200)){_context2.next=12;break;}return _context2.abrupt(\"return\",Swal.fire('OOPs !','Submission Failed ! Check Entries and try again !','error'));case 12:Swal.fire('Good job!','Loan Product Saved Successfully','success');setProductData({disbursementId:0,customer:0,product:0,interestRate:0,frequency:'',duration:0});setProductShow(!productShow);case 15:_context2.next=20;break;case 17:_context2.prev=17;_context2.t0=_context2[\"catch\"](4);Swal.fire('OOPS Product Booking Error! ','Loan Product Booking NOT Saved','error');case 20:case\"end\":return _context2.stop();}}},_callee2,null,[[4,17]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"product\",className:\"col-sm-3\"},\"Select Product *\"),/*#__PURE__*/React.createElement(CSelect,{id:\"product\",className:\"col-sm-8\",\"aria-label\":\"Default select example\",value:productData.product,onChange:handleProductSelect},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select Product--\"),products.map(function(p){return/*#__PURE__*/React.createElement(\"option\",{key:p.id,value:p.id,id:p.id},p.product);})),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"InterestRate\",className:\"col-sm-3\"},\"Interest Rate (%)\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-4\",id:\"InterestRate\",value:productData.interestRate,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{interestRate:e.currentTarget.value}));}}),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"frequency\",className:\"col-sm-3\"},\"Payment Frequency *\"),/*#__PURE__*/React.createElement(CSelect,{id:\"freqency\",className:\"col-sm-8\",\"aria-label\":\"Default select example\",value:productData.frequency,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{frequency:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"Daily\"},\"Daily\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Weekly\"},\"Weekly\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Monthly\"},\"Monthly\"),\"))}\"),/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"Duration\",className:\"col-sm-4\"},\"Duration (\",productData.frequency==='Daily'?'Days':productData.frequency==='Weekly'?'Weeks':'Months',\")\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-4\",id:\"Duration\",value:productData.duration,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{duration:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(CButton,{onClick:handleSubmit,className:\"m-3 float-right\",color:\"success\"},\"Submit\")));};export default BookProduct;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/bookProduct.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","axios","baseUrl","auth","Swal","moment","apiUrl","Joi","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","BookProduct","props","products","setProducts","selectedProduct","setSelectedProduct","productShow","setProductShow","disbursementId","customer","product","cashCollateral","interestRate","frequency","duration","productData","setProductData","getProducts","get","results","data","handleProductSelect","e","filter","p","id","currentTarget","value","productSelected","schemaMap","number","required","label","string","schema","object","validateForm","result","validate","error","details","message","handleSubmit","console","log","fire","post","status","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate } from 'react-router-dom'\nimport axios from 'axios'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\nimport moment from 'moment'\nimport { apiUrl } from '../../config.json'\nimport Joi from 'joi-browser'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nconst BookProduct = (props) => {\n  const [products, setProducts] = useState([])\n  const [selectedProduct, setSelectedProduct] = useState([])\n  const [productShow, setProductShow] = useState(false)\n  const [productData, setProductData] = useState({\n    disbursementId: 0,\n    customer: 0,\n    product: 0,\n    cashCollateral: 0,\n    interestRate: 0,\n    frequency: '',\n    duration: 0,\n  })\n\n  useEffect(() => {\n    async function getProducts() {\n      const results = await axios.get(baseUrl.apiUrl + '/setup/product')\n      setProducts(results.data)\n    }\n    getProducts()\n  }, [products])\n\n  const handleProductSelect = (e) => {\n    //console.log(products)\n    setSelectedProduct(products.filter((p) => p.id == e.currentTarget.value))\n\n    const productSelected = products.filter(\n      (p) => p.id == e.currentTarget.value,\n    )\n    //console.log(selectedProduct[0])\n    setProductData({\n      ...productData,\n      product: e.currentTarget.value,\n      customer: props.customer,\n      disbursementId: props.disbursementId,\n      cashCollateral: props.cashCollateral,\n      interestRate: productSelected[0].interestRate,\n      frequency: productSelected[0].frequency,\n      duration: productSelected[0].duration,\n    })\n  }\n\n  const schemaMap = {\n    disbursementId: Joi.number().required().label('Cheque Details'),\n    customer: Joi.number().required().label('Disbursed By'),\n    product: Joi.number().required().label('Customer'),\n    cashCollateral: Joi.number().label('Cash Collateral'),\n    interestRate: Joi.number().label('Interest Rate'),\n    frequency: Joi.string().label('Frequency'),\n    duration: Joi.number().label('Duration'),\n  }\n  const schema = Joi.object(schemaMap)\n\n  const validateForm = () => {\n    const result = Joi.validate(productData, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n  }\n\n  const handleSubmit = async () => {\n    console.log(productData)\n    /* if (productData.interestRate < selectedProduct[0].interestRate)\n      return Swal.fire(\n        'Interest Rate Voilation',\n        'Below 20% Interest Rates are not acceptable',\n        'error',\n      )*/\n    const validate = validateForm()\n    if (validate !== null) {\n      return Swal.fire('Validation', validate, 'error')\n    }\n    try {\n      const results = await axios.post(\n        apiUrl + '/loan/booking/product',\n        productData,\n      )\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPs !',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Good job!', 'Loan Product Saved Successfully', 'success')\n\n        setProductData({\n          disbursementId: 0,\n          customer: 0,\n          product: 0,\n          interestRate: 0,\n          frequency: '',\n          duration: 0,\n        })\n        setProductShow(!productShow)\n      }\n    } catch (err) {\n      Swal.fire(\n        'OOPS Product Booking Error! ',\n        'Loan Product Booking NOT Saved',\n        'error',\n      )\n    }\n  }\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"col-sm-12 mt-3\">\n        <CLabel htmlFor=\"product\" className=\"col-sm-3\">\n          Select Product *\n        </CLabel>\n\n        <CSelect\n          id=\"product\"\n          className=\"col-sm-8\"\n          aria-label=\"Default select example\"\n          value={productData.product}\n          onChange={handleProductSelect}\n        >\n          <option defaultValue=\"\">--Select Product--</option>\n          {products.map((p) => (\n            <option key={p.id} value={p.id} id={p.id}>\n              {p.product}\n            </option>\n          ))}\n        </CSelect>\n\n        <CLabel htmlFor=\"InterestRate\" className=\"col-sm-3\">\n          Interest Rate (%)\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"col-sm-4\"\n          id=\"InterestRate\"\n          value={productData.interestRate}\n          onChange={(e) =>\n            setProductData({\n              ...productData,\n              interestRate: e.currentTarget.value,\n            })\n          }\n        />\n\n        <CLabel htmlFor=\"frequency\" className=\"col-sm-3\">\n          Payment Frequency *\n        </CLabel>\n\n        <CSelect\n          id=\"freqency\"\n          className=\"col-sm-8\"\n          aria-label=\"Default select example\"\n          value={productData.frequency}\n          onChange={(e) =>\n            setProductData({\n              ...productData,\n              frequency: e.currentTarget.value,\n            })\n          }\n        >\n          <option value=\"Daily\">Daily</option>\n          <option value=\"Weekly\">Weekly</option>\n          <option value=\"Monthly\">Monthly</option>\n          ))}\n        </CSelect>\n\n        <CLabel htmlFor=\"Duration\" className=\"col-sm-4\">\n          Duration (\n          {productData.frequency === 'Daily'\n            ? 'Days'\n            : productData.frequency === 'Weekly'\n            ? 'Weeks'\n            : 'Months'}\n          )\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"col-sm-4\"\n          id=\"Duration\"\n          value={productData.duration}\n          onChange={(e) =>\n            setProductData({\n              ...productData,\n              duration: e.currentTarget.value,\n            })\n          }\n        />\n      </div>\n      <div className=\"justify-content-center\">\n        <CButton\n          onClick={handleSubmit}\n          className=\"m-3 float-right\"\n          color=\"success\"\n        >\n          Submit\n        </CButton>\n      </div>\n    </div>\n  )\n}\n\nexport default BookProduct\n"]},"metadata":{},"sourceType":"module"}
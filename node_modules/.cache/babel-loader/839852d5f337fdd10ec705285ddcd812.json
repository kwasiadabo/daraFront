{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useNavigate,Navigate}from'react-router-dom';import axios from'axios';import baseUrl from'../../config.json';import auth from'../../components/services/authService';import Swal from'sweetalert2';import moment from'moment';import{apiUrl}from'../../config.json';import Joi from'joi-browser';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';var BookLoanPrincipal=function BookLoanPrincipal(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({disbursementId:0,customer:0,principal:0,purpose:''}),_useState4=_slicedToArray(_useState3,2),principalData=_useState4[0],setPrincipalData=_useState4[1];useEffect(function(){function getProducts(){return _getProducts.apply(this,arguments);}function _getProducts(){_getProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl.apiUrl+'/setup/product');case 2:results=_context.sent;setProducts(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getProducts.apply(this,arguments);}getProducts();},[products]);var handlePrincipalEntry=function handlePrincipalEntry(e){setPrincipalData(_objectSpread(_objectSpread({},principalData),{},{principal:e.currentTarget.value,customer:props.customer,disbursementId:props.disbursementId,cashCollateral:props.cashCollateral}));};var handlePurposeEntry=function handlePurposeEntry(e){setPrincipalData(_objectSpread(_objectSpread({},principalData),{},{purpose:e.currentTarget.value}));};var schemaMap={disbursementId:Joi.number().required().label('Disbursement ID'),customer:Joi.number().required().label('Customer'),principal:Joi.number().required().label('Principal'),purpose:Joi.string().required().label('Purpose'),cashCollateral:Joi.number()};var schema=Joi.object(schemaMap);var validateForm=function validateForm(){var result=Joi.validate(principalData,schema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var validate,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log('disbursed :'+props.disbursedAmount);console.log('Principal :'+principalData.principal);if(!(props.disbursedAmount>=principalData.principal)){_context2.next=4;break;}return _context2.abrupt(\"return\",Swal.fire('OOPs !','Principal should not be less or equal to disbursed amount !','error'));case 4://console.log(props)\nvalidate=validateForm();if(!(validate!==null)){_context2.next=7;break;}return _context2.abrupt(\"return\",Swal.fire('Validation',validate,'error'));case 7:_context2.prev=7;_context2.next=10;return axios.put(apiUrl+'/loan/booking/principal',principalData);case 10:results=_context2.sent;if(!(results.status!==200)){_context2.next=15;break;}return _context2.abrupt(\"return\",Swal.fire('OOPs !','Submission Failed ! Check Entries and try again !','error'));case 15:Swal.fire('Good job!','Loan Principal Saved Successfully','success');setPrincipalData({disbursementId:0,customer:0,principal:0,purpose:''});case 17:_context2.next=22;break;case 19:_context2.prev=19;_context2.t0=_context2[\"catch\"](7);Swal.fire('OOPS ! ','Loan Principal NOT Saved','error');case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[7,19]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"product\",className:\"col-sm-3\"},\"Amount Requested *\"),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-6\"},/*#__PURE__*/React.createElement(CInput,{className:\"form-control-xl text-right\",value:principalData.principal,onChange:handlePrincipalEntry}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"product\",className:\"col-sm-3\"},\"Purpose *\"),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-6\"},/*#__PURE__*/React.createElement(CInput,{className:\"form-control-xl\",value:principalData.purpose,onChange:handlePurposeEntry})))),/*#__PURE__*/React.createElement(\"div\",{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(CButton,{onClick:handleSubmit,className:\"m-3 float-right\",color:\"success\"},\"Submit\")));};export default BookLoanPrincipal;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanPrincipalEntry.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","axios","baseUrl","auth","Swal","moment","apiUrl","Joi","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","BookLoanPrincipal","props","products","setProducts","disbursementId","customer","principal","purpose","principalData","setPrincipalData","getProducts","get","results","data","handlePrincipalEntry","e","currentTarget","value","cashCollateral","handlePurposeEntry","schemaMap","number","required","label","string","schema","object","validateForm","result","validate","error","details","message","handleSubmit","console","log","disbursedAmount","fire","put","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate } from 'react-router-dom'\nimport axios from 'axios'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\nimport moment from 'moment'\nimport { apiUrl } from '../../config.json'\nimport Joi from 'joi-browser'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nconst BookLoanPrincipal = (props) => {\n  const [products, setProducts] = useState([])\n  const [principalData, setPrincipalData] = useState({\n    disbursementId: 0,\n    customer: 0,\n    principal: 0,\n    purpose: '',\n  })\n\n  useEffect(() => {\n    async function getProducts() {\n      const results = await axios.get(baseUrl.apiUrl + '/setup/product')\n      setProducts(results.data)\n    }\n    getProducts()\n  }, [products])\n\n  const handlePrincipalEntry = (e) => {\n    setPrincipalData({\n      ...principalData,\n      principal: e.currentTarget.value,\n      customer: props.customer,\n      disbursementId: props.disbursementId,\n      cashCollateral: props.cashCollateral,\n    })\n  }\n\n  const handlePurposeEntry = (e) => {\n    setPrincipalData({\n      ...principalData,\n      purpose: e.currentTarget.value,\n    })\n  }\n\n  const schemaMap = {\n    disbursementId: Joi.number().required().label('Disbursement ID'),\n    customer: Joi.number().required().label('Customer'),\n    principal: Joi.number().required().label('Principal'),\n    purpose: Joi.string().required().label('Purpose'),\n    cashCollateral: Joi.number(),\n  }\n  const schema = Joi.object(schemaMap)\n\n  const validateForm = () => {\n    const result = Joi.validate(principalData, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n  }\n\n  const handleSubmit = async () => {\n    console.log('disbursed :' + props.disbursedAmount)\n    console.log('Principal :' + principalData.principal)\n    if (props.disbursedAmount >= principalData.principal)\n      return Swal.fire(\n        'OOPs !',\n        'Principal should not be less or equal to disbursed amount !',\n        'error',\n      )\n\n    //console.log(props)\n    const validate = validateForm()\n    if (validate !== null) {\n      return Swal.fire('Validation', validate, 'error')\n    }\n    try {\n      const results = await axios.put(\n        apiUrl + '/loan/booking/principal',\n        principalData,\n      )\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPs !',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Good job!', 'Loan Principal Saved Successfully', 'success')\n\n        setPrincipalData({\n          disbursementId: 0,\n          customer: 0,\n          principal: 0,\n          purpose: '',\n        })\n      }\n    } catch (err) {\n      Swal.fire('OOPS ! ', 'Loan Principal NOT Saved', 'error')\n    }\n  }\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"col-sm-12 mt-3\">\n        <div className=\"mb-3 row\">\n          <CLabel htmlFor=\"product\" className=\"col-sm-3\">\n            Amount Requested *\n          </CLabel>\n          <div class=\"col-sm-6\">\n            <CInput\n              className=\"form-control-xl text-right\"\n              value={principalData.principal}\n              onChange={handlePrincipalEntry}\n            />\n          </div>\n        </div>\n\n        <div className=\"mb-3 row\">\n          <CLabel htmlFor=\"product\" className=\"col-sm-3\">\n            Purpose *\n          </CLabel>\n          <div class=\"col-sm-6\">\n            <CInput\n              className=\"form-control-xl\"\n              value={principalData.purpose}\n              onChange={handlePurposeEntry}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"justify-content-center\">\n        <CButton\n          onClick={handleSubmit}\n          className=\"m-3 float-right\"\n          color=\"success\"\n        >\n          Submit\n        </CButton>\n      </div>\n    </div>\n  )\n}\n\nexport default BookLoanPrincipal\n"]},"metadata":{},"sourceType":"module"}
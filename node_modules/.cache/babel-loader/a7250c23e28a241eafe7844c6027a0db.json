{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Modal}from'react-bootstrap';import{Link,useNavigate,Navigate}from'react-router-dom';import axios from'axios';import moment from'moment';import Joi from'joi-browser';import CurrencyFormat from'react-currency-format';import Swal from'sweetalert2';import auth from'../../components/services/authService';import{apiUrl}from'../../config.json';import{reportUrl}from'../../config.json';import AdaboSelect from'react-select';import'../../../src/schedulecards.css';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CDropdownDivider,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';var DailyEntryReport=function DailyEntryReport(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),render=_useState4[0],setRender=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),collectionSheet=_useState6[0],setCollectionSheet=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),officer=_useState8[0],setOfficer=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),staff=_useState10[0],setStaff=_useState10[1];var _useState11=useState(new Date().toISOString().slice(0,10)),_useState12=_slicedToArray(_useState11,2),collectionDate=_useState12[0],setCollectionDate=_useState12[1];var user=auth.getCurrentUser();var formatter=new Intl.NumberFormat('en-US',{style:'currency',currency:'GHS'// These options are needed to round to whole numbers if that's what you want.\n//minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n//maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});useEffect(function(){function getStaff(){return _getStaff.apply(this,arguments);}function _getStaff(){_getStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(apiUrl+'/setup/staff');case 2:results=_context.sent;setStaff(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getStaff.apply(this,arguments);}getStaff();},[]);/*useEffect(() => {\n    async function getCollectionSheet() {\n      const results = await axios.get(\n        apiUrl + '/loanreports/dailyEntry/' + officer + '/' + collectionDate,\n      )\n      setCollectionSheet(results.data)\n    }\n    getCollectionSheet()\n    console.log(collectionSheet)\n  }, [collectionDate, officer])\n  */var money=new Intl.NumberFormat('de-CH',{style:'currency',currency:'CHF'});var today=new Date();// returns the month (from 0 to 11)\nvar month=today.toLocaleString('default',{month:'long'});// returns the day of the month (from 1 to 31)\nvar day=today.getDate();// returns the year (four digits)\nvar year=today.getFullYear();function add(accumulator,a){return accumulator+a;}var handleDateChange=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setCollectionDate(e.currentTarget.value);_context2.next=3;return axios.get(apiUrl+'/loanreports/dailyEntry/'+officer+'/'+e.currentTarget.value);case 3:results=_context2.sent;setCollectionSheet(results.data);console.log(collectionSheet);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDateChange(_x){return _ref.apply(this,arguments);};}();var totalAmt=collectionSheet.reduce(function(a,i){return a+i.Amount;},0);var openCustomerListAsReport=function openCustomerListAsReport(url){var windowFeatures='left=100,top=100,width=350,height=320';window.open(url,'Daily Entry Report','popup',windowFeatures);};var handleOfficerSelect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(c){var results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setOfficer(c.currentTarget.value);_context3.next=3;return axios.get(apiUrl+'/loanreports/dailyEntry/'+c.currentTarget.value+'/'+collectionDate);case 3:results=_context3.sent;setCollectionSheet(results.data);//setOfficer(c.nameOfStaff);\n// setShow(!show);\ncase 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleOfficerSelect(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"m-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3\"},/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,{lg:12},/*#__PURE__*/React.createElement(CCard,{lg:12},/*#__PURE__*/React.createElement(CCardHeader,{className:\"text-right\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"centertext mb-2\"},\"DAILY ENTRY REPORT\"))),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(\"div\",{class:\"mb-3 row\"},/*#__PURE__*/React.createElement(CSelect,{className:\"form-select col-sm-12 mb-3\",\"aria-label\":\"Default select example\",value:officer,onChange:handleOfficerSelect},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select Officer *--\"),staff.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.nameOfStaff);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"label\",null,\"Collection Date\"),/*#__PURE__*/React.createElement(CInput,{id:\"collectionDate\",type:\"date\",className:\"form-control text-center col-sm-12 mb-3\",\"aria-label\":\"Default select example\",value:collectionDate,onChange:handleDateChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-4 mb-3 figureDisplay justify-content-right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 col-sm-4\"},\"TOTAL OF ENTRIES : \",formatter.format(totalAmt))),/*#__PURE__*/React.createElement(Table,{className:\"table-lg col-sm-12\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Account Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Loan ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"Amount\"))),/*#__PURE__*/React.createElement(\"tbody\",null,collectionSheet.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.accountNumber),/*#__PURE__*/React.createElement(\"td\",null,c.customer),/*#__PURE__*/React.createElement(\"td\",null,c.loanId),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Amount)));}))))),/*#__PURE__*/React.createElement(CButton,{className:\"float-right m-3 col-sm-2\",color:\"success\",onClick:function onClick(){return openCustomerListAsReport(reportUrl+'/dailyEntry.aspx?'+officer+'?'+collectionDate);}},\"Show As Report\"))))));};export default DailyEntryReport;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/dailyEntryReport.jsx"],"names":["React","useState","useEffect","Modal","Link","useNavigate","Navigate","axios","moment","Joi","CurrencyFormat","Swal","auth","apiUrl","reportUrl","AdaboSelect","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","DailyEntryReport","show","setShow","render","setRender","collectionSheet","setCollectionSheet","officer","setOfficer","staff","setStaff","Date","toISOString","slice","collectionDate","setCollectionDate","user","getCurrentUser","formatter","Intl","NumberFormat","style","currency","getStaff","get","results","data","money","today","month","toLocaleString","day","getDate","year","getFullYear","add","accumulator","a","handleDateChange","e","currentTarget","value","console","log","totalAmt","reduce","i","Amount","openCustomerListAsReport","url","windowFeatures","window","open","handleOfficerSelect","c","map","b","id","nameOfStaff","format","index","accountNumber","customer","loanId"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Modal } from 'react-bootstrap'\nimport { Link, useNavigate, Navigate } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport Joi from 'joi-browser'\nimport CurrencyFormat from 'react-currency-format'\nimport Swal from 'sweetalert2'\nimport auth from '../../components/services/authService'\nimport { apiUrl } from '../../config.json'\nimport { reportUrl } from '../../config.json'\nimport AdaboSelect from 'react-select'\nimport '../../../src/schedulecards.css'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nconst DailyEntryReport = () => {\n  const [show, setShow] = useState(false)\n  const [render, setRender] = useState(false)\n  const [collectionSheet, setCollectionSheet] = useState([])\n  const [officer, setOfficer] = useState(0)\n  const [staff, setStaff] = useState([])\n  const [collectionDate, setCollectionDate] = useState(\n    new Date().toISOString().slice(0, 10),\n  )\n  const user = auth.getCurrentUser()\n\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  useEffect(() => {\n    async function getStaff() {\n      const results = await axios.get(apiUrl + '/setup/staff')\n      setStaff(results.data)\n    }\n\n    getStaff()\n  }, [])\n\n  /*useEffect(() => {\n    async function getCollectionSheet() {\n      const results = await axios.get(\n        apiUrl + '/loanreports/dailyEntry/' + officer + '/' + collectionDate,\n      )\n      setCollectionSheet(results.data)\n    }\n    getCollectionSheet()\n    console.log(collectionSheet)\n  }, [collectionDate, officer])\n  */\n\n  const money = new Intl.NumberFormat('de-CH', {\n    style: 'currency',\n    currency: 'CHF',\n  })\n\n  var today = new Date()\n\n  // returns the month (from 0 to 11)\n  const month = today.toLocaleString('default', { month: 'long' })\n\n  // returns the day of the month (from 1 to 31)\n  const day = today.getDate()\n\n  // returns the year (four digits)\n  const year = today.getFullYear()\n\n  function add(accumulator, a) {\n    return accumulator + a\n  }\n\n  const handleDateChange = async (e) => {\n    setCollectionDate(e.currentTarget.value)\n    const results = await axios.get(\n      apiUrl +\n        '/loanreports/dailyEntry/' +\n        officer +\n        '/' +\n        e.currentTarget.value,\n    )\n    setCollectionSheet(results.data)\n    console.log(collectionSheet)\n  }\n\n  const totalAmt = collectionSheet.reduce((a, i) => {\n    return a + i.Amount\n  }, 0)\n\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=350,height=320'\n    window.open(url, 'Daily Entry Report', 'popup', windowFeatures)\n  }\n\n  const handleOfficerSelect = async (c) => {\n    setOfficer(c.currentTarget.value)\n    const results = await axios.get(\n      apiUrl +\n        '/loanreports/dailyEntry/' +\n        c.currentTarget.value +\n        '/' +\n        collectionDate,\n    )\n    setCollectionSheet(results.data)\n    //setOfficer(c.nameOfStaff);\n    // setShow(!show);\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"m-3\">\n        <div className=\"mb-3\">\n          <CRow>\n            <CCol lg={12}>\n              <CCard lg={12}>\n                <CCardHeader className=\"text-right\">\n                  <div className=\"row justify-content-center\">\n                    <h4 className=\"centertext mb-2\">DAILY ENTRY REPORT</h4>\n                  </div>\n                </CCardHeader>\n                <CCardBody>\n                  <div class=\"mb-3 row\">\n                    <CSelect\n                      className=\"form-select col-sm-12 mb-3\"\n                      aria-label=\"Default select example\"\n                      value={officer}\n                      onChange={handleOfficerSelect}\n                    >\n                      <option defaultValue=\"\">--Select Officer *--</option>\n                      {staff.map((b) => (\n                        <option key={b.id} value={b.id} id={b.id}>\n                          {b.nameOfStaff}\n                        </option>\n                      ))}\n                    </CSelect>\n                  </div>\n                  {/* <p className=\"mt-3\">\n                    Date: {moment(collectionDate).format('DD,MMMM,YYYY')}\n                      </p>*/}\n                  <div className=\"row mb-3\">\n                    <label>Collection Date</label>\n                    <CInput\n                      id=\"collectionDate\"\n                      type=\"date\"\n                      className=\"form-control text-center col-sm-12 mb-3\"\n                      aria-label=\"Default select example\"\n                      value={collectionDate}\n                      onChange={handleDateChange}\n                    />\n                  </div>\n\n                  <div className=\"col-sm-4 mb-3 figureDisplay justify-content-right\"></div>\n                  <div className=\"mb-3 col-sm-12\">\n                    <div className=\"mb-3 col-sm-4\">\n                      TOTAL OF ENTRIES : {formatter.format(totalAmt)}\n                    </div>\n                  </div>\n                  <Table className=\"table-lg col-sm-12\">\n                    <thead>\n                      <tr className=\"\">\n                        <th></th>\n                        <th>Account Number</th>\n                        <th>Name</th>\n                        <th>Loan ID</th>\n                        <th>Amount</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {collectionSheet.map((c, index) => (\n                        <tr key={c.id}>\n                          <td>{index + 1}</td>\n                          <td>{c.accountNumber}</td>\n                          <td>{c.customer}</td>\n                          <td>{c.loanId}</td>\n                          <td>{formatter.format(c.Amount)}</td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </Table>\n                </CCardBody>\n              </CCard>\n              <CButton\n                className=\"float-right m-3 col-sm-2\"\n                color=\"success\"\n                onClick={() =>\n                  openCustomerListAsReport(\n                    reportUrl +\n                      '/dailyEntry.aspx?' +\n                      officer +\n                      '?' +\n                      collectionDate,\n                  )\n                }\n              >\n                Show As Report\n              </CButton>\n            </CCol>\n          </CRow>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default DailyEntryReport\n"]},"metadata":{},"sourceType":"module"}
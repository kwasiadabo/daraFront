{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loansDisbursed.jsx\";\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Link, useHistory, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { apiUrl, reportUrl } from '../../config.json';\nimport auth from '../../components/services/authService';\nimport Joi from 'joi-browser';\nimport Swal from 'sweetalert2';\nimport formData from 'form-data'; //import '../../table.css'\n//import Pagination from '../pagination'\n//import { paginate } from '../paginate'\n//import { ComponentToPrint } from \"./ComponentToPrint\";\n\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup, ButtonDropdowns //CForm,\n, CDropdownDivider, CInputCheckbox, CLink } from '@coreui/react';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from 'reactstrap';\n\nvar LoansDisbursed = function LoansDisbursed() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      loansDisbursed = _useState2[0],\n      setLoansDisbursed = _useState2[1];\n\n  var _useState3 = useState(new Date().toISOString().slice(0, 10)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      startDate = _useState4[0],\n      setStartDate = _useState4[1];\n\n  var _useState5 = useState(new Date().toISOString().slice(0, 10)),\n      _useState6 = _slicedToArray(_useState5, 2),\n      endDate = _useState6[0],\n      setEndDate = _useState6[1];\n\n  var navigate = useHistory();\n  useEffect(function () {\n    function getLoansDisbursed() {\n      return _getLoansDisbursed.apply(this, arguments);\n    }\n\n    function _getLoansDisbursed() {\n      _getLoansDisbursed = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(apiUrl + '/loanreports/loansDisbursed/' + startDate + '/' + endDate);\n\n              case 2:\n                results = _context.sent;\n                setLoansDisbursed(results.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getLoansDisbursed.apply(this, arguments);\n    }\n\n    getLoansDisbursed();\n  }, [startDate, endDate]);\n\n  var openCustomerListAsReport = function openCustomerListAsReport(url) {\n    var windowFeatures = 'left=100,top=100,width=320,height=320';\n    window.open(url, 'customerlist', 'popup', windowFeatures);\n  };\n\n  var formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS' // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\n  });\n\n  var handleStartDateChange = function handleStartDateChange(e) {\n    setStartDate(e.currentTarget.value);\n  };\n\n  var handleEndDateChange = function handleEndDateChange(e) {\n    setEndDate(e.currentTarget.value);\n  };\n\n  var totalPrincipal = loansDisbursed.reduce(function (a, i) {\n    return a + i.principal;\n  }, 0);\n  var totalInterest = loansDisbursed.reduce(function (a, i) {\n    return a + i.interestRate;\n  }, 0);\n  var totalProcessingFee = loansDisbursed.reduce(function (a, i) {\n    return a + i.processingFee;\n  }, 0);\n  var totalRegistrationFee = loansDisbursed.reduce(function (a, i) {\n    return a + i.registrationFee;\n  }, 0);\n  var totalCollateral = loansDisbursed.reduce(function (a, i) {\n    return a + i.collateral;\n  }, 0);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, \"Loans Disbursed\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3 row mt-5 col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"dateOnCheque\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, \"Start Date\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    class: \"form-control\",\n    id: \"dateOnCheque\",\n    value: startDate,\n    onChange: handleStartDateChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"dateOnCheque\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, \"End Date\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    class: \"form-control\",\n    id: \"dateOnCheque\",\n    value: endDate,\n    onChange: handleEndDateChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-3 \",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Total Principal:\", ' ', /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, formatter.format(totalPrincipal))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, \"Total Interest Rate:\", ' ', /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, formatter.format(totalInterest))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }\n  }, \"Total Processing Fee:\", ' ', /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 15\n    }\n  }, formatter.format(totalProcessingFee))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, \"Total registration Fee:\", ' ', /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, formatter.format(totalRegistrationFee))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-4 text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, \"Total Collateral:\", ' ', /*#__PURE__*/React.createElement(\"strong\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, formatter.format(totalCollateral))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"table-responsive\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    color: \"success\",\n    className: \"col-sm-2 float-right btn-sm mb-3\",\n    onClick: function onClick() {\n      return openCustomerListAsReport(reportUrl + '/loansDisbursed.aspx?' + startDate + '?' + endDate);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }\n  }, \"View as Report\"), /*#__PURE__*/React.createElement(Table, {\n    className: \"table-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }, \"Loan ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, \"Principal\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 17\n    }\n  }, \"Interest Rate\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 17\n    }\n  }, \"Proc. Fee\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"Reg. Fee\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  }, \"Collateral\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, loansDisbursed.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.idNumber // onClick={() => customerView(c)}\n      ,\n      Style: \"cursor: pointer;\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 19\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 19\n      }\n    }, c.tDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 19\n      }\n    }, c.Customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 19\n      }\n    }, c.loanId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 19\n      }\n    }, formatter.format(c.principal)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 19\n      }\n    }, formatter.format(c.interestRate)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 19\n      }\n    }, formatter.format(c.processingFee)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 19\n      }\n    }, formatter.format(c.registrationFee)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 19\n      }\n    }, formatter.format(c.collateral)));\n  }))))));\n}; //  <td>{moment(s.startDate).format(\"DD,MMMM,YYYY\")}</td>\n\n\nexport default LoansDisbursed;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loansDisbursed.jsx"],"names":["React","useState","useEffect","useRef","Link","useHistory","useNavigate","axios","moment","apiUrl","reportUrl","auth","Joi","Swal","formData","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","ButtonDropdowns","CDropdownDivider","CInputCheckbox","CLink","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","LoansDisbursed","loansDisbursed","setLoansDisbursed","Date","toISOString","slice","startDate","setStartDate","endDate","setEndDate","navigate","getLoansDisbursed","get","results","data","openCustomerListAsReport","url","windowFeatures","window","open","formatter","Intl","NumberFormat","style","currency","handleStartDateChange","e","currentTarget","value","handleEndDateChange","totalPrincipal","reduce","a","i","principal","totalInterest","interestRate","totalProcessingFee","processingFee","totalRegistrationFee","registrationFee","totalCollateral","collateral","format","map","c","index","idNumber","tDate","Customer","loanId"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,WAA3B,QAA8C,kBAA9C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,mBAAlC;AACA,OAAOC,IAAP,MAAiB,uCAAjB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,QAAP,MAAqB,WAArB,C,CAEA;AAEA;AACA;AAEA;;AACA,SACEC,MADF,EAEEC,KAFF,EAGEC,SAHF,CAIE;AAJF,EAKEC,IALF,EAMEC,UANF,EAOEC,IAPF,EAQEC,OARF,EASEC,MATF,EAUEC,YAVF,EAWEC,YAXF,EAYEC,UAZF,EAaEC,WAbF,EAcEC,iBAdF,EAeEC,kBAfF,EAgBEC,aAhBF,EAiBEC,KAjBF,CAkBE;AAlBF,EAmBEC,eAnBF,CAoBE;AApBF,EAqBEC,SArBF,EAsBEC,WAtBF,CAuBE;AACA;AAxBF,EAyBEC,UAzBF,EA0BEC,MA1BF,CA2BE;AA3BF,EA4BEC,MA5BF,CA6BE;AA7BF,EA8BEC,OA9BF,EA+BEC,aA/BF,CAgCE;AAhCF,EAiCEC,WAjCF,EAkCEC,eAlCF,CAmCE;AAnCF,EAoCEC,gBApCF,EAqCEC,cArCF,EAsCEC,KAtCF,QAuCO,eAvCP;AAyCA,SACEC,GADF,EAEEC,GAFF,EAGEC,KAHF,EAIEC,QAJF,EAKEC,MALF,EAMEC,0BANF,EAOEC,YAPF,EAQEC,cARF,EASEC,YATF,EAUEC,KAVF,EAWEC,KAXF,EAYEC,KAZF,QAaO,YAbP;;AAeA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAAA,kBACiBvD,QAAQ,CAAC,EAAD,CADzB;AAAA;AAAA,MACpBwD,cADoB;AAAA,MACJC,iBADI;;AAAA,mBAEOzD,QAAQ,CACxC,IAAI0D,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,CAA/B,EAAkC,EAAlC,CADwC,CAFf;AAAA;AAAA,MAEpBC,SAFoB;AAAA,MAETC,YAFS;;AAAA,mBAKG9D,QAAQ,CAAC,IAAI0D,IAAJ,GAAWC,WAAX,GAAyBC,KAAzB,CAA+B,CAA/B,EAAkC,EAAlC,CAAD,CALX;AAAA;AAAA,MAKpBG,OALoB;AAAA,MAKXC,UALW;;AAM3B,MAAIC,QAAQ,GAAG7D,UAAU,EAAzB;AAEAH,EAAAA,SAAS,CAAC,YAAM;AAAA,aACCiE,iBADD;AAAA;AAAA;;AAAA;AAAA,oFACd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACwB5D,KAAK,CAAC6D,GAAN,CACpB3D,MAAM,GAAG,8BAAT,GAA0CqD,SAA1C,GAAsD,GAAtD,GAA4DE,OADxC,CADxB;;AAAA;AACQK,gBAAAA,OADR;AAIEX,gBAAAA,iBAAiB,CAACW,OAAO,CAACC,IAAT,CAAjB;;AAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADc;AAAA;AAAA;;AAOdH,IAAAA,iBAAiB;AAClB,GARQ,EAQN,CAACL,SAAD,EAAYE,OAAZ,CARM,CAAT;;AAUA,MAAMO,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,GAAD,EAAS;AACxC,QAAMC,cAAc,GAAG,uCAAvB;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYH,GAAZ,EAAiB,cAAjB,EAAiC,OAAjC,EAA0CC,cAA1C;AACD,GAHD;;AAIA,MAAIG,SAAS,GAAG,IAAIC,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA+B;AAC7CC,IAAAA,KAAK,EAAE,UADsC;AAE7CC,IAAAA,QAAQ,EAAE,KAFmC,CAI7C;AACA;AACA;;AAN6C,GAA/B,CAAhB;;AASA,MAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACC,CAAD,EAAO;AACnCnB,IAAAA,YAAY,CAACmB,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAZ;AACD,GAFD;;AAGA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACH,CAAD,EAAO;AACjCjB,IAAAA,UAAU,CAACiB,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAV;AACD,GAFD;;AAIA,MAAME,cAAc,GAAG7B,cAAc,CAAC8B,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACrD,WAAOD,CAAC,GAAGC,CAAC,CAACC,SAAb;AACD,GAFsB,EAEpB,CAFoB,CAAvB;AAIA,MAAMC,aAAa,GAAGlC,cAAc,CAAC8B,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpD,WAAOD,CAAC,GAAGC,CAAC,CAACG,YAAb;AACD,GAFqB,EAEnB,CAFmB,CAAtB;AAIA,MAAMC,kBAAkB,GAAGpC,cAAc,CAAC8B,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACzD,WAAOD,CAAC,GAAGC,CAAC,CAACK,aAAb;AACD,GAF0B,EAExB,CAFwB,CAA3B;AAIA,MAAMC,oBAAoB,GAAGtC,cAAc,CAAC8B,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC3D,WAAOD,CAAC,GAAGC,CAAC,CAACO,eAAb;AACD,GAF4B,EAE1B,CAF0B,CAA7B;AAIA,MAAMC,eAAe,GAAGxC,cAAc,CAAC8B,MAAf,CAAsB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACtD,WAAOD,CAAC,GAAGC,CAAC,CAACS,UAAb;AACD,GAFuB,EAErB,CAFqB,CAAxB;AAIA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAK,IAAA,KAAK,EAAC,yBAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,cAAhB;AAA+B,IAAA,SAAS,EAAC,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAC,cAFR;AAGE,IAAA,EAAE,EAAC,cAHL;AAIE,IAAA,KAAK,EAAEpC,SAJT;AAKE,IAAA,QAAQ,EAAEmB,qBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,eAaE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,cAAhB;AAA+B,IAAA,SAAS,EAAC,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbF,eAgBE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAC,cAFR;AAGE,IAAA,EAAE,EAAC,cAHL;AAIE,IAAA,KAAK,EAAEjB,OAJT;AAKE,IAAA,QAAQ,EAAEqB,mBALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAhBF,eAyBE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACmB,GADnB,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAST,SAAS,CAACuB,MAAV,CAAiBb,cAAjB,CAAT,CAFF,CADF,eAKE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACuB,GADvB,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASV,SAAS,CAACuB,MAAV,CAAiBR,aAAjB,CAAT,CAFF,CALF,eASE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BACwB,GADxB,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASf,SAAS,CAACuB,MAAV,CAAiBN,kBAAjB,CAAT,CAFF,CATF,eAaE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAC0B,GAD1B,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASjB,SAAS,CAACuB,MAAV,CAAiBJ,oBAAjB,CAAT,CAFF,CAbF,eAiBE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACoB,GADpB,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASnB,SAAS,CAACuB,MAAV,CAAiBF,eAAjB,CAAT,CAFF,CAjBF,CAzBF,CAFF,eAkDE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AACE,IAAA,KAAK,EAAC,SADR;AAEE,IAAA,SAAS,EAAC,kCAFZ;AAGE,IAAA,OAAO,EAAE;AAAA,aACP1B,wBAAwB,CACtB7D,SAAS,GAAG,uBAAZ,GAAsCoD,SAAtC,GAAkD,GAAlD,GAAwDE,OADlC,CADjB;AAAA,KAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAYE,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBATF,CADF,CADF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGP,cAAc,CAAC2C,GAAf,CAAmB,UAACC,CAAD,EAAIC,KAAJ;AAAA,wBAClB;AACE,MAAA,GAAG,EAAED,CAAC,CAACE,QADT,CAEE;AAFF;AAGE,MAAA,KAAK,EAAC,kBAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,KAAK,GAAG,CAAb,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,CAAC,CAACG,KAAP,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKH,CAAC,CAACI,QAAP,CAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKJ,CAAC,CAACK,MAAP,CARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAK9B,SAAS,CAACuB,MAAV,CAAiBE,CAAC,CAACX,SAAnB,CAAL,CATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKd,SAAS,CAACuB,MAAV,CAAiBE,CAAC,CAACT,YAAnB,CAAL,CAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKhB,SAAS,CAACuB,MAAV,CAAiBE,CAAC,CAACP,aAAnB,CAAL,CAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKlB,SAAS,CAACuB,MAAV,CAAiBE,CAAC,CAACL,eAAnB,CAAL,CAZF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKpB,SAAS,CAACuB,MAAV,CAAiBE,CAAC,CAACH,UAAnB,CAAL,CAbF,CADkB;AAAA,GAAnB,CADH,CAdF,CAZF,CAlDF,CADF,CADF;AAsGD,CAhKD,C,CAkKA;;;AACA,eAAe1C,cAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport { Link, useHistory, useNavigate } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport { apiUrl, reportUrl } from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Joi from 'joi-browser'\nimport Swal from 'sweetalert2'\nimport formData from 'form-data'\n\n//import '../../table.css'\n\n//import Pagination from '../pagination'\n//import { paginate } from '../paginate'\n\n//import { ComponentToPrint } from \"./ComponentToPrint\";\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  ButtonDropdowns,\n  //CForm,\n  CDropdownDivider,\n  CInputCheckbox,\n  CLink,\n} from '@coreui/react'\n\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\n\nconst LoansDisbursed = () => {\n  const [loansDisbursed, setLoansDisbursed] = useState([])\n  const [startDate, setStartDate] = useState(\n    new Date().toISOString().slice(0, 10),\n  )\n  const [endDate, setEndDate] = useState(new Date().toISOString().slice(0, 10))\n  let navigate = useHistory()\n\n  useEffect(() => {\n    async function getLoansDisbursed() {\n      const results = await axios.get(\n        apiUrl + '/loanreports/loansDisbursed/' + startDate + '/' + endDate,\n      )\n      setLoansDisbursed(results.data)\n    }\n    getLoansDisbursed()\n  }, [startDate, endDate])\n\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=320,height=320'\n    window.open(url, 'customerlist', 'popup', windowFeatures)\n  }\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  const handleStartDateChange = (e) => {\n    setStartDate(e.currentTarget.value)\n  }\n  const handleEndDateChange = (e) => {\n    setEndDate(e.currentTarget.value)\n  }\n\n  const totalPrincipal = loansDisbursed.reduce((a, i) => {\n    return a + i.principal\n  }, 0)\n\n  const totalInterest = loansDisbursed.reduce((a, i) => {\n    return a + i.interestRate\n  }, 0)\n\n  const totalProcessingFee = loansDisbursed.reduce((a, i) => {\n    return a + i.processingFee\n  }, 0)\n\n  const totalRegistrationFee = loansDisbursed.reduce((a, i) => {\n    return a + i.registrationFee\n  }, 0)\n\n  const totalCollateral = loansDisbursed.reduce((a, i) => {\n    return a + i.collateral\n  }, 0)\n\n  return (\n    <div>\n      <div className=\"col-sm-12 mt-3\">\n        <h3>Loans Disbursed</h3>\n        <div class=\"mb-3 row mt-5 col-sm-12\">\n          <CLabel htmlFor=\"dateOnCheque\" className=\"form-label\">\n            Start Date\n          </CLabel>\n          <div className=\"col-sm-3\">\n            <CInput\n              type=\"date\"\n              class=\"form-control\"\n              id=\"dateOnCheque\"\n              value={startDate}\n              onChange={handleStartDateChange}\n            />\n          </div>\n          <CLabel htmlFor=\"dateOnCheque\" className=\"form-label\">\n            End Date\n          </CLabel>\n          <div className=\"col-sm-3\">\n            <CInput\n              type=\"date\"\n              class=\"form-control\"\n              id=\"dateOnCheque\"\n              value={endDate}\n              onChange={handleEndDateChange}\n            />\n          </div>\n          <div className=\"row mt-3 \">\n            <div className=\"col-sm-4 text-right\">\n              Total Principal:{' '}\n              <strong>{formatter.format(totalPrincipal)}</strong>\n            </div>\n            <div className=\"col-sm-4 text-right\">\n              Total Interest Rate:{' '}\n              <strong>{formatter.format(totalInterest)}</strong>\n            </div>\n            <div className=\"col-sm-4 text-right\">\n              Total Processing Fee:{' '}\n              <strong>{formatter.format(totalProcessingFee)}</strong>\n            </div>\n            <div className=\"col-sm-4 text-right\">\n              Total registration Fee:{' '}\n              <strong>{formatter.format(totalRegistrationFee)}</strong>\n            </div>\n            <div className=\"col-sm-4 text-right\">\n              Total Collateral:{' '}\n              <strong>{formatter.format(totalCollateral)}</strong>\n            </div>\n          </div>\n        </div>\n        <div className=\"table-responsive\">\n          <CButton\n            color=\"success\"\n            className=\"col-sm-2 float-right btn-sm mb-3\"\n            onClick={() =>\n              openCustomerListAsReport(\n                reportUrl + '/loansDisbursed.aspx?' + startDate + '?' + endDate,\n              )\n            }\n          >\n            View as Report\n          </CButton>\n          <Table className=\"table-sm\">\n            <thead>\n              <tr className=\"fs-sm\">\n                <th></th>\n                <th>Date</th>\n                <th>Customer</th>\n                <th>Loan ID</th>\n                <th>Principal</th>\n                <th>Interest Rate</th>\n                <th>Proc. Fee</th>\n                <th>Reg. Fee</th>\n                <th>Collateral</th>\n              </tr>\n            </thead>\n            <tbody>\n              {loansDisbursed.map((c, index) => (\n                <tr\n                  key={c.idNumber}\n                  // onClick={() => customerView(c)}\n                  Style=\"cursor: pointer;\"\n                >\n                  <td>{index + 1}</td>\n                  <td>{c.tDate}</td>\n                  <td>{c.Customer}</td>\n                  <td>{c.loanId}</td>\n                  <td>{formatter.format(c.principal)}</td>\n                  <td>{formatter.format(c.interestRate)}</td>\n                  <td>{formatter.format(c.processingFee)}</td>\n                  <td>{formatter.format(c.registrationFee)}</td>\n                  <td>{formatter.format(c.collateral)}</td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n//  <td>{moment(s.startDate).format(\"DD,MMMM,YYYY\")}</td>\nexport default LoansDisbursed\n"]},"metadata":{},"sourceType":"module"}
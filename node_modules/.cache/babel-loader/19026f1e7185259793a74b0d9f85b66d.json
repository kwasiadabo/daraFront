{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import Joi from'joi-browser';import moment from'moment';import momentBusinessDays from'moment-business-days';import baseUrl from'../../config.json';import auth from'../../components/services/authService';import Swal from'sweetalert2';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';function Branches(){var _useState=useState({branch:'',location:'',gps:'',phone:''}),_useState2=_slicedToArray(_useState,2),branch=_useState2[0],setBranch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),branches=_useState4[0],setBranches=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editMode=_useState6[0],setEditMode=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),render=_useState8[0],setRender=_useState8[1];useEffect(function(){function getBranches(){return _getBranches.apply(this,arguments);}function _getBranches(){_getBranches=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl.apiUrl+'/setup/branch');case 2:results=_context.sent;setBranches(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getBranches.apply(this,arguments);}getBranches();},[render]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(branch);e.preventDefault();_context2.prev=2;_context2.next=5;return axios.post(baseUrl.apiUrl+'/setup/branch',branch);case 5:results=_context2.sent;if(!(results.status!==200)){_context2.next=10;break;}return _context2.abrupt(\"return\",Swal.fire('OOPS','Submission Failed ! Check Entries and try again !','error'));case 10:Swal.fire('Success','Branch Saved Successfully','success');setBranch({branch:'',location:'',gps:'',phone:''});setRender(!render);case 13:_context2.next=18;break;case 15:_context2.prev=15;_context2.t0=_context2[\"catch\"](2);Swal.fire('OOPS ! '+_context2.t0,'error');case 18:case\"end\":return _context2.stop();}}},_callee2,null,[[2,15]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handleOnEdit=function handleOnEdit(p){setEditMode(true);setBranch({branch:p.branch,location:p.location,gps:p.GPS,phone:p.phone,id:p.id});//setDisabled(!disabled);\n};var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(branch);if(!(branch.branch!=='')){_context3.next=21;break;}_context3.prev=2;_context3.next=5;return axios.put(baseUrl.apiUrl+'/setup/branch',branch);case 5:results=_context3.sent;if(!(results.status!==200)){_context3.next=10;break;}return _context3.abrupt(\"return\",Swal.fire('OOPS !','Submission Failed ! Check Entries and try again !','error'));case 10:Swal.fire('Success','Branch Updated Successfully','success');setBranch({branch:'',location:'',gps:'',phone:''});setEditMode(false);setRender(!render);case 14:_context3.next=19;break;case 16:_context3.prev=16;_context3.t0=_context3[\"catch\"](2);Swal.fire('OOPS ! '+_context3.t0.message,'error');case 19:_context3.next=22;break;case 21:return _context3.abrupt(\"return\",Swal.fire('OOPS','Enter all Details !','error'));case 22:case\"end\":return _context3.stop();}}},_callee3,null,[[2,16]]);}));return function handleUpdate(_x2){return _ref2.apply(this,arguments);};}();var handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!(branch.branch!=='')){_context4.next=20;break;}_context4.prev=1;_context4.next=4;return axios.delete(baseUrl.apiUrl+'/setup/branch/'+branch.id);case 4:results=_context4.sent;if(!(results.status!==200)){_context4.next=9;break;}return _context4.abrupt(\"return\",Swal.fire('OOPS !','Submission Failed ! Check Entries and try again !','error'));case 9:Swal.fire('Success','Branch Deleted Successfully','success');setBranch({branch:'',location:'',gps:'',phone:''});setEditMode(false);setRender(!render);case 13:_context4.next=18;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](1);Swal.fire('OOPS ! '+_context4.t0.message,'error');case 18:_context4.next=21;break;case 20:return _context4.abrupt(\"return\",Swal.fire('OOPS','Select a Branch !','error'));case 21:case\"end\":return _context4.stop();}}},_callee4,null,[[1,15]]);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"p\",{className:\"staffp\"},\"A branch of a company can offer visibility and brand exposure which can positively influence a company's profits. A branch office can also reduce the risk of doing business in the host country by allowing the opportunity to test products in new markets.\"),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"branch\",className:\"col-sm-2\"},\"Branch\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-8\",id:\"branch\",value:branch.branch,onChange:function onChange(e){return setBranch(_objectSpread(_objectSpread({},branch),{},{branch:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"location\",className:\"col-sm-2\"},\"Location\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-8\",id:\"location\",value:branch.location,onChange:function onChange(e){return setBranch(_objectSpread(_objectSpread({},branch),{},{location:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"gps\",className:\"col-sm-2\"},\"Ghana Post GPS\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-8\",id:\"gps\",value:branch.gps,onChange:function onChange(e){return setBranch(_objectSpread(_objectSpread({},branch),{},{gps:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"phone\",className:\"col-sm-2\"},\"Phone\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"form-control col-sm-8\",id:\"phone\",value:branch.phone,onChange:function onChange(e){return setBranch(_objectSpread(_objectSpread({},branch),{},{phone:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},!editMode?/*#__PURE__*/React.createElement(CButton,{className:\"btn btn-primary col-sm-2 mt-3 btn-sm\",onClick:handleSubmit},\"Submit\"):null,editMode?/*#__PURE__*/React.createElement(CButton,{className:\"btn-sm m-3 col-sm-2\",color:\"success\",onClick:handleUpdate},\"Update\"):null,editMode&&/*#__PURE__*/React.createElement(CButton,{className:\"btn btn-danger col-sm-2 m-3 btn-sm\",onClick:handleDelete},\"Delete\")),/*#__PURE__*/React.createElement(Table,{className:\"sm mt-3 table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Branch\"),/*#__PURE__*/React.createElement(\"th\",null,\"Location\"),/*#__PURE__*/React.createElement(\"th\",null,\"GPS\"),/*#__PURE__*/React.createElement(\"th\",null,\"Phone\"))),/*#__PURE__*/React.createElement(\"tbody\",null,branches.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id,Style:\"cursor: pointer;\",onClick:function onClick(){return handleOnEdit(c);}},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.branch),/*#__PURE__*/React.createElement(\"td\",null,c.location),/*#__PURE__*/React.createElement(\"td\",null,c.GPS),/*#__PURE__*/React.createElement(\"td\",null,c.phone));}))));}export default Branches;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/branches.js"],"names":["React","useState","useEffect","axios","Joi","moment","momentBusinessDays","baseUrl","auth","Swal","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","Branches","branch","location","gps","phone","setBranch","branches","setBranches","editMode","setEditMode","render","setRender","getBranches","get","apiUrl","results","data","handleSubmit","e","console","log","preventDefault","post","status","fire","handleOnEdit","p","GPS","id","handleUpdate","put","message","handleDelete","delete","currentTarget","value","map","c","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport Joi from 'joi-browser'\nimport moment from 'moment'\nimport momentBusinessDays from 'moment-business-days'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nfunction Branches() {\n  const [branch, setBranch] = useState({\n    branch: '',\n    location: '',\n    gps: '',\n    phone: '',\n  })\n  const [branches, setBranches] = useState([])\n  const [editMode, setEditMode] = useState(false)\n  const [render, setRender] = useState(false)\n\n  useEffect(() => {\n    async function getBranches() {\n      const results = await axios.get(baseUrl.apiUrl + '/setup/branch')\n      setBranches(results.data)\n    }\n    getBranches()\n  }, [render])\n  const handleSubmit = async (e) => {\n    console.log(branch)\n    e.preventDefault()\n\n    try {\n      const results = await axios.post(baseUrl.apiUrl + '/setup/branch', branch)\n\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPS',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Success', 'Branch Saved Successfully', 'success')\n        setBranch({\n          branch: '',\n          location: '',\n          gps: '',\n          phone: '',\n        })\n        setRender(!render)\n      }\n    } catch (err) {\n      Swal.fire('OOPS ! ' + err, 'error')\n    }\n  }\n\n  const handleOnEdit = (p) => {\n    setEditMode(true)\n    setBranch({\n      branch: p.branch,\n      location: p.location,\n      gps: p.GPS,\n      phone: p.phone,\n      id: p.id,\n    })\n    //setDisabled(!disabled);\n  }\n\n  const handleUpdate = async (e) => {\n    console.log(branch)\n    if (branch.branch !== '') {\n      try {\n        const results = await axios.put(\n          baseUrl.apiUrl + '/setup/branch',\n          branch,\n        )\n        if (results.status !== 200) {\n          return Swal.fire(\n            'OOPS !',\n            'Submission Failed ! Check Entries and try again !',\n            'error',\n          )\n        } else {\n          Swal.fire('Success', 'Branch Updated Successfully', 'success')\n          setBranch({\n            branch: '',\n            location: '',\n            gps: '',\n            phone: '',\n          })\n          setEditMode(false)\n          setRender(!render)\n        }\n      } catch (err) {\n        Swal.fire('OOPS ! ' + err.message, 'error')\n      }\n    } else {\n      return Swal.fire('OOPS', 'Enter all Details !', 'error')\n    }\n  }\n\n  const handleDelete = async () => {\n    if (branch.branch !== '') {\n      try {\n        const results = await axios.delete(\n          baseUrl.apiUrl + '/setup/branch/' + branch.id,\n        )\n        if (results.status !== 200) {\n          return Swal.fire(\n            'OOPS !',\n            'Submission Failed ! Check Entries and try again !',\n            'error',\n          )\n        } else {\n          Swal.fire('Success', 'Branch Deleted Successfully', 'success')\n          setBranch({\n            branch: '',\n            location: '',\n            gps: '',\n            phone: '',\n          })\n          setEditMode(false)\n          setRender(!render)\n        }\n      } catch (err) {\n        Swal.fire('OOPS ! ' + err.message, 'error')\n      }\n    } else {\n      return Swal.fire('OOPS', 'Select a Branch !', 'error')\n    }\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <p className=\"staffp\">\n        A branch of a company can offer visibility and brand exposure which can\n        positively influence a company's profits. A branch office can also\n        reduce the risk of doing business in the host country by allowing the\n        opportunity to test products in new markets.\n      </p>\n      <CInputGroup className=\"mt-3\">\n        <CLabel htmlFor=\"branch\" className=\"col-sm-2\">\n          Branch\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"form-control col-sm-8\"\n          id=\"branch\"\n          value={branch.branch}\n          onChange={(e) =>\n            setBranch({\n              ...branch,\n              branch: e.currentTarget.value,\n            })\n          }\n        />\n      </CInputGroup>\n      <CInputGroup className=\"mt-3\">\n        <CLabel htmlFor=\"location\" className=\"col-sm-2\">\n          Location\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"form-control col-sm-8\"\n          id=\"location\"\n          value={branch.location}\n          onChange={(e) =>\n            setBranch({\n              ...branch,\n              location: e.currentTarget.value,\n            })\n          }\n        />\n      </CInputGroup>\n      <CInputGroup className=\"mt-3\">\n        <CLabel htmlFor=\"gps\" className=\"col-sm-2\">\n          Ghana Post GPS\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"form-control col-sm-8\"\n          id=\"gps\"\n          value={branch.gps}\n          onChange={(e) =>\n            setBranch({\n              ...branch,\n              gps: e.currentTarget.value,\n            })\n          }\n        />\n      </CInputGroup>\n      <CInputGroup className=\"mt-3\">\n        <CLabel htmlFor=\"phone\" className=\"col-sm-2\">\n          Phone\n        </CLabel>\n        <CInput\n          type=\"text\"\n          className=\"form-control col-sm-8\"\n          id=\"phone\"\n          value={branch.phone}\n          onChange={(e) =>\n            setBranch({\n              ...branch,\n              phone: e.currentTarget.value,\n            })\n          }\n        />\n      </CInputGroup>\n\n      <div className=\"row justify-content-center\">\n        {!editMode ? (\n          <CButton\n            className=\"btn btn-primary col-sm-2 mt-3 btn-sm\"\n            onClick={handleSubmit}\n          >\n            Submit\n          </CButton>\n        ) : null}\n        {editMode ? (\n          <CButton\n            className=\"btn-sm m-3 col-sm-2\"\n            color=\"success\"\n            onClick={handleUpdate}\n          >\n            Update\n          </CButton>\n        ) : null}\n\n        {editMode && (\n          <CButton\n            className=\"btn btn-danger col-sm-2 m-3 btn-sm\"\n            onClick={handleDelete}\n          >\n            Delete\n          </CButton>\n        )}\n      </div>\n      <Table className=\"sm mt-3 table-sm\">\n        <thead>\n          <tr className=\"fs-sm\">\n            <th></th>\n            <th>Branch</th>\n            <th>Location</th>\n            <th>GPS</th>\n            <th>Phone</th>\n          </tr>\n        </thead>\n        <tbody>\n          {branches.map((c, index) => (\n            <tr\n              key={c.id}\n              Style=\"cursor: pointer;\"\n              onClick={() => handleOnEdit(c)}\n            >\n              <td>{index + 1}</td>\n              <td>{c.branch}</td>\n              <td>{c.location}</td>\n              <td>{c.GPS}</td>\n              <td>{c.phone}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default Branches\n"]},"metadata":{},"sourceType":"module"}
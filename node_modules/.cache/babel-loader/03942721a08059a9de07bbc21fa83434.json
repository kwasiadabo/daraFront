{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from'react';import{useSelector,useDispatch}from'react-redux';import axios from'axios';import moment from'moment';import Swal from'sweetalert2';import{apiUrl}from'../config.json';import{CCreateElement,CSidebar,CSidebarBrand,CSidebarNav,CSidebarNavDivider,CSidebarNavTitle,CSidebarMinimizer,CSidebarNavDropdown,CSidebarNavItem}from'@coreui/react';import auth from'../components/services/authService';import kbthlogo from'../assets/icons/dara.png';import CIcon from'@coreui/icons-react';import'src/sidebar.css';// sidebar nav config\nimport adminNav from'./_nav';import frontDesk from'./frontDesk';import supervisor from'./supervisor';import loanOfficer from'./loanOfficer';import recovery from'./recovery';var TheSidebar=function TheSidebar(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var show=useSelector(function(state){return state.sidebarShow;});var myUser=auth.getCurrentUser();var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userMenus=_useState4[0],setUserMenus=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),subMenus=_useState6[0],setSubMenus=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),userAccessMenus=_useState8[0],setUserAccessMenus=_useState8[1];var handleBackup=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(apiUrl+'/backup',{db:'Daraplus'});case 2:case\"end\":return _context.stop();}}},_callee);}));return function handleBackup(){return _ref.apply(this,arguments);};}();console.log(myUser);// useEffect(() => {\n// \tasync function getUserMenus() {\n// \t\t// const results = await axios.get(\n// \t\t// \tapiUrl + '/setup/userroles/menu/' + myUser.userRole + '/' + myUser.staff\n// \t\t// );\n// \t\tconst userResults = await axios.get(\n// \t\t\tapiUrl + '/setup/useraccess/' + myUser.staff\n// \t\t);\n// \t\t//setUserMenus(results.data);\n// \t\tsetUserAccessMenus(userResults.data);\n// \t\tconsole.log(userResults.data);\n// \t}\n// \tgetUserMenus();\n// }, [myUser.role]);\nsetInterval(function(){handleBackup();//code goes here that will be run every 5 seconds.\n},14400000);//console.log(Object.keys(myUser).length)\n//console.log(myUser);\n//const menus = userAccessMenus.length == 0 ? userMenus : userAccessMenus;\nvar myMenus=[//\ticon: <CIcon name=\"cil-file\" customClasses=\"c-sidebar-nav-icon\" /> does not work\n{_tag:'CSidebarNavDropdown',name:'CUSTOMER MGT',//to: '/home',\nicon:'cil-spreadsheet',_children:[{_tag:'CSidebarNavItem',name:'Customers List',to:'/customer/customerlist',//icon: 'cil-spreadsheet',\nlabel:true},{_tag:'CSidebarNavItem',name:'Re-assign Customers',to:'/customer/reassign',//icon: 'cilNotes',\nlabel:true}]},{_tag:'CSidebarNavDropdown',name:'LOAN MGT',route:'#',icon:'cilNotes',_children:[{_tag:'CSidebarNavItem',name:'Issue Loan Cheque',to:'/loan/issueloancheque',label:true//icon: 'cilNotes',\n},{_tag:'CSidebarNavItem',name:'Disburse Loan Cheque',to:'/loan/disburse',label:true//icon: 'cilNotes',\n},{_tag:'CSidebarNavItem',name:'Loan Booking',to:'/loan/loanbooking',label:true//icon: 'cilNotes',\n},{_tag:'CSidebarNavItem',name:'Remove Loan Booking',to:'/loan/removeLoanBooking',label:true//icon: 'cilNotes',\n},{_tag:'CSidebarNavItem',name:'Loan Rescheduling',to:'/rescheduling',label:true//icon: 'cilNotes',\n}]},{_tag:'CSidebarNavItem',name:'Adabo Funtions',to:'/rescheduling',label:true//icon: 'cilNotes',\n}];return/*#__PURE__*/React.createElement(CSidebar,{className:\"sidebar\",show:show,onShowChange:function onShowChange(val){return dispatch({type:'set',sidebarShow:val});}},/*#__PURE__*/React.createElement(CSidebarBrand,{className:\"d-md-down-none\",to:\"/dashboard\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Dara Capital Consult\"),/*#__PURE__*/React.createElement(CIcon,{className:\"c-sidebar-brand-minimized\",name:\"sygnet\",height:30})),/*#__PURE__*/React.createElement(CSidebarNav,null,/*#__PURE__*/React.createElement(CCreateElement,{className:\"items\",items://userMenus.length > 0 ? userMenus : adminNav\nmyUser.userRole=='Customer Service Officer'?frontDesk:myUser.userRole=='Supervisor'?supervisor:myUser.userRole=='Loan Officer'?loanOfficer:myUser.userRole=='Recovery Officer'?recovery:adminNav//myMenus\n//userMenus\n//userAccessMenus\n//adminNav\n,components:{CSidebarNavDivider:CSidebarNavDivider,CSidebarNavDropdown:CSidebarNavDropdown,CSidebarNavItem:CSidebarNavItem,CSidebarNavTitle:CSidebarNavTitle}})),/*#__PURE__*/React.createElement(CSidebarMinimizer,{className:\"c-d-md-down-none\"}));};export default React.memo(TheSidebar);","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/containers/TheSidebar.js"],"names":["React","useState","useEffect","useRef","useSelector","useDispatch","axios","moment","Swal","apiUrl","CCreateElement","CSidebar","CSidebarBrand","CSidebarNav","CSidebarNavDivider","CSidebarNavTitle","CSidebarMinimizer","CSidebarNavDropdown","CSidebarNavItem","auth","kbthlogo","CIcon","adminNav","frontDesk","supervisor","loanOfficer","recovery","TheSidebar","user","setUser","dispatch","show","state","sidebarShow","myUser","getCurrentUser","userMenus","setUserMenus","subMenus","setSubMenus","userAccessMenus","setUserAccessMenus","handleBackup","post","db","console","log","setInterval","myMenus","_tag","name","icon","_children","to","label","route","val","type","userRole","memo"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Swal from 'sweetalert2';\nimport { apiUrl } from '../config.json';\nimport {\n\tCCreateElement,\n\tCSidebar,\n\tCSidebarBrand,\n\tCSidebarNav,\n\tCSidebarNavDivider,\n\tCSidebarNavTitle,\n\tCSidebarMinimizer,\n\tCSidebarNavDropdown,\n\tCSidebarNavItem,\n} from '@coreui/react';\nimport auth from '../components/services/authService';\nimport kbthlogo from '../assets/icons/dara.png';\nimport CIcon from '@coreui/icons-react';\nimport 'src/sidebar.css';\n// sidebar nav config\nimport adminNav from './_nav';\nimport frontDesk from './frontDesk';\nimport supervisor from './supervisor';\nimport loanOfficer from './loanOfficer';\nimport recovery from './recovery';\n\nconst TheSidebar = () => {\n\tconst [user, setUser] = useState({});\n\tconst dispatch = useDispatch();\n\tconst show = useSelector((state) => state.sidebarShow);\n\tconst myUser = auth.getCurrentUser();\n\tconst [userMenus, setUserMenus] = useState([]);\n\tconst [subMenus, setSubMenus] = useState([]);\n\tconst [userAccessMenus, setUserAccessMenus] = useState([]);\n\n\tconst handleBackup = async () => {\n\t\tawait axios.post(apiUrl + '/backup', {\n\t\t\tdb: 'Daraplus',\n\t\t});\n\t};\n\tconsole.log(myUser);\n\n\t// useEffect(() => {\n\t// \tasync function getUserMenus() {\n\t// \t\t// const results = await axios.get(\n\t// \t\t// \tapiUrl + '/setup/userroles/menu/' + myUser.userRole + '/' + myUser.staff\n\t// \t\t// );\n\t// \t\tconst userResults = await axios.get(\n\t// \t\t\tapiUrl + '/setup/useraccess/' + myUser.staff\n\t// \t\t);\n\t// \t\t//setUserMenus(results.data);\n\t// \t\tsetUserAccessMenus(userResults.data);\n\t// \t\tconsole.log(userResults.data);\n\t// \t}\n\t// \tgetUserMenus();\n\t// }, [myUser.role]);\n\n\tsetInterval(function () {\n\t\thandleBackup();\n\t\t//code goes here that will be run every 5 seconds.\n\t}, 14400000);\n\n\t//console.log(Object.keys(myUser).length)\n\t//console.log(myUser);\n\t//const menus = userAccessMenus.length == 0 ? userMenus : userAccessMenus;\n\n\tlet myMenus = [\n\t\t//\ticon: <CIcon name=\"cil-file\" customClasses=\"c-sidebar-nav-icon\" /> does not work\n\t\t{\n\t\t\t_tag: 'CSidebarNavDropdown',\n\t\t\tname: 'CUSTOMER MGT',\n\t\t\t//to: '/home',\n\t\t\ticon: 'cil-spreadsheet',\n\n\t\t\t_children: [\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Customers List',\n\t\t\t\t\tto: '/customer/customerlist',\n\t\t\t\t\t//icon: 'cil-spreadsheet',\n\t\t\t\t\tlabel: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Re-assign Customers',\n\t\t\t\t\tto: '/customer/reassign',\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t\tlabel: true,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\t_tag: 'CSidebarNavDropdown',\n\t\t\tname: 'LOAN MGT',\n\t\t\troute: '#',\n\t\t\ticon: 'cilNotes',\n\t\t\t_children: [\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Issue Loan Cheque',\n\t\t\t\t\tto: '/loan/issueloancheque',\n\t\t\t\t\tlabel: true,\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Disburse Loan Cheque',\n\t\t\t\t\tto: '/loan/disburse',\n\t\t\t\t\tlabel: true,\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t},\n\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Loan Booking',\n\t\t\t\t\tto: '/loan/loanbooking',\n\t\t\t\t\tlabel: true,\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Remove Loan Booking',\n\t\t\t\t\tto: '/loan/removeLoanBooking',\n\t\t\t\t\tlabel: true,\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t_tag: 'CSidebarNavItem',\n\t\t\t\t\tname: 'Loan Rescheduling',\n\t\t\t\t\tto: '/rescheduling',\n\t\t\t\t\tlabel: true,\n\t\t\t\t\t//icon: 'cilNotes',\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\t_tag: 'CSidebarNavItem',\n\t\t\tname: 'Adabo Funtions',\n\t\t\tto: '/rescheduling',\n\t\t\tlabel: true,\n\t\t\t//icon: 'cilNotes',\n\t\t},\n\t];\n\n\treturn (\n\t\t<CSidebar\n\t\t\tclassName=\"sidebar\"\n\t\t\tshow={show}\n\t\t\tonShowChange={(val) => dispatch({ type: 'set', sidebarShow: val })}\n\t\t>\n\t\t\t<CSidebarBrand className=\"d-md-down-none\" to=\"/dashboard\">\n\t\t\t\t<h5>Dara Capital Consult</h5>\n\n\t\t\t\t<CIcon\n\t\t\t\t\tclassName=\"c-sidebar-brand-minimized\"\n\t\t\t\t\tname=\"sygnet\"\n\t\t\t\t\theight={30}\n\t\t\t\t/>\n\t\t\t</CSidebarBrand>\n\t\t\t<CSidebarNav>\n\t\t\t\t<CCreateElement\n\t\t\t\t\tclassName=\"items\"\n\t\t\t\t\titems={\n\t\t\t\t\t\t//userMenus.length > 0 ? userMenus : adminNav\n\t\t\t\t\t\tmyUser.userRole == 'Customer Service Officer'\n\t\t\t\t\t\t\t? frontDesk\n\t\t\t\t\t\t\t: myUser.userRole == 'Supervisor'\n\t\t\t\t\t\t\t? supervisor\n\t\t\t\t\t\t\t: myUser.userRole == 'Loan Officer'\n\t\t\t\t\t\t\t? loanOfficer\n\t\t\t\t\t\t\t: myUser.userRole == 'Recovery Officer'\n\t\t\t\t\t\t\t? recovery\n\t\t\t\t\t\t\t: adminNav\n\t\t\t\t\t}\n\t\t\t\t\t//myMenus\n\t\t\t\t\t//userMenus\n\t\t\t\t\t//userAccessMenus\n\t\t\t\t\t//adminNav\n\n\t\t\t\t\tcomponents={{\n\t\t\t\t\t\tCSidebarNavDivider,\n\t\t\t\t\t\tCSidebarNavDropdown,\n\t\t\t\t\t\tCSidebarNavItem,\n\t\t\t\t\t\tCSidebarNavTitle,\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</CSidebarNav>\n\t\t\t<CSidebarMinimizer className=\"c-d-md-down-none\" />\n\t\t</CSidebar>\n\t);\n};\n\nexport default React.memo(TheSidebar);\n"]},"metadata":{},"sourceType":"module"}
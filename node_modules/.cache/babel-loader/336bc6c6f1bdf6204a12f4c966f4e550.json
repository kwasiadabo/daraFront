{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import moment from'moment';import Swal from'sweetalert2';import{apiUrl}from'../../config.json';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';function UserAccount(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState({username:'',name:'',role:'',branch:branch}),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),allAccounts=_useState6[0],setAllAccounts=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),roles=_useState8[0],setRoles=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),allStaff=_useState10[0],setAllStaff=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),branch=_useState12[0],setBranch=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),editMode=_useState14[0],setEditMode=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),regShow=_useState16[0],setRegShow=_useState16[1];var _useState17=useState({username:'',password:'pass1234',staff:0,branch:0,userRole:''}),_useState18=_slicedToArray(_useState17,2),userAccount=_useState18[0],setUserAccount=_useState18[1];useEffect(function(){function getStaff(){return _getStaff.apply(this,arguments);}function _getStaff(){_getStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var staff;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(apiUrl+'/setup/staff');case 2:staff=_context.sent;setAllStaff(staff.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getStaff.apply(this,arguments);}getStaff();},[]);useEffect(function(){function getUserRoles(){return _getUserRoles.apply(this,arguments);}function _getUserRoles(){_getUserRoles=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(apiUrl+'/setup/userroles');case 2:results=_context2.sent;setRoles(results.data);console.log(results.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _getUserRoles.apply(this,arguments);}getUserRoles();},[]);useEffect(function(){function getBranch(){return _getBranch.apply(this,arguments);}function _getBranch(){_getBranch=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var branch,allUserAccounts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(apiUrl+'/setup/branch');case 2:branch=_context3.sent;_context3.next=5;return axios.get(apiUrl+'/users/useraccounts');case 5:allUserAccounts=_context3.sent;setBranch(branch.data);setAllAccounts(allUserAccounts.data);//\tconsole.log(allUserAccounts);\ncase 8:case\"end\":return _context3.stop();}}},_callee3);}));return _getBranch.apply(this,arguments);}getBranch();genPassword();},[]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e){var results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();// console.log(userAccount)\n_context4.prev=1;_context4.next=4;return axios.post(apiUrl+'/setup/user',userAccount);case 4:results=_context4.sent;if(!(results.status!==200)){_context4.next=9;break;}return _context4.abrupt(\"return\",Swal.fire('Failed','Submission Failed ! Check Entries and try again !','error'));case 9:Swal.fire('Success','User Account Created Successfully','success');Swal.fire('Default Password','Default Password: '+userAccount.password+' : Change this on your first login.','info');setUserAccount({username:'',password:'pass1234',userRole:'',branch:0,staff:0});case 12:_context4.next=17;break;case 14:_context4.prev=14;_context4.t0=_context4[\"catch\"](1);Swal.fire('OOPS ! '+_context4.t0,'error');case 17:case\"end\":return _context4.stop();}}},_callee4,null,[[1,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var handlePasswordReset=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(id){var results;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return axios.put(apiUrl+'/setup/user/'+id,{password:'pass1234'});case 3:results=_context5.sent;if(!(results.status!==200)){_context5.next=8;break;}return _context5.abrupt(\"return\",Swal.fire('Failed','Submission Failed ! Check Entries and try again !','error'));case 8:Swal.fire('Success','Account Reset Successfully','success');Swal.fire('Default Password','Default Password: '+'pass1234'+' : Change this on your first login.','info');setUserAccount({username:'',password:'pass1234',userRole:'',branch:0,staff:0});case 11:_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](0);Swal.fire('OOPS ! '+_context5.t0,'error');case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[0,13]]);}));return function handlePasswordReset(_x2){return _ref2.apply(this,arguments);};}();function genPassword(){var chars='123456789abcdefghijklmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';var passwordLength=8;var tempPassword='';for(var i=0;i<=passwordLength;i++){var randomNumber=Math.floor(Math.random()*chars.length);tempPassword+=chars.substring(randomNumber,randomNumber+1);}setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{password:'pass1234'// confirmPassword: tempPassword,\n}));}var handleBackup=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var results;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return axios.post(apiUrl+'/backup',{db:'Daraplus'});case 2:results=_context6.sent;if(!(results.status!==200)){_context6.next=7;break;}return _context6.abrupt(\"return\",Swal.fire('Backup Failed','Db Back Failed ! try again !','error'));case 7:Swal.fire('Success','Backup Completed Successfully','success');case 8:case\"end\":return _context6.stop();}}},_callee6);}));return function handleBackup(){return _ref3.apply(this,arguments);};}();var handleOnEdit=function handleOnEdit(p){setEditMode(true);setUserAccount({// nameOfStaff: p.nameOfStaff,\n// phone: p.phone,\n// dob: new Date(p.dob).toISOString().slice(0, 10),\n// dateEmployed: new Date(p.dateEmployed).toISOString().slice(0, 10),\n// qualification: p.qualification,\n// guarantorOne: p.guarantorOne,\n// guarantorOnePhone: p.guarantorOnePhone,\n// guarantorTwo: p.guarantorTwo,\n// guarantorTwoPhone: p.guarantorTwoPhone,\n// id: p.id,\n});//setShow(!show);\n//setDisabled(!disabled);\n};var handleSearch=function handleSearch(event){setSearch(event.target.value);};var data={sAccounts:allAccounts.filter(function(item){return item.nameOfStaff.toLowerCase().includes(search.toLowerCase());})};var dataTouse=search.length===0?allAccounts:data.sAccounts;var getSelectedUser=function getSelectedUser(s){setRegShow(true);setUser({username:s.username,name:s.nameOfStaff,role:s.userRole,branch:s.branch});console.log(s);};return/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"centertext\"},\"Setup User Accounts\"),/*#__PURE__*/React.createElement(\"p\",{className:\"staffp mb-3\"},\"A user account is an established technique for connecting a user and an information service and/or computer network. User accounts determine whether or not a user can connect to a computer, network or similar networks.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"phoneworship\",className:\"form-label col-sm-2\"},\"FullName\"),/*#__PURE__*/React.createElement(CSelect,{className:\"col-sm-6\",\"aria-label\":\"Default select example\",value:userAccount.staff,onChange:function onChange(e){return setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{staff:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select Officer--\"),allStaff.map(function(s){return/*#__PURE__*/React.createElement(\"option\",{key:s.id,value:s.id,id:s.id},s.nameOfStaff);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"username\",className:\"form-label col-sm-2\"},\"Username\"),/*#__PURE__*/React.createElement(CInput,{type:\"text\",className:\"col-sm-6\",id:\"username\",value:userAccount.username,onChange:function onChange(e){return setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{username:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"gender\",className:\"form-label col-sm-2\"},\"User Role\"),/*#__PURE__*/React.createElement(CSelect,{className:\"col-sm-6\",\"aria-label\":\"Default select example\",value:userAccount.userRole,onChange:function onChange(e){setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{userRole:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select User Role--\"),roles.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.role);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-3 row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"branch\",className:\"form-label col-sm-2\"},\"Branch\"),/*#__PURE__*/React.createElement(CSelect,{className:\"col-sm-6\",\"aria-label\":\"Default select example\",value:userAccount.branch,onChange:function onChange(e){setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{branch:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select Branch--\"),branch.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.branch);}))),/*#__PURE__*/React.createElement(CButton,{className:\"col-sm-3 mt-3 btn-sm float-right mb-3\",color:\"success\",onClick:handleSubmit},\"Submit\"),/*#__PURE__*/React.createElement(CButton,{color:\"danger\",className:\"btn-sm\",onClick:handleBackup},\"DB Backup\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Username\"),/*#__PURE__*/React.createElement(\"th\",null,\"Role\"),/*#__PURE__*/React.createElement(\"th\",null,\"Branch\"),/*#__PURE__*/React.createElement(\"th\",null,\"Actions\"))),/*#__PURE__*/React.createElement(\"tbody\",null,dataTouse.map(function(s,index){return/*#__PURE__*/React.createElement(\"tr\",{key:s.id,Style:\"cursor: pointer;\",onClick:function onClick(){return handleOnEdit(s);}},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,s.nameOfStaff),/*#__PURE__*/React.createElement(\"td\",null,s.username),/*#__PURE__*/React.createElement(\"td\",null,s.userRole),/*#__PURE__*/React.createElement(\"td\",null,s.branch),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CDropdown,{className:\"btn-sm\"},/*#__PURE__*/React.createElement(CDropdownToggle,{color:\"info\",size:\"sm\",onClick:null},\"Select Action\"),/*#__PURE__*/React.createElement(CDropdownMenu,{size:\"sm\"},/*#__PURE__*/React.createElement(CDropdownItem,{onClick:function onClick(){return handlePasswordReset(s.id);}},\"Reset\"),/*#__PURE__*/React.createElement(CDropdownItem,{onClick:function onClick(){return getSelectedUser(s);}},\"Changes\")))));})))),/*#__PURE__*/React.createElement(CModal,{className:\"modal fade col-sm-12\",size:\"lg\",show:regShow,color:\"warning\",\"data-backdrop\":\"static\",\"data-keyboard\":\"false\",onClose:function onClose(){setRegShow(!regShow);}},/*#__PURE__*/React.createElement(CModalHeader,{className:\"modal-header\",closeButton:true},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"centertext\"},\"Change Username\"))),/*#__PURE__*/React.createElement(CModalBody,{className:\"modal-body col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{class:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"nameOfCustomer\",className:\"col-sm-3 col-form-label\"},\"Name of Staff\"),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-8\"},/*#__PURE__*/React.createElement(CInput,{className:\"form-control-xl mb-2 mt-2 input-lg\",value:user.name,readOnly:true//onChange={handleCustomerSelected}\n}))),/*#__PURE__*/React.createElement(\"div\",{class:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"bank\",className:\"col-sm-3 col-form-label\"},\"Username\"),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-8\"},/*#__PURE__*/React.createElement(CInput,{id:\"bank\",className:\"form-control\",\"aria-label\":\"Default select example\",value:user.username,onChange:null}))),/*#__PURE__*/React.createElement(\"div\",{class:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"bankAccount\",className:\"col-sm-3 col-form-label\"},\"User Role\"),/*#__PURE__*/React.createElement(\"div\",{class:\"col-sm-8\"},/*#__PURE__*/React.createElement(CSelect,{className:\"col-sm-12\",\"aria-label\":\"Default select example\",value:user.role,onChange:function onChange(e){setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{userRole:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{defaultValue:user.role},user.role),roles.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.role);})))),/*#__PURE__*/React.createElement(\"div\",{class:\"mb-3 row\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"dateOnCheque\",className:\"col-sm-3 col-form-label\"},\"Branch\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-8\"},/*#__PURE__*/React.createElement(CSelect,{className:\"col-sm-12\",\"aria-label\":\"Default select example\",value:userAccount.branch,onChange:function onChange(e){setUserAccount(_objectSpread(_objectSpread({},userAccount),{},{branch:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{defaultValue:user.branch},user.branch),branch.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.branch);}))))),/*#__PURE__*/React.createElement(CModalFooter,null,/*#__PURE__*/React.createElement(\"div\",{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(CButton,{onClick:null,className:\"m-3\",color:\"success\"},\"Submit\"),/*#__PURE__*/React.createElement(CButton,{onClick:function onClick(){return setRegShow(false);},className:\"m-3\",color:\"danger\"},\"Close\")))));}export default UserAccount;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/userAccount.js"],"names":["React","useState","useEffect","axios","moment","Swal","apiUrl","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","UserAccount","props","search","setSearch","username","name","role","branch","user","setUser","allAccounts","setAllAccounts","roles","setRoles","allStaff","setAllStaff","setBranch","editMode","setEditMode","regShow","setRegShow","password","staff","userRole","userAccount","setUserAccount","getStaff","get","data","getUserRoles","results","console","log","getBranch","allUserAccounts","genPassword","handleSubmit","e","preventDefault","post","status","fire","handlePasswordReset","id","put","chars","passwordLength","tempPassword","i","randomNumber","Math","floor","random","length","substring","handleBackup","db","handleOnEdit","p","handleSearch","event","target","value","sAccounts","filter","item","nameOfStaff","toLowerCase","includes","dataTouse","getSelectedUser","s","currentTarget","map","b","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Swal from 'sweetalert2';\nimport { apiUrl } from '../../config.json';\n\nimport {\n\tCBadge,\n\tCCard,\n\tCCardBody,\n\t//CCardHeader,\n\tCCol,\n\tCDataTable,\n\tCRow,\n\tCButton,\n\tCModal,\n\tCModalFooter,\n\tCModalHeader,\n\tCModalBody,\n\tCCardHeader,\n\tCInputGroupAppend,\n\tCInputGroupPrepend,\n\tCDropdownItem,\n\tCForm,\n\t//CCardFooter,\n\tCDropdownToggle,\n\t//CInputRadio,\n\tCDropdown,\n\tCModalTitle,\n\t//CFormText,\n\t//CTextarea,\n\tCFormGroup,\n\tCLabel,\n\t// CSwitch,\n\tCInput,\n\t//CInputFile,\n\tCSelect,\n\tCDropdownMenu,\n\t//CCardFooter,\n\tCInputGroup,\n\t//CForm,\n} from '@coreui/react';\nimport {\n\tRow,\n\tCol,\n\tTable,\n\tProgress,\n\tButton,\n\tUncontrolledButtonDropdown,\n\tDropdownMenu,\n\tDropdownToggle,\n\tDropdownItem,\n\tInput,\n\tLabel,\n\tBadge,\n} from 'reactstrap';\n\nfunction UserAccount(props) {\n\tconst [search, setSearch] = useState('');\n\tconst [user, setUser] = useState({\n\t\tusername: '',\n\t\tname: '',\n\t\trole: '',\n\t\tbranch,\n\t});\n\tconst [allAccounts, setAllAccounts] = useState([]);\n\tconst [roles, setRoles] = useState([]);\n\tconst [allStaff, setAllStaff] = useState([]);\n\tconst [branch, setBranch] = useState([]);\n\tconst [editMode, setEditMode] = useState(false);\n\tconst [regShow, setRegShow] = useState(false);\n\tconst [userAccount, setUserAccount] = useState({\n\t\tusername: '',\n\t\tpassword: 'pass1234',\n\t\tstaff: 0,\n\t\tbranch: 0,\n\t\tuserRole: '',\n\t});\n\n\tuseEffect(() => {\n\t\tasync function getStaff() {\n\t\t\tconst staff = await axios.get(apiUrl + '/setup/staff');\n\t\t\tsetAllStaff(staff.data);\n\t\t}\n\t\tgetStaff();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tasync function getUserRoles() {\n\t\t\tconst results = await axios.get(apiUrl + '/setup/userroles');\n\t\t\tsetRoles(results.data);\n\t\t\tconsole.log(results.data);\n\t\t}\n\t\tgetUserRoles();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tasync function getBranch() {\n\t\t\tconst branch = await axios.get(apiUrl + '/setup/branch');\n\t\t\tconst allUserAccounts = await axios.get(apiUrl + '/users/useraccounts');\n\t\t\tsetBranch(branch.data);\n\t\t\tsetAllAccounts(allUserAccounts.data);\n\t\t\t//\tconsole.log(allUserAccounts);\n\t\t}\n\t\tgetBranch();\n\n\t\tgenPassword();\n\t}, []);\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\t// console.log(userAccount)\n\t\ttry {\n\t\t\tconst results = await axios.post(apiUrl + '/setup/user', userAccount);\n\t\t\tif (results.status !== 200) {\n\t\t\t\treturn Swal.fire(\n\t\t\t\t\t'Failed',\n\t\t\t\t\t'Submission Failed ! Check Entries and try again !',\n\t\t\t\t\t'error'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tSwal.fire('Success', 'User Account Created Successfully', 'success');\n\t\t\t\tSwal.fire(\n\t\t\t\t\t'Default Password',\n\t\t\t\t\t'Default Password: ' +\n\t\t\t\t\t\tuserAccount.password +\n\t\t\t\t\t\t' : Change this on your first login.',\n\t\t\t\t\t'info'\n\t\t\t\t);\n\t\t\t\tsetUserAccount({\n\t\t\t\t\tusername: '',\n\t\t\t\t\tpassword: 'pass1234',\n\t\t\t\t\tuserRole: '',\n\t\t\t\t\tbranch: 0,\n\t\t\t\t\tstaff: 0,\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tSwal.fire('OOPS ! ' + err, 'error');\n\t\t}\n\t};\n\n\tconst handlePasswordReset = async (id) => {\n\t\t//console.log(id);\n\n\t\ttry {\n\t\t\tconst results = await axios.put(apiUrl + '/setup/user/' + id, {\n\t\t\t\tpassword: 'pass1234',\n\t\t\t});\n\t\t\tif (results.status !== 200) {\n\t\t\t\treturn Swal.fire(\n\t\t\t\t\t'Failed',\n\t\t\t\t\t'Submission Failed ! Check Entries and try again !',\n\t\t\t\t\t'error'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tSwal.fire('Success', 'Account Reset Successfully', 'success');\n\t\t\t\tSwal.fire(\n\t\t\t\t\t'Default Password',\n\t\t\t\t\t'Default Password: ' +\n\t\t\t\t\t\t'pass1234' +\n\t\t\t\t\t\t' : Change this on your first login.',\n\t\t\t\t\t'info'\n\t\t\t\t);\n\t\t\t\tsetUserAccount({\n\t\t\t\t\tusername: '',\n\t\t\t\t\tpassword: 'pass1234',\n\t\t\t\t\tuserRole: '',\n\t\t\t\t\tbranch: 0,\n\t\t\t\t\tstaff: 0,\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tSwal.fire('OOPS ! ' + err, 'error');\n\t\t}\n\t};\n\n\tfunction genPassword() {\n\t\tlet chars = '123456789abcdefghijklmnpqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\n\t\tlet passwordLength = 8;\n\t\tlet tempPassword = '';\n\t\tfor (let i = 0; i <= passwordLength; i++) {\n\t\t\tlet randomNumber = Math.floor(Math.random() * chars.length);\n\t\t\ttempPassword += chars.substring(randomNumber, randomNumber + 1);\n\t\t}\n\t\tsetUserAccount({\n\t\t\t...userAccount,\n\t\t\tpassword: 'pass1234',\n\t\t\t// confirmPassword: tempPassword,\n\t\t});\n\t}\n\tconst handleBackup = async () => {\n\t\tconst results = await axios.post(apiUrl + '/backup', {\n\t\t\tdb: 'Daraplus',\n\t\t});\n\t\tif (results.status !== 200) {\n\t\t\treturn Swal.fire(\n\t\t\t\t'Backup Failed',\n\t\t\t\t'Db Back Failed ! try again !',\n\t\t\t\t'error'\n\t\t\t);\n\t\t} else {\n\t\t\tSwal.fire('Success', 'Backup Completed Successfully', 'success');\n\t\t}\n\t};\n\tconst handleOnEdit = (p) => {\n\t\tsetEditMode(true);\n\t\tsetUserAccount({\n\t\t\t// nameOfStaff: p.nameOfStaff,\n\t\t\t// phone: p.phone,\n\t\t\t// dob: new Date(p.dob).toISOString().slice(0, 10),\n\t\t\t// dateEmployed: new Date(p.dateEmployed).toISOString().slice(0, 10),\n\t\t\t// qualification: p.qualification,\n\t\t\t// guarantorOne: p.guarantorOne,\n\t\t\t// guarantorOnePhone: p.guarantorOnePhone,\n\t\t\t// guarantorTwo: p.guarantorTwo,\n\t\t\t// guarantorTwoPhone: p.guarantorTwoPhone,\n\t\t\t// id: p.id,\n\t\t});\n\t\t//setShow(!show);\n\t\t//setDisabled(!disabled);\n\t};\n\tconst handleSearch = (event) => {\n\t\tsetSearch(event.target.value);\n\t};\n\n\tconst data = {\n\t\tsAccounts: allAccounts.filter((item) =>\n\t\t\titem.nameOfStaff.toLowerCase().includes(search.toLowerCase())\n\t\t),\n\t};\n\tconst dataTouse = search.length === 0 ? allAccounts : data.sAccounts;\n\n\tconst getSelectedUser = (s) => {\n\t\tsetRegShow(true);\n\t\tsetUser({\n\t\t\tusername: s.username,\n\t\t\tname: s.nameOfStaff,\n\t\t\trole: s.userRole,\n\t\t\tbranch: s.branch,\n\t\t});\n\t\tconsole.log(s);\n\t};\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<h1 className=\"centertext\">Setup User Accounts</h1>\n\t\t\t<p className=\"staffp mb-3\">\n\t\t\t\tA user account is an established technique for connecting a user and an\n\t\t\t\tinformation service and/or computer network. User accounts determine\n\t\t\t\twhether or not a user can connect to a computer, network or similar\n\t\t\t\tnetworks.\n\t\t\t</p>\n\t\t\t<div className=\"mb-3 row\">\n\t\t\t\t<label htmlFor=\"phoneworship\" className=\"form-label col-sm-2\">\n\t\t\t\t\tFullName\n\t\t\t\t</label>\n\t\t\t\t<CSelect\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\tvalue={userAccount.staff}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\tstaff: e.currentTarget.value,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\t<option defaultValue=\"\">--Select Officer--</option>\n\t\t\t\t\t{allStaff.map((s) => (\n\t\t\t\t\t\t<option key={s.id} value={s.id} id={s.id}>\n\t\t\t\t\t\t\t{s.nameOfStaff}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</CSelect>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3 row\">\n\t\t\t\t<label htmlFor=\"username\" className=\"form-label col-sm-2\">\n\t\t\t\t\tUsername\n\t\t\t\t</label>\n\t\t\t\t<CInput\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\tid=\"username\"\n\t\t\t\t\tvalue={userAccount.username}\n\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\tusername: e.currentTarget.value,\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3 row\">\n\t\t\t\t<label htmlFor=\"gender\" className=\"form-label col-sm-2\">\n\t\t\t\t\tUser Role\n\t\t\t\t</label>\n\t\t\t\t<CSelect\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\tvalue={userAccount.userRole}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\tuserRole: e.currentTarget.value,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option defaultValue=\"\">--Select User Role--</option>\n\t\t\t\t\t{roles.map((b) => (\n\t\t\t\t\t\t<option key={b.id} value={b.id} id={b.id}>\n\t\t\t\t\t\t\t{b.role}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t\t{/* // <option value=\"Admin\">Admin</option>\n\t\t\t\t\t// <option value=\"Loan Officer\">Loan Officer</option>\n\t\t\t\t\t// <option value=\"Supervisor\">Supervisor</option>\n\t\t\t\t\t// <option value=\"Recovery Officer\">Recovery Officer</option>\n\t\t\t\t\t//{' '} */}\n\t\t\t\t\t{/* <option value=\"Customer Service Officer\">\n\t\t\t\t\t\t// Customer Service Officer //{' '}\n\t\t\t\t\t</option>\n\t\t\t\t\t// <option value=\"Management\">Management</option> */}\n\t\t\t\t</CSelect>\n\t\t\t</div>\n\t\t\t<div className=\"mb-3 row\">\n\t\t\t\t<label htmlFor=\"branch\" className=\"form-label col-sm-2\">\n\t\t\t\t\tBranch\n\t\t\t\t</label>\n\t\t\t\t<CSelect\n\t\t\t\t\tclassName=\"col-sm-6\"\n\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\tvalue={userAccount.branch}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\tbranch: e.currentTarget.value,\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<option defaultValue=\"\">--Select Branch--</option>\n\t\t\t\t\t{branch.map((b) => (\n\t\t\t\t\t\t<option key={b.id} value={b.id} id={b.id}>\n\t\t\t\t\t\t\t{b.branch}\n\t\t\t\t\t\t</option>\n\t\t\t\t\t))}\n\t\t\t\t</CSelect>\n\t\t\t</div>\n\n\t\t\t<CButton\n\t\t\t\tclassName=\"col-sm-3 mt-3 btn-sm float-right mb-3\"\n\t\t\t\tcolor=\"success\"\n\t\t\t\tonClick={handleSubmit}\n\t\t\t>\n\t\t\t\tSubmit\n\t\t\t</CButton>\n\n\t\t\t<CButton color=\"danger\" className=\"btn-sm\" onClick={handleBackup}>\n\t\t\t\tDB Backup\n\t\t\t</CButton>\n\n\t\t\t<div>\n\t\t\t\t<Table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr className=\"fs-sm\">\n\t\t\t\t\t\t\t<th></th>\n\t\t\t\t\t\t\t<th>Name</th>\n\t\t\t\t\t\t\t<th>Username</th>\n\t\t\t\t\t\t\t<th>Role</th>\n\t\t\t\t\t\t\t<th>Branch</th>\n\t\t\t\t\t\t\t<th>Actions</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{dataTouse.map((s, index) => (\n\t\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\t\tkey={s.id}\n\t\t\t\t\t\t\t\tStyle=\"cursor: pointer;\"\n\t\t\t\t\t\t\t\tonClick={() => handleOnEdit(s)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td>{index + 1}</td>\n\t\t\t\t\t\t\t\t<td>{s.nameOfStaff}</td>\n\t\t\t\t\t\t\t\t<td>{s.username}</td>\n\t\t\t\t\t\t\t\t<td>{s.userRole}</td>\n\t\t\t\t\t\t\t\t<td>{s.branch}</td>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<CDropdown className=\"btn-sm\">\n\t\t\t\t\t\t\t\t\t\t<CDropdownToggle color=\"info\" size=\"sm\" onClick={null}>\n\t\t\t\t\t\t\t\t\t\t\tSelect Action\n\t\t\t\t\t\t\t\t\t\t</CDropdownToggle>\n\t\t\t\t\t\t\t\t\t\t<CDropdownMenu size=\"sm\">\n\t\t\t\t\t\t\t\t\t\t\t<CDropdownItem onClick={() => handlePasswordReset(s.id)}>\n\t\t\t\t\t\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t\t\t\t\t\t</CDropdownItem>\n\n\t\t\t\t\t\t\t\t\t\t\t<CDropdownItem onClick={() => getSelectedUser(s)}>\n\t\t\t\t\t\t\t\t\t\t\t\tChanges\n\t\t\t\t\t\t\t\t\t\t\t</CDropdownItem>\n\t\t\t\t\t\t\t\t\t\t</CDropdownMenu>\n\t\t\t\t\t\t\t\t\t</CDropdown>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</tbody>\n\t\t\t\t</Table>\n\t\t\t</div>\n\n\t\t\t<CModal\n\t\t\t\tclassName=\"modal fade col-sm-12\"\n\t\t\t\tsize=\"lg\"\n\t\t\t\tshow={regShow}\n\t\t\t\tcolor=\"warning\"\n\t\t\t\tdata-backdrop=\"static\"\n\t\t\t\tdata-keyboard=\"false\"\n\t\t\t\tonClose={() => {\n\t\t\t\t\tsetRegShow(!regShow);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<CModalHeader className=\"modal-header\" closeButton>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<h3 className=\"centertext\">Change Username</h3>\n\t\t\t\t\t</p>\n\t\t\t\t</CModalHeader>\n\n\t\t\t\t<CModalBody className=\"modal-body col-sm-12\">\n\t\t\t\t\t<div class=\"mb-3 row\">\n\t\t\t\t\t\t<CLabel\n\t\t\t\t\t\t\thtmlFor=\"nameOfCustomer\"\n\t\t\t\t\t\t\tclassName=\"col-sm-3 col-form-label\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tName of Staff\n\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t<div class=\"col-sm-8\">\n\t\t\t\t\t\t\t<CInput\n\t\t\t\t\t\t\t\tclassName=\"form-control-xl mb-2 mt-2 input-lg\"\n\t\t\t\t\t\t\t\tvalue={user.name}\n\t\t\t\t\t\t\t\treadOnly\n\t\t\t\t\t\t\t\t//onChange={handleCustomerSelected}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"mb-3 row\">\n\t\t\t\t\t\t<CLabel htmlFor=\"bank\" className=\"col-sm-3 col-form-label\">\n\t\t\t\t\t\t\tUsername\n\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t<div class=\"col-sm-8\">\n\t\t\t\t\t\t\t<CInput\n\t\t\t\t\t\t\t\tid=\"bank\"\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\n\t\t\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\t\t\tvalue={user.username}\n\t\t\t\t\t\t\t\tonChange={null}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"mb-3 row\">\n\t\t\t\t\t\t<CLabel htmlFor=\"bankAccount\" className=\"col-sm-3 col-form-label\">\n\t\t\t\t\t\t\tUser Role\n\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t<div class=\"col-sm-8\">\n\t\t\t\t\t\t\t<CSelect\n\t\t\t\t\t\t\t\tclassName=\"col-sm-12\"\n\t\t\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\t\t\tvalue={user.role}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\t\t\t\tuserRole: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option defaultValue={user.role}>{user.role}</option>\n\t\t\t\t\t\t\t\t{roles.map((b) => (\n\t\t\t\t\t\t\t\t\t<option key={b.id} value={b.id} id={b.id}>\n\t\t\t\t\t\t\t\t\t\t{b.role}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</CSelect>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"mb-3 row\">\n\t\t\t\t\t\t<CLabel htmlFor=\"dateOnCheque\" className=\"col-sm-3 col-form-label\">\n\t\t\t\t\t\t\tBranch\n\t\t\t\t\t\t</CLabel>\n\t\t\t\t\t\t<div className=\"col-sm-8\">\n\t\t\t\t\t\t\t<CSelect\n\t\t\t\t\t\t\t\tclassName=\"col-sm-12\"\n\t\t\t\t\t\t\t\taria-label=\"Default select example\"\n\t\t\t\t\t\t\t\tvalue={userAccount.branch}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetUserAccount({\n\t\t\t\t\t\t\t\t\t\t...userAccount,\n\t\t\t\t\t\t\t\t\t\tbranch: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<option defaultValue={user.branch}>{user.branch}</option>\n\t\t\t\t\t\t\t\t{branch.map((b) => (\n\t\t\t\t\t\t\t\t\t<option key={b.id} value={b.id} id={b.id}>\n\t\t\t\t\t\t\t\t\t\t{b.branch}\n\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t</CSelect>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</CModalBody>\n\n\t\t\t\t<CModalFooter>\n\t\t\t\t\t<div className=\"justify-content-center\">\n\t\t\t\t\t\t<CButton onClick={null} className=\"m-3\" color=\"success\">\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t\t<CButton\n\t\t\t\t\t\t\tonClick={() => setRegShow(false)}\n\t\t\t\t\t\t\tclassName=\"m-3\"\n\t\t\t\t\t\t\tcolor=\"danger\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClose\n\t\t\t\t\t\t</CButton>\n\t\t\t\t\t</div>\n\t\t\t\t</CModalFooter>\n\t\t\t</CModal>\n\t\t</div>\n\t);\n}\n\nexport default UserAccount;\n"]},"metadata":{},"sourceType":"module"}
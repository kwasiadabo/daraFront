{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import http from'./httpService';import jwtDecode from'jwt-decode';//import baseUrl from '../../config.json'\nvar apiEndPoint='/auth';var tokenKey='token';http.setJwt(getJwt());export function login(_x,_x2){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(username,password){var _yield$http$post,jwt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:logout();_context.next=3;return http.post(apiEndPoint,{username:username,password:password});case 3:_yield$http$post=_context.sent;jwt=_yield$http$post.data;localStorage.setItem(tokenKey,jwt);case 6:case\"end\":return _context.stop();}}},_callee);}));return _login.apply(this,arguments);}export function loginWithJwt(jwt){logout();localStorage.setItem(tokenKey,jwt);}export function getCurrentUser(){try{var jwt=localStorage.getItem(tokenKey);//console.log(jwtDecode(jwt));\nreturn jwtDecode(jwt);}catch(ex){return null;}}export function logout(){localStorage.removeItem(tokenKey);}export function getJwt(){return localStorage.getItem(tokenKey);}var exportAuth={login:login,logout:logout,getCurrentUser:getCurrentUser,loginWithJwt:loginWithJwt,getJwt:getJwt};export default exportAuth;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/components/services/authService.js"],"names":["http","jwtDecode","apiEndPoint","tokenKey","setJwt","getJwt","login","username","password","logout","post","jwt","data","localStorage","setItem","loginWithJwt","getCurrentUser","getItem","ex","removeItem","exportAuth"],"mappings":"yUAAA,MAAOA,CAAAA,IAAP,KAAiB,eAAjB,CACA,MAAOC,CAAAA,SAAP,KAAsB,YAAtB,CACA;AAEA,GAAMC,CAAAA,WAAW,CAAG,OAApB,CACA,GAAMC,CAAAA,QAAQ,CAAG,OAAjB,CACAH,IAAI,CAACI,MAAL,CAAYC,MAAM,EAAlB,EAEA,eAAsBC,CAAAA,KAAtB,8C,iFAAO,iBAAqBC,QAArB,CAA+BC,QAA/B,2IACLC,MAAM,GADD,sBAEuBT,CAAAA,IAAI,CAACU,IAAL,CAAUR,WAAV,CAAuB,CAAEK,QAAQ,CAARA,QAAF,CAAYC,QAAQ,CAARA,QAAZ,CAAvB,CAFvB,uCAESG,GAFT,kBAEGC,IAFH,CAGLC,YAAY,CAACC,OAAb,CAAqBX,QAArB,CAA+BQ,GAA/B,EAHK,sD,wCAMP,MAAO,SAASI,CAAAA,YAAT,CAAsBJ,GAAtB,CAA2B,CAChCF,MAAM,GACNI,YAAY,CAACC,OAAb,CAAqBX,QAArB,CAA+BQ,GAA/B,EACD,CAED,MAAO,SAASK,CAAAA,cAAT,EAA0B,CAC/B,GAAI,CACF,GAAML,CAAAA,GAAG,CAAGE,YAAY,CAACI,OAAb,CAAqBd,QAArB,CAAZ,CACA;AACA,MAAOF,CAAAA,SAAS,CAACU,GAAD,CAAhB,CACD,CAAC,MAAOO,EAAP,CAAW,CACX,MAAO,KAAP,CACD,CACF,CAED,MAAO,SAAST,CAAAA,MAAT,EAAkB,CACvBI,YAAY,CAACM,UAAb,CAAwBhB,QAAxB,EACD,CAED,MAAO,SAASE,CAAAA,MAAT,EAAkB,CACvB,MAAOQ,CAAAA,YAAY,CAACI,OAAb,CAAqBd,QAArB,CAAP,CACD,CAED,GAAMiB,CAAAA,UAAU,CAAG,CACjBd,KAAK,CAALA,KADiB,CAEjBG,MAAM,CAANA,MAFiB,CAGjBO,cAAc,CAAdA,cAHiB,CAIjBD,YAAY,CAAZA,YAJiB,CAKjBV,MAAM,CAANA,MALiB,CAAnB,CAQA,cAAee,CAAAA,UAAf","sourcesContent":["import http from './httpService'\nimport jwtDecode from 'jwt-decode'\n//import baseUrl from '../../config.json'\n\nconst apiEndPoint = '/auth'\nconst tokenKey = 'token'\nhttp.setJwt(getJwt())\n\nexport async function login(username, password) {\n  logout()\n  const { data: jwt } = await http.post(apiEndPoint, { username, password })\n  localStorage.setItem(tokenKey, jwt)\n}\n\nexport function loginWithJwt(jwt) {\n  logout()\n  localStorage.setItem(tokenKey, jwt)\n}\n\nexport function getCurrentUser() {\n  try {\n    const jwt = localStorage.getItem(tokenKey)\n    //console.log(jwtDecode(jwt));\n    return jwtDecode(jwt)\n  } catch (ex) {\n    return null\n  }\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey)\n}\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey)\n}\n\nconst exportAuth = {\n  login,\n  logout,\n  getCurrentUser,\n  loginWithJwt,\n  getJwt,\n}\n\nexport default exportAuth\n"]},"metadata":{},"sourceType":"module"}
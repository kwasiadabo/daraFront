{"ast":null,"code":"import _defineProperty from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useNavigate,Navigate,useParams}from'react-router-dom';import axios from'axios';import moment from'moment';import{apiUrl}from'../../config.json';import{reportUrl}from'../../config.json';import{Modal}from'react-bootstrap';import auth from'../../components/services/authService';import Swal from'sweetalert2';import Card from'react-bootstrap/Card';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge//Modal,\n}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CDropdownDivider,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';var LoanRepayment=function LoanRepayment(){var _React$createElement;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),loanees=_useState2[0],setLoanees=_useState2[1];var _useState3=useState(auth.getCurrentUser()),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),staff=_useState6[0],setStaff=_useState6[1];//const user = auth.getCurrentUser();\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),daysPayments=_useState8[0],setDaysPayments=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),show=_useState10[0],setShow=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),fullName=_useState12[0],setFullName=_useState12[1];var _useState13=useState({amount:0,overage:0,shortage:0}),_useState14=_slicedToArray(_useState13,2),bulkCash=_useState14[0],setBulkCash=_useState14[1];var _useState15=useState(new Date()),_useState16=_slicedToArray(_useState15,2),todayDate=_useState16[0],setTodayDate=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),payments=_useState18[0],setPayments=_useState18[1];var formatToday=function formatToday(date){return date.toISOString().slice(0,10);};var _useState19=useState(1),_useState20=_slicedToArray(_useState19,2),pageSize=_useState20[0],setPageSize=_useState20[1];var _useState21=useState(1),_useState22=_slicedToArray(_useState21,2),currentPage=_useState22[0],setCurrentPage=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),search=_useState24[0],setSearch=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),edit=_useState26[0],setEdit=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),render=_useState28[0],setRender=_useState28[1];var _useState29=useState(true),_useState30=_slicedToArray(_useState29,2),save=_useState30[0],setSave=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),colPayments=_useState32[0],setColPayments=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),todaysPayments=_useState34[0],setTodaysPayments=_useState34[1];var _useState35=useState(0),_useState36=_slicedToArray(_useState35,2),loanBal=_useState36[0],setLoanBal=_useState36[1];var _useState37=useState({dateOfCollection:new Date().toISOString().slice(0,10),officer:'',customer:'',amount:'',modeOfPayment:''}),_useState38=_slicedToArray(_useState37,2),loanPayments=_useState38[0],setLoanPayments=_useState38[1];var _useState39=useState(new Date().toISOString().slice(0,10)),_useState40=_slicedToArray(_useState39,2),tdate=_useState40[0],setTdate=_useState40[1];useEffect(function(){var getActiveLoans=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(apiUrl+'/loan/dailycollections/'+user.staff);case 2:results=_context.sent;setLoanees(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getActiveLoans(){return _ref.apply(this,arguments);};}();getActiveLoans();},[loanees,render]);useEffect(function(){function getBulkCash(){return _getBulkCash.apply(this,arguments);}function _getBulkCash(){_getBulkCash=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(apiUrl+'/loan/bulkCash/submitted/'+tdate+'/'+user.staff);case 3:results=_context2.sent;setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{amount:results.data[0].TotalSubmitted// overage: results.data[0].overage,\n// shortage: results.data[0].shortage,\n}));_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return _getBulkCash.apply(this,arguments);}getBulkCash();},[tdate,render]);useEffect(function(){function getPayments(){return _getPayments.apply(this,arguments);}function _getPayments(){_getPayments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(apiUrl+'/loan/dailycollections/'+tdate+'/'+user.staff);case 2:results=_context3.sent;setPayments(results.data[0].TotalDailyCollections);// console.log('Payments: ' + formatToday(todayDate))\ncase 4:case\"end\":return _context3.stop();}}},_callee3);}));return _getPayments.apply(this,arguments);}getPayments();//console.log(tdate)\n},[render,tdate]);useEffect(function(){function getDaysPayments(){return _getDaysPayments.apply(this,arguments);}function _getDaysPayments(){_getDaysPayments=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(apiUrl+'/loan/dailycollections/dayspayments/'+tdate+'/'+user.staff);case 2:results=_context4.sent;setDaysPayments(results.data);// console.log('Payments: ' + formatToday(todayDate))\ncase 4:case\"end\":return _context4.stop();}}},_callee4);}));return _getDaysPayments.apply(this,arguments);}getDaysPayments();//console.log(daysPayments)\n},[render,tdate]);var handleAmountChange=function handleAmountChange(e){setLoanPayments(_objectSpread(_objectSpread({},loanPayments),{},{amount:e.currentTarget.value,officer:user.staff}));};var formatter=new Intl.NumberFormat('en-US',{style:'currency',currency:'GHS'// These options are needed to round to whole numbers if that's what you want.\n//minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n//maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});var handleCustomerSelect=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(c){var loanBalance;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(apiUrl+'/loan/dailycollections/bal/'+c.id);case 2:loanBalance=_context5.sent;setFullName(c.fullName);setLoanBal(loanBalance.data[0].loanBalance);setLoanPayments({customer:c.id,dateOfCollection:tdate,officer:user.staff});case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function handleCustomerSelect(_x){return _ref2.apply(this,arguments);};}();var handleSearch=function handleSearch(event){setSearch(event.currentTarget.value);};var data={customer:loanees.filter(function(c){return c.fullName.toLowerCase().includes(search.toLowerCase());})};var dataTouse=search.length===0?loanees:data.customer;var handleClose=function handleClose(){setLoanPayments({customer:'',amount:'',modeOfPayment:'',officer:'',dateOfCollection:''});setFullName('');setShow(false);};var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var results;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!(bulkCash.amount-payments<loanPayments.amount)){_context6.next=2;break;}return _context6.abrupt(\"return\",Swal.fire('OOPS','Payment Unsuccessful - Insufficient Bulk Amount','error'));case 2:_context6.prev=2;_context6.next=5;return axios.post(apiUrl+'/loan/dailycollections',loanPayments);case 5:results=_context6.sent;if(!(results.statusText==='OK')){_context6.next=12;break;}Swal.fire('Success','Payment Made','success');setLoanPayments({customer:'',amount:'',modeOfPayment:'',officer:'',dateOfCollection:''});setRender(!render);_context6.next=13;break;case 12:return _context6.abrupt(\"return\",Swal.fire('OOPS','Payment Unsuccessful','error'));case 13:_context6.next=18;break;case 15:_context6.prev=15;_context6.t0=_context6[\"catch\"](2);return _context6.abrupt(\"return\",Swal.fire('OOPS',_context6.t0+' [Payment Unsuccessful]','error'));case 18:case\"end\":return _context6.stop();}}},_callee6,null,[[2,15]]);}));return function handleSubmit(){return _ref3.apply(this,arguments);};}();var showForEdit=function showForEdit(p){setLoanPayments({loanId:p.loanId._id,customer:p.customer._id,fullName:p.customer.fullName,entryBy:user._id,dateOfCollection:new Date().toISOString().slice(0,10),modeOfPayment:p.modeOfPayment,amount:p.amount,officer:p.officer.id,comment:p.comment,id:p.id});setShow(!show);setEdit(true);setSave(false);};var handleRemovePayment=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(p){return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0://console.log(p)\nSwal.fire({title:'Do you want to remove this payment?',showDenyButton:true,showCancelButton:true,confirmButtonText:'Remove',denyButtonText:\"Don't Remove\"}).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(result){var results;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!result.isConfirmed){_context7.next=14;break;}_context7.prev=1;_context7.next=4;return axios.delete(apiUrl+'/loan/dailycollections/'+p.id);case 4:results=_context7.sent;if(results.status===200){Swal.fire('Success','Payment Removed','success');}setRender(!render);_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](1);Swal.fire('Error',_context7.t0+' Payment Removal Failed','error');case 12:_context7.next=15;break;case 14:if(result.isDenied){Swal.fire('Payment Removal Failed','','error');}case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[1,9]]);}));return function(_x3){return _ref5.apply(this,arguments);};}());setRender(!render);//console.log(results)\ncase 2:case\"end\":return _context8.stop();}}},_callee8);}));return function handleRemovePayment(_x2){return _ref4.apply(this,arguments);};}();var handleUpdate=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(){var results;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log(loanPayments);_context9.prev=1;_context9.next=4;return axios.put(apiUrl+'/collectionsheet/'+loanPayments.id,loanPayments);case 4:results=_context9.sent;if(!(results.status===200)){_context9.next=11;break;}Swal.fire('Success','Payment Updated','success');setLoanPayments({customer:'',fullName:'',amount:'',modeOfPayment:'',loanId:'',officer:'',comment:'',entryBy:'',dateOfCollection:''});setRender(!render);_context9.next=12;break;case 11:return _context9.abrupt(\"return\",Swal.fire('OOPS','Payment Update Unsuccessful','error'));case 12:_context9.next=17;break;case 14:_context9.prev=14;_context9.t0=_context9[\"catch\"](1);return _context9.abrupt(\"return\",Swal.fire('OOPS',_context9.t0+' [Payment Update Unsuccessful]','error'));case 17:case\"end\":return _context9.stop();}}},_callee9,null,[[1,14]]);}));return function handleUpdate(){return _ref6.apply(this,arguments);};}();var handleMakePayment=function handleMakePayment(){if(bulkCash.amount<=0)return Swal.fire('OOPS','You have NOT submitted Bulk Cash for '+tdate,'error');setSave(true);setEdit(false);setShow(true);};var handleSubmitCollections=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(){return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.prev=0;_context10.next=3;return axios.post(apiUrl+'/loan/dailycollections/'+user.staff+'/'+tdate);case 3:Swal.fire('Submission Done','Days Collections Submitted!','success');setRender(!render);openCustomerListAsReport(reportUrl+'/dailyEntry.aspx?'+user.staff+'?'+tdate);_context10.next=11;break;case 8:_context10.prev=8;_context10.t0=_context10[\"catch\"](0);return _context10.abrupt(\"return\",Swal.fire('OOPS',_context10.t0+' [Collections Submission Failed]','error'));case 11:case\"end\":return _context10.stop();}}},_callee10,null,[[0,8]]);}));return function handleSubmitCollections(){return _ref7.apply(this,arguments);};}();var openCustomerListAsReport=function openCustomerListAsReport(url){var windowFeatures='left=100,top=100,width=380,height=320';window.open(url,'Daily Entry','popup',windowFeatures);};var handleSelectDate=function handleSelectDate(e){setTdate(e.currentTarget.value);console.log(bulkCash.amount+bulkCash.shortage-bulkCash.overage-payments);};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-12\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"centertext mt-\"},\"Customer Loan Repayment\"),/*#__PURE__*/React.createElement(CInput,{type:\"date\",name:\"dateToday\",className:\"form-control text-center col-sm-12\",id:\"dateToday\",value:tdate,onChange:handleSelectDate}),/*#__PURE__*/React.createElement(\"div\",{className:\"row text-center col-sm-12 justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{classname:\"m-3\"},/*#__PURE__*/React.createElement(Card,{style:{width:'12rem',height:'6rem'},className:\"m-3\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,\"Submitted\"),formatter.format(bulkCash.amount)))),/*#__PURE__*/React.createElement(\"div\",{classname:\"m-3\"},/*#__PURE__*/React.createElement(Card,{style:{width:'12rem',height:'6rem'},className:\"m-3\"},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,\"Payments\"),formatter.format(payments)))),/*#__PURE__*/React.createElement(\"div\",{classname:\"m-3 justify-content-right\"},/*#__PURE__*/React.createElement(Card,{style:{width:'12rem',height:'6rem'},className:parseFloat(bulkCash.amount-payments)>0?'positivebalcolor m-3':'negativebalcolor m-3'},/*#__PURE__*/React.createElement(Card.Body,null,/*#__PURE__*/React.createElement(Card.Title,null,parseFloat(bulkCash.amount-payments)<0?'Overage':'Balance'),formatter.format(parseFloat(bulkCash.amount-payments)))))),/*#__PURE__*/React.createElement(CButton,{className:\"mt-3 mb-2 float-right\",onClick:handleMakePayment,color:\"success\"},\"Make Loan Payments\"),/*#__PURE__*/React.createElement(Table,{className:\"table align-left mb-0 bg-white table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Customer\"),/*#__PURE__*/React.createElement(\"th\",null,\"Mode\"),/*#__PURE__*/React.createElement(\"th\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,daysPayments.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.Customer),/*#__PURE__*/React.createElement(\"td\",null,c.ModeOfPayment),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Amount)),/*#__PURE__*/React.createElement(\"td\",null,c.status),c.status==='Not Submitted'?/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CButton,{className:\"btn-sm\",color:\"danger\",onClick:function onClick(){return handleRemovePayment(c);}},\"remove\")):null);}))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex mt-5 justify-content-center\"},bulkCash.amount+bulkCash.shortage-bulkCash.overage-payments==0&&/*#__PURE__*/React.createElement(CButton,{className:\"col-sm-3 float-center\",color:\"danger\",onClick:handleSubmitCollections},\"Submit Days Collections\"))),/*#__PURE__*/React.createElement(Modal,{className:\"modalCustomer fade \",size:\"md\",show:show,\"data-backdrop\":\"static\",\"data-keyboard\":\"false\"},/*#__PURE__*/React.createElement(Modal.Body,{className:\"modal-body col-sm-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"float-center mb-2\"},/*#__PURE__*/React.createElement(CInput,{className:\"col-sm-12 mb-2 text-center\",placeholder:\" Search Loan Customer\",onChange:handleSearch})),/*#__PURE__*/React.createElement(Table,{className:\"table mb-3 mt-2 align-middle mb-0 bg-white table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null,\"A/C No.\"),/*#__PURE__*/React.createElement(\"th\",null,\"Name\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,dataTouse.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c.id,onClick:function onClick(){return handleCustomerSelect(c);}},/*#__PURE__*/React.createElement(\"td\",null,c.accountNumber),/*#__PURE__*/React.createElement(\"td\",null,c.fullName),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CButton,{color:\"danger\",onClick:function onClick(){return handleCustomerSelect(c);},className:\"btn-sm\"},\"Select\")));}))),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"nameOfOfficer\",className:\"form-label\"},\"Name of Customer\"),/*#__PURE__*/React.createElement(CInput,{name:\"nameOfCustomer\",className:\"text-center\",type:\"text\",id:\"nameOfCustomer\",value:fullName,autoComplete:\"off\",readOnly:true}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"Balance\",className:\"form-label\"},\"Current Loan Balance\"),/*#__PURE__*/React.createElement(CInput,{name:\"Balance\",className:\"form-control  text-center\",type:\"text\",id:\"Balance\",value:formatter.format(loanBal),autoComplete:\"off\",readOnly:true}),/*#__PURE__*/React.createElement(CSelect,{className:\"form-select  mb-3 mt-4 text-center\",\"aria-label\":\".form-select-lg\",value:loanPayments.modeOfPayment,onChange:function onChange(e){return setLoanPayments(_objectSpread(_objectSpread({},loanPayments),{},{modeOfPayment:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select Mode of Payment\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Cash\"},\"Cash\")),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amountReceived\",className:\"form-label\"},\"Amount (GHS)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",name:\"amountReceived\",className:\"form-control  text-right\",id:\"amountReceived\",value:loanPayments.amount,onChange:handleAmountChange}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"comment\",className:\"form-label\"},\"Comment\"),/*#__PURE__*/React.createElement(CInput,(_React$createElement={autoComplete:\"off\",type:\"textArea\",name:\"comment\",className:\"form-control text-center\",id:\"comment\",value:null},_defineProperty(_React$createElement,\"autoComplete\",\"off\"),_defineProperty(_React$createElement,\"onChange\",function onChange(e){return setLoanPayments(_objectSpread({},loanPayments));}),_React$createElement)))),/*#__PURE__*/React.createElement(Modal.Footer,null,save&&/*#__PURE__*/React.createElement(CButton,{onClick:handleSubmit,color:\"success\"},\"Submit\"),edit&&/*#__PURE__*/React.createElement(CButton,{onClick:handleUpdate,color:\"info\"},\"Update\"),/*#__PURE__*/React.createElement(CButton,{onClick:handleClose,color:\"danger\"},\"Close\"))));};export default LoanRepayment;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanRepayment.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","useParams","axios","moment","apiUrl","reportUrl","Modal","auth","Swal","Card","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","LoanRepayment","loanees","setLoanees","getCurrentUser","user","setUser","staff","setStaff","daysPayments","setDaysPayments","show","setShow","fullName","setFullName","amount","overage","shortage","bulkCash","setBulkCash","Date","todayDate","setTodayDate","payments","setPayments","formatToday","date","toISOString","slice","pageSize","setPageSize","currentPage","setCurrentPage","search","setSearch","edit","setEdit","render","setRender","save","setSave","colPayments","setColPayments","todaysPayments","setTodaysPayments","loanBal","setLoanBal","dateOfCollection","officer","customer","modeOfPayment","loanPayments","setLoanPayments","tdate","setTdate","getActiveLoans","get","results","data","getBulkCash","TotalSubmitted","getPayments","TotalDailyCollections","getDaysPayments","handleAmountChange","e","currentTarget","value","formatter","Intl","NumberFormat","style","currency","handleCustomerSelect","c","id","loanBalance","handleSearch","event","filter","toLowerCase","includes","dataTouse","length","handleClose","handleSubmit","fire","post","statusText","showForEdit","p","loanId","_id","entryBy","comment","handleRemovePayment","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","delete","status","isDenied","handleUpdate","console","log","put","handleMakePayment","handleSubmitCollections","openCustomerListAsReport","url","windowFeatures","window","open","handleSelectDate","width","height","format","parseFloat","map","index","Customer","ModeOfPayment","Amount","accountNumber"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate, useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport { apiUrl } from '../../config.json'\nimport { reportUrl } from '../../config.json'\nimport { Modal } from 'react-bootstrap'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\n\nimport Card from 'react-bootstrap/Card'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n  //Modal,\n} from 'reactstrap'\n\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nconst LoanRepayment = () => {\n  const [loanees, setLoanees] = useState([])\n  const [user, setUser] = useState(auth.getCurrentUser())\n  const [staff, setStaff] = useState([])\n  //const user = auth.getCurrentUser();\n  const [daysPayments, setDaysPayments] = useState([])\n  const [show, setShow] = useState(false)\n  const [fullName, setFullName] = useState('')\n  const [bulkCash, setBulkCash] = useState({\n    amount: 0,\n    overage: 0,\n    shortage: 0,\n  })\n  const [todayDate, setTodayDate] = useState(new Date())\n  const [payments, setPayments] = useState(0)\n  const formatToday = (date) => date.toISOString().slice(0, 10)\n  const [pageSize, setPageSize] = useState(1)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [search, setSearch] = useState('')\n  const [edit, setEdit] = useState(false)\n  const [render, setRender] = useState(false)\n  const [save, setSave] = useState(true)\n  const [colPayments, setColPayments] = useState([])\n  const [todaysPayments, setTodaysPayments] = useState([])\n  const [loanBal, setLoanBal] = useState(0)\n  const [loanPayments, setLoanPayments] = useState({\n    dateOfCollection: new Date().toISOString().slice(0, 10),\n    officer: '',\n    customer: '',\n    amount: '',\n    modeOfPayment: '',\n  })\n  const [tdate, setTdate] = useState(new Date().toISOString().slice(0, 10))\n\n  useEffect(() => {\n    const getActiveLoans = async () => {\n      const results = await axios.get(\n        apiUrl + '/loan/dailycollections/' + user.staff,\n      )\n      setLoanees(results.data)\n    }\n    getActiveLoans()\n  }, [loanees, render])\n\n  useEffect(() => {\n    async function getBulkCash() {\n      try {\n        const results = await axios.get(\n          apiUrl + '/loan/bulkCash/submitted/' + tdate + '/' + user.staff,\n        )\n        setBulkCash({\n          ...bulkCash,\n          amount: results.data[0].TotalSubmitted,\n          // overage: results.data[0].overage,\n          // shortage: results.data[0].shortage,\n        })\n      } catch (ex) {}\n    }\n    getBulkCash()\n  }, [tdate, render])\n\n  useEffect(() => {\n    async function getPayments() {\n      const results = await axios.get(\n        apiUrl + '/loan/dailycollections/' + tdate + '/' + user.staff,\n      )\n      setPayments(results.data[0].TotalDailyCollections)\n      // console.log('Payments: ' + formatToday(todayDate))\n    }\n    getPayments()\n    //console.log(tdate)\n  }, [render, tdate])\n\n  useEffect(() => {\n    async function getDaysPayments() {\n      const results = await axios.get(\n        apiUrl +\n          '/loan/dailycollections/dayspayments/' +\n          tdate +\n          '/' +\n          user.staff,\n      )\n      setDaysPayments(results.data)\n      // console.log('Payments: ' + formatToday(todayDate))\n    }\n    getDaysPayments()\n    //console.log(daysPayments)\n  }, [render, tdate])\n\n  const handleAmountChange = (e) => {\n    setLoanPayments({\n      ...loanPayments,\n      amount: e.currentTarget.value,\n      officer: user.staff,\n    })\n  }\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  const handleCustomerSelect = async (c) => {\n    const loanBalance = await axios.get(\n      apiUrl + '/loan/dailycollections/bal/' + c.id,\n    )\n    setFullName(c.fullName)\n    setLoanBal(loanBalance.data[0].loanBalance)\n    setLoanPayments({\n      customer: c.id,\n      dateOfCollection: tdate,\n      officer: user.staff,\n    })\n  }\n\n  const handleSearch = (event) => {\n    setSearch(event.currentTarget.value)\n  }\n\n  const data = {\n    customer: loanees.filter((c) =>\n      c.fullName.toLowerCase().includes(search.toLowerCase()),\n    ),\n  }\n\n  const dataTouse = search.length === 0 ? loanees : data.customer\n\n  const handleClose = () => {\n    setLoanPayments({\n      customer: '',\n      amount: '',\n      modeOfPayment: '',\n      officer: '',\n      dateOfCollection: '',\n    })\n    setFullName('')\n    setShow(false)\n  }\n\n  const handleSubmit = async () => {\n    if (bulkCash.amount - payments < loanPayments.amount)\n      return Swal.fire(\n        'OOPS',\n        'Payment Unsuccessful - Insufficient Bulk Amount',\n        'error',\n      )\n    try {\n      const results = await axios.post(\n        apiUrl + '/loan/dailycollections',\n        loanPayments,\n      )\n      if (results.statusText === 'OK') {\n        Swal.fire('Success', 'Payment Made', 'success')\n        setLoanPayments({\n          customer: '',\n          amount: '',\n          modeOfPayment: '',\n          officer: '',\n          dateOfCollection: '',\n        })\n        setRender(!render)\n      } else {\n        //console.log(results)\n        return Swal.fire('OOPS', 'Payment Unsuccessful', 'error')\n      }\n    } catch (ex) {\n      //console.log(ex)\n      return Swal.fire('OOPS', ex + ' [Payment Unsuccessful]', 'error')\n    }\n  }\n\n  const showForEdit = (p) => {\n    setLoanPayments({\n      loanId: p.loanId._id,\n      customer: p.customer._id,\n      fullName: p.customer.fullName,\n      entryBy: user._id,\n      dateOfCollection: new Date().toISOString().slice(0, 10),\n      modeOfPayment: p.modeOfPayment,\n      amount: p.amount,\n      officer: p.officer.id,\n      comment: p.comment,\n      id: p.id,\n    })\n    setShow(!show)\n    setEdit(true)\n    setSave(false)\n  }\n\n  const handleRemovePayment = async (p) => {\n    //console.log(p)\n    Swal.fire({\n      title: 'Do you want to remove this payment?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Remove',\n      denyButtonText: `Don't Remove`,\n    }).then(async (result) => {\n      /* Read more about isConfirmed, isDenied below */\n      if (result.isConfirmed) {\n        try {\n          const results = await axios.delete(\n            apiUrl + '/loan/dailycollections/' + p.id,\n          )\n\n          if (results.status === 200) {\n            Swal.fire('Success', 'Payment Removed', 'success')\n          }\n          setRender(!render)\n        } catch (ex) {\n          Swal.fire('Error', ex + ' Payment Removal Failed', 'error')\n        }\n      } else if (result.isDenied) {\n        Swal.fire('Payment Removal Failed', '', 'error')\n      }\n    })\n    setRender(!render)\n    //console.log(results)\n  }\n  const handleUpdate = async () => {\n    console.log(loanPayments)\n    try {\n      const results = await axios.put(\n        apiUrl + '/collectionsheet/' + loanPayments.id,\n        loanPayments,\n      )\n      if (results.status === 200) {\n        Swal.fire('Success', 'Payment Updated', 'success')\n        setLoanPayments({\n          customer: '',\n          fullName: '',\n          amount: '',\n          modeOfPayment: '',\n          loanId: '',\n          officer: '',\n          comment: '',\n          entryBy: '',\n          dateOfCollection: '',\n        })\n        setRender(!render)\n      } else {\n        return Swal.fire('OOPS', 'Payment Update Unsuccessful', 'error')\n      }\n    } catch (ex) {\n      return Swal.fire('OOPS', ex + ' [Payment Update Unsuccessful]', 'error')\n    }\n  }\n\n  const handleMakePayment = () => {\n    if (bulkCash.amount <= 0)\n      return Swal.fire(\n        'OOPS',\n        'You have NOT submitted Bulk Cash for ' + tdate,\n        'error',\n      )\n    setSave(true)\n    setEdit(false)\n    setShow(true)\n  }\n\n  const handleSubmitCollections = async () => {\n    try {\n      await axios.post(\n        apiUrl + '/loan/dailycollections/' + user.staff + '/' + tdate,\n      )\n      Swal.fire('Submission Done', 'Days Collections Submitted!', 'success')\n      setRender(!render)\n      openCustomerListAsReport(\n        reportUrl + '/dailyEntry.aspx?' + user.staff + '?' + tdate,\n      )\n    } catch (ex) {\n      return Swal.fire('OOPS', ex + ' [Collections Submission Failed]', 'error')\n    }\n  }\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=380,height=320'\n    window.open(url, 'Daily Entry', 'popup', windowFeatures)\n  }\n  const handleSelectDate = (e) => {\n    setTdate(e.currentTarget.value)\n\n    console.log(\n      bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments,\n    )\n  }\n\n  return (\n    <div>\n      <div className=\"col-sm-12\">\n        <h3 className=\"centertext mt-\">Customer Loan Repayment</h3>\n        <CInput\n          type=\"date\"\n          name=\"dateToday\"\n          className=\"form-control text-center col-sm-12\"\n          id=\"dateToday\"\n          value={tdate}\n          onChange={handleSelectDate}\n        />\n        <div className=\"row text-center col-sm-12 justify-content-center\">\n          <div classname=\"m-3\">\n            <Card style={{ width: '12rem', height: '6rem' }} className=\"m-3\">\n              <Card.Body>\n                <Card.Title>Submitted</Card.Title>\n                {formatter.format(bulkCash.amount)}\n              </Card.Body>\n            </Card>\n          </div>\n\n          <div classname=\"m-3\">\n            <Card style={{ width: '12rem', height: '6rem' }} className=\"m-3\">\n              <Card.Body>\n                <Card.Title>Payments</Card.Title>\n                {formatter.format(payments)}\n              </Card.Body>\n            </Card>\n          </div>\n\n          <div classname=\"m-3 justify-content-right\">\n            <Card\n              style={{ width: '12rem', height: '6rem' }}\n              className={\n                parseFloat(bulkCash.amount - payments) > 0\n                  ? 'positivebalcolor m-3'\n                  : 'negativebalcolor m-3'\n              }\n            >\n              <Card.Body>\n                <Card.Title>\n                  {parseFloat(bulkCash.amount - payments) < 0\n                    ? 'Overage'\n                    : 'Balance'}\n                </Card.Title>\n                {formatter.format(parseFloat(bulkCash.amount - payments))}\n              </Card.Body>\n            </Card>\n          </div>\n        </div>\n\n        <CButton\n          className=\"mt-3 mb-2 float-right\"\n          onClick={handleMakePayment}\n          color=\"success\"\n        >\n          Make Loan Payments\n        </CButton>\n        <Table className=\"table align-left mb-0 bg-white table-sm\">\n          <thead>\n            <tr className=\"fs-sm\">\n              <th></th>\n              <th>Customer</th>\n              <th>Mode</th>\n              <th>Amount</th>\n              <th>Status</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {daysPayments.map((c, index) => (\n              <tr key={c.id}>\n                <td>{index + 1}</td>\n\n                <td>{c.Customer}</td>\n                <td>{c.ModeOfPayment}</td>\n                <td>{formatter.format(c.Amount)}</td>\n                <td>{c.status}</td>\n                {c.status === 'Not Submitted' ? (\n                  <td>\n                    <CButton\n                      className=\"btn-sm\"\n                      color=\"danger\"\n                      onClick={() => handleRemovePayment(c)}\n                    >\n                      remove\n                    </CButton>\n                  </td>\n                ) : null}\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n        <div className=\"d-flex mt-5 justify-content-center\">\n          {bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments ==\n            0 && (\n            <CButton\n              className=\"col-sm-3 float-center\"\n              color=\"danger\"\n              onClick={handleSubmitCollections}\n            >\n              Submit Days Collections\n            </CButton>\n          )}\n        </div>\n      </div>\n\n      <Modal\n        className=\"modalCustomer fade \"\n        size=\"md\"\n        show={show}\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n      >\n        <Modal.Body className=\"modal-body col-sm-12\">\n          <div className=\"float-center mb-2\">\n            <CInput\n              className=\"col-sm-12 mb-2 text-center\"\n              placeholder=\" Search Loan Customer\"\n              onChange={handleSearch}\n            />\n          </div>\n          <Table className=\"table mb-3 mt-2 align-middle mb-0 bg-white table-sm\">\n            <thead>\n              <tr className=\"fs-sm\">\n                <th>A/C No.</th>\n                <th>Name</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {dataTouse.map((c, index) => (\n                <tr key={c.id} onClick={() => handleCustomerSelect(c)}>\n                  <td>{c.accountNumber}</td>\n                  <td>{c.fullName}</td>\n                  <td>\n                    <CButton\n                      color=\"danger\"\n                      onClick={() => handleCustomerSelect(c)}\n                      className=\"btn-sm\"\n                    >\n                      Select\n                    </CButton>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n\n          <form>\n            <label htmlFor=\"nameOfOfficer\" className=\"form-label\">\n              Name of Customer\n            </label>\n            <CInput\n              name=\"nameOfCustomer\"\n              className=\"text-center\"\n              type=\"text\"\n              id=\"nameOfCustomer\"\n              value={fullName}\n              autoComplete=\"off\"\n              readOnly\n            />\n\n            <label htmlFor=\"Balance\" className=\"form-label\">\n              Current Loan Balance\n            </label>\n            <CInput\n              name=\"Balance\"\n              className=\"form-control  text-center\"\n              type=\"text\"\n              id=\"Balance\"\n              value={formatter.format(loanBal)}\n              autoComplete=\"off\"\n              readOnly\n            />\n\n            <CSelect\n              className=\"form-select  mb-3 mt-4 text-center\"\n              aria-label=\".form-select-lg\"\n              value={loanPayments.modeOfPayment}\n              onChange={(e) =>\n                setLoanPayments({\n                  ...loanPayments,\n                  modeOfPayment: e.currentTarget.value,\n                })\n              }\n            >\n              <option value=\"\">Select Mode of Payment</option>\n              <option value=\"Cash\">Cash</option>\n              {/* <option value=\"Mobile Money\">Mobile Money</option>*/}\n            </CSelect>\n\n            <label htmlFor=\"amountReceived\" className=\"form-label\">\n              Amount (GHS)\n            </label>\n            <CInput\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"amountReceived\"\n              className=\"form-control  text-right\"\n              id=\"amountReceived\"\n              value={loanPayments.amount}\n              onChange={handleAmountChange}\n            />\n\n            <label htmlFor=\"comment\" className=\"form-label\">\n              Comment\n            </label>\n            <CInput\n              autoComplete=\"off\"\n              type=\"textArea\"\n              name=\"comment\"\n              className=\"form-control text-center\"\n              id=\"comment\"\n              value={null}\n              autoComplete=\"off\"\n              onChange={(e) =>\n                setLoanPayments({\n                  ...loanPayments,\n                  //comment: e.currentTarget.value,\n                })\n              }\n            />\n          </form>\n        </Modal.Body>\n        <Modal.Footer>\n          {save && (\n            <CButton onClick={handleSubmit} color=\"success\">\n              Submit\n            </CButton>\n          )}\n          {edit && (\n            <CButton onClick={handleUpdate} color=\"info\">\n              Update\n            </CButton>\n          )}\n          <CButton onClick={handleClose} color=\"danger\">\n            Close\n          </CButton>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  )\n}\n\nexport default LoanRepayment\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import CIcon from\"@coreui/icons-react\";import axios from\"axios\";import Joi from\"joi-browser\";import Swal from\"sweetalert2\";import moment from\"moment\";import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend//CDropdownItem,\n,CForm//CCardFooter,\n// CDropdownToggle,\n//CInputRadio,\n// CDropdown,\n,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n//CSelect,\n//CDropdownMenu,\n//CCardFooter,\n,CInputGroup//CForm,\n}from\"@coreui/react\";//import { DocsLink } from 'src/reusable'\n//import usersData from './psm/users/usersData';\nimport usersData from\"../users/UsersData\";var HolidaySetup=function HolidaySetup(){var getBadge=function getBadge(status){switch(status){case\"Active\":return\"success\";case\"Inactive\":return\"secondary\";case\"Pending\":return\"warning\";case\"Banned\":return\"danger\";default:return\"primary\";}};var fields=[\"name\",\"Phone Number\",\"GH-ID\",\"registered\",\"role\",\"status\"];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),visible=_useState2[0],setVisible=_useState2[1];var _useState3=useState({holiday:\"\",hdate:new Date(),year:null}),_useState4=_slicedToArray(_useState3,2),holidays=_useState4[0],setHolidays=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),iHolidays=_useState6[0],setIHolidays=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),disableButton=_useState10[0],setDisableButton=_useState10[1];useEffect(function(){function getHolidays(){return _getHolidays.apply(this,arguments);}function _getHolidays(){_getHolidays=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://ugmcservice.herokuapp.com/api/holidays/days/\"+new Date().getFullYear());case 2:results=_context.sent;setIHolidays(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getHolidays.apply(this,arguments);}getHolidays();},[iHolidays]);var joiHolidaySchema=Joi.object().keys({holiday:Joi.string().required().label(\"Holiday\"),hdate:Joi.date().required().label(\"date\"),year:Joi.number().required().label(\"Year\")});var validateEntry=function validateEntry(){var result=Joi.validate(holidays,joiHolidaySchema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:validateEntry();setDisableButton(true);console.log(holidays);_context2.prev=3;_context2.next=6;return axios.post(\"https://ugmcservice.herokuapp.com/api/holidays\",holidays);case 6:results=_context2.sent;if(results.status===200){Swal.fire(\"Success\",\"Holiday Setup Successfully\",\"success\");setDisableButton(false);}else{Swal.fire(\"OOPS\",\"Holiday Setup Failed\",\"error\");setDisableButton(false);}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);Swal.fire(\"OOPS\",\"Holiday Setup Failed \"+_context2.t0,\"error\");setDisableButton(false);case 14:setHolidays({holiday:\"\",hdate:\"\",year:\"\"});case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleEditClicked=function handleEditClicked(s){console.log(s);};var handleSearch=function handleSearch(e){setSearch(e.currentTarget.value);};var data={holidays:iHolidays.filter(function(item){return item.holiday.toLowerCase().includes(search.toLowerCase());})};var dataTouse=search.length===0?iHolidays:data.holidays;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CModalHeader,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"appendedInputButtons\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"controls\"},/*#__PURE__*/React.createElement(CInputGroup,null,/*#__PURE__*/React.createElement(CInput,{id:\"appendedInputButtons\",size:\"16\",type:\"text\",onChange:handleSearch}),/*#__PURE__*/React.createElement(CInputGroupAppend,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CButton,{color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(CButton,{color:\"primary\",onClick:function onClick(){return setVisible(!visible);}},\"+ New Holidays\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"success\",onClick:function onClick(){return setVisible(!visible);}},\"Export Report\")))))))),/*#__PURE__*/React.createElement(CModal,{show:visible,onClose:function onClose(){return setVisible(!visible);},color:\"primary\",size:\"lg\"},/*#__PURE__*/React.createElement(CModalHeader,{closeButton:true},/*#__PURE__*/React.createElement(CModalTitle,null,\"Setup | Holidays\")),/*#__PURE__*/React.createElement(CModalBody,null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,{xs:\"12\",md:\"12\"},/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(CCardHeader,null,\"HOLIDAYS SETUP\"),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"LeaveYear\",className:\"form-label\"},\"Holiday\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",value:holidays.holiday// placeholder=\"Year\"\n,onChange:function onChange(e){return setHolidays(_objectSpread(_objectSpread({},holidays),{},{holiday:e.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"date\",className:\"form-label\"},\"Holiday Date\"),\" \",/*#__PURE__*/React.createElement(\"input\",{type:\"date\",className:\"form-control myInput\",value:holidays.hdate,onChange:function onChange(e){return setHolidays(_objectSpread(_objectSpread({},holidays),{},{hdate:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"LeaveYear\",className:\"form-label\"},\"Year\"),/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",value:holidays.year,placeholder:\"2001\",onChange:function onChange(e){return setHolidays(_objectSpread(_objectSpread({},holidays),{},{year:e.target.value}));}})))))))))),/*#__PURE__*/React.createElement(CModalFooter,null,/*#__PURE__*/React.createElement(CButton,{color:\"primary\",onClick:handleSubmit},\"Save\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"warning\",onClick:function onClick(){return setVisible(!visible);}},\"Reset\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"danger\",onClick:function onClick(){return setVisible(!visible);}},\"Close\"))),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-hover table-outline mb-0 d-none d-sm-table\"},/*#__PURE__*/React.createElement(\"caption\",null,\"Holidays\"),/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Holiday\"),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"\"},dataTouse.map(function(s,index){return/*#__PURE__*/React.createElement(\"tr\",{key:s._id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,s.holiday),/*#__PURE__*/React.createElement(\"td\",null,moment(s.hdate).format(\"DD,MMMM,YYYY\")),/*#__PURE__*/React.createElement(\"td\",{className:\"float-right\"},/*#__PURE__*/React.createElement(CButton,{color:\"info\",size:\"sm\",onClick:function onClick(s){return handleEditClicked(s);}},\"Edit\")));}))))))));};export default HolidaySetup;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/setup/Holidays.js"],"names":["React","useState","useEffect","CIcon","axios","Joi","Swal","moment","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CForm","CModalTitle","CFormGroup","CLabel","CInput","CInputGroup","usersData","HolidaySetup","getBadge","status","fields","visible","setVisible","holiday","hdate","Date","year","holidays","setHolidays","iHolidays","setIHolidays","search","setSearch","disableButton","setDisableButton","getHolidays","get","getFullYear","results","data","joiHolidaySchema","object","keys","string","required","label","date","number","validateEntry","result","validate","error","details","message","handleSubmit","console","log","post","fire","handleEditClicked","s","handleSearch","e","currentTarget","value","filter","item","toLowerCase","includes","dataTouse","length","target","map","index","_id","format"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,qBAAlB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,OACEC,MADF,CAEEC,KAFF,CAGEC,SACA;AAJF,CAKEC,IALF,CAMEC,UANF,CAOEC,IAPF,CAQEC,OARF,CASEC,MATF,CAUEC,YAVF,CAWEC,YAXF,CAYEC,UAZF,CAaEC,WAbF,CAcEC,iBAdF,CAeEC,kBACA;AAhBF,CAiBEC,KACA;AACA;AACA;AACA;AArBF,CAsBEC,WACA;AACA;AAxBF,CAyBEC,UAzBF,CA0BEC,MACA;AA3BF,CA4BEC,MACA;AACA;AACA;AACA;AAhCF,CAiCEC,WACA;AAlCF,KAmCO,eAnCP,CAoCA;AAEA;AAEA,MAAOC,CAAAA,SAAP,KAAsB,oBAAtB,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,MAAD,CAAY,CAC3B,OAAQA,MAAR,EACE,IAAK,QAAL,CACE,MAAO,SAAP,CACF,IAAK,UAAL,CACE,MAAO,WAAP,CACF,IAAK,SAAL,CACE,MAAO,SAAP,CACF,IAAK,QAAL,CACE,MAAO,QAAP,CACF,QACE,MAAO,SAAP,CAVJ,CAYD,CAbD,CAcA,GAAMC,CAAAA,MAAM,CAAG,CACb,MADa,CAEb,cAFa,CAGb,OAHa,CAIb,YAJa,CAKb,MALa,CAMb,QANa,CAAf,CAfyB,cAuBK/B,QAAQ,CAAC,KAAD,CAvBb,wCAuBlBgC,OAvBkB,eAuBTC,UAvBS,8BAwBOjC,QAAQ,CAAC,CACvCkC,OAAO,CAAE,EAD8B,CAEvCC,KAAK,CAAE,GAAIC,CAAAA,IAAJ,EAFgC,CAGvCC,IAAI,CAAE,IAHiC,CAAD,CAxBf,yCAwBlBC,QAxBkB,eAwBRC,WAxBQ,8BA6BSvC,QAAQ,CAAC,EAAD,CA7BjB,yCA6BlBwC,SA7BkB,eA6BPC,YA7BO,8BA8BGzC,QAAQ,CAAC,EAAD,CA9BX,yCA8BlB0C,MA9BkB,eA8BVC,SA9BU,8BA+BiB3C,QAAQ,CAAC,KAAD,CA/BzB,0CA+BlB4C,aA/BkB,gBA+BHC,gBA/BG,gBAiCzB5C,SAAS,CAAC,UAAM,SACC6C,CAAAA,WADD,2IACd,qKACwB3C,CAAAA,KAAK,CAAC4C,GAAN,CACpB,uDACE,GAAIX,CAAAA,IAAJ,GAAWY,WAAX,EAFkB,CADxB,QACQC,OADR,eAKER,YAAY,CAACQ,OAAO,CAACC,IAAT,CAAZ,CALF,sDADc,8CAQdJ,WAAW,GACZ,CATQ,CASN,CAACN,SAAD,CATM,CAAT,CAWA,GAAMW,CAAAA,gBAAgB,CAAG/C,GAAG,CAACgD,MAAJ,GAAaC,IAAb,CAAkB,CACzCnB,OAAO,CAAE9B,GAAG,CAACkD,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,SAA9B,CADgC,CAEzCrB,KAAK,CAAE/B,GAAG,CAACqD,IAAJ,GAAWF,QAAX,GAAsBC,KAAtB,CAA4B,MAA5B,CAFkC,CAGzCnB,IAAI,CAAEjC,GAAG,CAACsD,MAAJ,GAAaH,QAAb,GAAwBC,KAAxB,CAA8B,MAA9B,CAHmC,CAAlB,CAAzB,CAMA,GAAMG,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CAC1B,GAAMC,CAAAA,MAAM,CAAGxD,GAAG,CAACyD,QAAJ,CAAavB,QAAb,CAAuBa,gBAAvB,CAAf,CACA,GAAIS,MAAM,CAACE,KAAX,CAAkB,CAChB,MAAOF,CAAAA,MAAM,CAACE,KAAP,CAAaC,OAAb,CAAqB,CAArB,EAAwBC,OAA/B,CACD,CAFD,IAEO,CACL,MAAO,KAAP,CACD,CACF,CAPD,CASA,GAAMC,CAAAA,YAAY,0FAAG,oJACnBN,aAAa,GACbd,gBAAgB,CAAC,IAAD,CAAhB,CACAqB,OAAO,CAACC,GAAR,CAAY7B,QAAZ,EAHmB,wCAKKnC,CAAAA,KAAK,CAACiE,IAAN,CACpB,gDADoB,CAEpB9B,QAFoB,CALL,QAKXW,OALW,gBAUjB,GAAIA,OAAO,CAACnB,MAAR,GAAmB,GAAvB,CAA4B,CAC1BzB,IAAI,CAACgE,IAAL,CAAU,SAAV,CAAqB,4BAArB,CAAmD,SAAnD,EACAxB,gBAAgB,CAAC,KAAD,CAAhB,CACD,CAHD,IAGO,CACLxC,IAAI,CAACgE,IAAL,CAAU,MAAV,CAAkB,sBAAlB,CAA0C,OAA1C,EACAxB,gBAAgB,CAAC,KAAD,CAAhB,CACD,CAhBgB,qFAkBjBxC,IAAI,CAACgE,IAAL,CAAU,MAAV,CAAkB,oCAAlB,CAAiD,OAAjD,EACAxB,gBAAgB,CAAC,KAAD,CAAhB,CAnBiB,QAsBnBN,WAAW,CAAC,CAAEL,OAAO,CAAE,EAAX,CAAeC,KAAK,CAAE,EAAtB,CAA0BE,IAAI,CAAE,EAAhC,CAAD,CAAX,CAtBmB,uEAAH,kBAAZ4B,CAAAA,YAAY,0CAAlB,CAwBA,GAAMK,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,CAAD,CAAO,CAC/BL,OAAO,CAACC,GAAR,CAAYI,CAAZ,EACD,CAFD,CAGA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B9B,SAAS,CAAC8B,CAAC,CAACC,aAAF,CAAgBC,KAAjB,CAAT,CACD,CAFD,CAIA,GAAMzB,CAAAA,IAAI,CAAG,CACXZ,QAAQ,CAAEE,SAAS,CAACoC,MAAV,CAAiB,SAACC,IAAD,QACzBA,CAAAA,IAAI,CAAC3C,OAAL,CAAa4C,WAAb,GAA2BC,QAA3B,CAAoCrC,MAAM,CAACoC,WAAP,EAApC,CADyB,EAAjB,CADC,CAAb,CAMA,GAAME,CAAAA,SAAS,CAAGtC,MAAM,CAACuC,MAAP,GAAkB,CAAlB,CAAsBzC,SAAtB,CAAkCU,IAAI,CAACZ,QAAzD,CAEA,mBACE,qDACE,oBAAC,IAAD,mBACE,oBAAC,IAAD,mBACE,oBAAC,KAAD,mBACE,4CACE,oBAAC,YAAD,mBACE,oBAAC,IAAD,mBACE,oBAAC,UAAD,mBACE,oBAAC,MAAD,EAAQ,OAAO,CAAC,sBAAhB,EADF,cAEE,2BAAK,SAAS,CAAC,UAAf,eACE,oBAAC,WAAD,mBACE,oBAAC,MAAD,EACE,EAAE,CAAC,sBADL,CAEE,IAAI,CAAC,IAFP,CAGE,IAAI,CAAC,MAHP,CAIE,QAAQ,CAAEkC,YAJZ,EADF,cAOE,oBAAC,iBAAD,mBACE,oBAAC,IAAD,mBACE,oBAAC,OAAD,EAAS,KAAK,CAAC,SAAf,WADF,CADF,cAIE,oBAAC,OAAD,EACE,KAAK,CAAC,SADR,CAEE,OAAO,CAAE,yBAAMvC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAFX,mBAJF,CASa,GATb,cAUE,oBAAC,OAAD,EACE,KAAK,CAAC,SADR,CAEE,OAAO,CAAE,yBAAMC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAFX,kBAVF,CAPF,CADF,CAFF,CADF,CADF,CADF,CADF,cAsCE,oBAAC,MAAD,EACE,IAAI,CAAEA,OADR,CAEE,OAAO,CAAE,yBAAMC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAFX,CAGE,KAAK,CAAC,SAHR,CAIE,IAAI,CAAC,IAJP,eAME,oBAAC,YAAD,EAAc,WAAW,KAAzB,eACE,oBAAC,WAAD,yBADF,CANF,cASE,oBAAC,UAAD,mBACE,6CACE,oBAAC,IAAD,mBACE,oBAAC,IAAD,EAAM,EAAE,CAAC,IAAT,CAAc,EAAE,CAAC,IAAjB,eACE,oBAAC,KAAD,mBACE,oBAAC,WAAD,uBADF,cAEE,oBAAC,SAAD,mBACE,2BAAK,SAAS,CAAC,4BAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,OAAO,CAAC,WADV,CAEE,SAAS,CAAC,YAFZ,YADF,cAOE,6BACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAEM,QAAQ,CAACJ,OAChB;AAJF,CAKE,QAAQ,CAAE,kBAACuC,CAAD,QACRlC,CAAAA,WAAW,gCACND,QADM,MAETJ,OAAO,CAAEuC,CAAC,CAACS,MAAF,CAASP,KAFT,GADH,EALZ,EAPF,CADF,cAsBE,2BAAK,SAAS,CAAC,YAAf,eACE,6BAAO,OAAO,CAAC,MAAf,CAAsB,SAAS,CAAC,YAAhC,iBADF,CAGW,GAHX,cAIE,6BACE,IAAI,CAAC,MADP,CAEE,SAAS,CAAC,sBAFZ,CAGE,KAAK,CAAErC,QAAQ,CAACH,KAHlB,CAIE,QAAQ,CAAE,kBAACsC,CAAD,QACRlC,CAAAA,WAAW,gCACND,QADM,MAETH,KAAK,CAAEsC,CAAC,CAACC,aAAF,CAAgBC,KAFd,GADH,EAJZ,EAJF,CAtBF,cAuCE,2BAAK,SAAS,CAAC,YAAf,eACE,6BACE,OAAO,CAAC,WADV,CAEE,SAAS,CAAC,YAFZ,SADF,cAOE,6BACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,KAAK,CAAErC,QAAQ,CAACD,IAHlB,CAIE,WAAW,CAAC,MAJd,CAKE,QAAQ,CAAE,kBAACoC,CAAD,QACRlC,CAAAA,WAAW,gCACND,QADM,MAETD,IAAI,CAAEoC,CAAC,CAACS,MAAF,CAASP,KAFN,GADH,EALZ,EAPF,CAvCF,CADF,CADF,CAFF,CADF,CADF,CADF,CADF,CATF,cAoFE,oBAAC,YAAD,mBACE,oBAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,OAAO,CAAEV,YAAlC,SADF,CAGa,GAHb,cAIE,oBAAC,OAAD,EAAS,KAAK,CAAC,SAAf,CAAyB,OAAO,CAAE,yBAAMhC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAAlC,UAJF,CAMa,GANb,cAOE,oBAAC,OAAD,EAAS,KAAK,CAAC,QAAf,CAAwB,OAAO,CAAE,yBAAMC,CAAAA,UAAU,CAAC,CAACD,OAAF,CAAhB,EAAjC,UAPF,CApFF,CAtCF,cAuIE,oBAAC,SAAD,mBACE,6BAAO,SAAS,CAAC,wDAAjB,eACE,8CADF,cAEE,6BAAO,SAAS,CAAC,aAAjB,eACE,2CACE,uCADF,cAEE,wCAFF,cAGE,qCAHF,cAIE,uCAJF,CADF,CAFF,cAUE,6BAAO,SAAS,CAAC,EAAjB,EACGgD,SAAS,CAACG,GAAV,CAAc,SAACZ,CAAD,CAAIa,KAAJ,qBACb,0BAAI,GAAG,CAAEb,CAAC,CAACc,GAAX,eACE,8BAAKD,KAAK,CAAG,CAAb,CADF,cAEE,8BAAKb,CAAC,CAACrC,OAAP,CAFF,cAIE,8BAAK5B,MAAM,CAACiE,CAAC,CAACpC,KAAH,CAAN,CAAgBmD,MAAhB,CAAuB,cAAvB,CAAL,CAJF,cAKE,0BAAI,SAAS,CAAC,aAAd,eACE,oBAAC,OAAD,EACE,KAAK,CAAC,MADR,CAEE,IAAI,CAAC,IAFP,CAGE,OAAO,CAAE,iBAACf,CAAD,QAAOD,CAAAA,iBAAiB,CAACC,CAAD,CAAxB,EAHX,SADF,CALF,CADa,EAAd,CADH,CAVF,CADF,CAvIF,CADF,CADF,CADF,CADF,CAgLD,CAlRD,CAoRA,cAAe3C,CAAAA,YAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport CIcon from \"@coreui/icons-react\";\nimport axios from \"axios\";\nimport Joi from \"joi-browser\";\nimport Swal from \"sweetalert2\";\nimport moment from \"moment\";\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  //CDropdownItem,\n  CForm,\n  //CCardFooter,\n  // CDropdownToggle,\n  //CInputRadio,\n  // CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  //CSelect,\n  //CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from \"@coreui/react\";\n//import { DocsLink } from 'src/reusable'\n\n//import usersData from './psm/users/usersData';\n\nimport usersData from \"../users/UsersData\";\n\nconst HolidaySetup = () => {\n  const getBadge = (status) => {\n    switch (status) {\n      case \"Active\":\n        return \"success\";\n      case \"Inactive\":\n        return \"secondary\";\n      case \"Pending\":\n        return \"warning\";\n      case \"Banned\":\n        return \"danger\";\n      default:\n        return \"primary\";\n    }\n  };\n  const fields = [\n    \"name\",\n    \"Phone Number\",\n    \"GH-ID\",\n    \"registered\",\n    \"role\",\n    \"status\",\n  ];\n  const [visible, setVisible] = useState(false);\n  const [holidays, setHolidays] = useState({\n    holiday: \"\",\n    hdate: new Date(),\n    year: null,\n  });\n  const [iHolidays, setIHolidays] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [disableButton, setDisableButton] = useState(false);\n\n  useEffect(() => {\n    async function getHolidays() {\n      const results = await axios.get(\n        \"https://ugmcservice.herokuapp.com/api/holidays/days/\" +\n          new Date().getFullYear()\n      );\n      setIHolidays(results.data);\n    }\n    getHolidays();\n  }, [iHolidays]);\n\n  const joiHolidaySchema = Joi.object().keys({\n    holiday: Joi.string().required().label(\"Holiday\"),\n    hdate: Joi.date().required().label(\"date\"),\n    year: Joi.number().required().label(\"Year\"),\n  });\n\n  const validateEntry = () => {\n    const result = Joi.validate(holidays, joiHolidaySchema);\n    if (result.error) {\n      return result.error.details[0].message;\n    } else {\n      return null;\n    }\n  };\n\n  const handleSubmit = async () => {\n    validateEntry();\n    setDisableButton(true);\n    console.log(holidays);\n    try {\n      const results = await axios.post(\n        \"https://ugmcservice.herokuapp.com/api/holidays\",\n        holidays\n      );\n\n      if (results.status === 200) {\n        Swal.fire(\"Success\", \"Holiday Setup Successfully\", \"success\");\n        setDisableButton(false);\n      } else {\n        Swal.fire(\"OOPS\", \"Holiday Setup Failed\", \"error\");\n        setDisableButton(false);\n      }\n    } catch (err) {\n      Swal.fire(\"OOPS\", \"Holiday Setup Failed \" + err, \"error\");\n      setDisableButton(false);\n    }\n\n    setHolidays({ holiday: \"\", hdate: \"\", year: \"\" });\n  };\n  const handleEditClicked = (s) => {\n    console.log(s);\n  };\n  const handleSearch = (e) => {\n    setSearch(e.currentTarget.value);\n  };\n\n  const data = {\n    holidays: iHolidays.filter((item) =>\n      item.holiday.toLowerCase().includes(search.toLowerCase())\n    ),\n  };\n\n  const dataTouse = search.length === 0 ? iHolidays : data.holidays;\n\n  return (\n    <>\n      <CRow>\n        <CCol>\n          <CCard>\n            <div>\n              <CModalHeader>\n                <CCol>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"appendedInputButtons\"></CLabel>\n                    <div className=\"controls\">\n                      <CInputGroup>\n                        <CInput\n                          id=\"appendedInputButtons\"\n                          size=\"16\"\n                          type=\"text\"\n                          onChange={handleSearch}\n                        />\n                        <CInputGroupAppend>\n                          <CCol>\n                            <CButton color=\"primary\">Search</CButton>\n                          </CCol>\n                          <CButton\n                            color=\"primary\"\n                            onClick={() => setVisible(!visible)}\n                          >\n                            + New Holidays\n                          </CButton>{\" \"}\n                          <CButton\n                            color=\"success\"\n                            onClick={() => setVisible(!visible)}\n                          >\n                            Export Report\n                          </CButton>\n                        </CInputGroupAppend>\n                      </CInputGroup>\n                    </div>\n                  </CFormGroup>\n                </CCol>\n              </CModalHeader>\n            </div>\n\n            <CModal\n              show={visible}\n              onClose={() => setVisible(!visible)}\n              color=\"primary\"\n              size=\"lg\"\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>Setup | Holidays</CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n                <form>\n                  <CRow>\n                    <CCol xs=\"12\" md=\"12\">\n                      <CCard>\n                        <CCardHeader>HOLIDAYS SETUP</CCardHeader>\n                        <CCardBody>\n                          <div className=\"row justify-content-center\">\n                            <div className=\"col-6\">\n                              <div className=\"form-group\">\n                                <label\n                                  htmlFor=\"LeaveYear\"\n                                  className=\"form-label\"\n                                >\n                                  Holiday\n                                </label>\n                                <input\n                                  className=\"form-control\"\n                                  type=\"text\"\n                                  value={holidays.holiday}\n                                  // placeholder=\"Year\"\n                                  onChange={(e) =>\n                                    setHolidays({\n                                      ...holidays,\n                                      holiday: e.target.value,\n                                    })\n                                  }\n                                />\n                              </div>\n\n                              <div className=\"form-group\">\n                                <label htmlFor=\"date\" className=\"form-label\">\n                                  Holiday Date\n                                </label>{\" \"}\n                                <input\n                                  type=\"date\"\n                                  className=\"form-control myInput\"\n                                  value={holidays.hdate}\n                                  onChange={(e) =>\n                                    setHolidays({\n                                      ...holidays,\n                                      hdate: e.currentTarget.value,\n                                    })\n                                  }\n                                />\n                              </div>\n\n                              <div className=\"form-group\">\n                                <label\n                                  htmlFor=\"LeaveYear\"\n                                  className=\"form-label\"\n                                >\n                                  Year\n                                </label>\n                                <input\n                                  className=\"form-control\"\n                                  type=\"text\"\n                                  value={holidays.year}\n                                  placeholder=\"2001\"\n                                  onChange={(e) =>\n                                    setHolidays({\n                                      ...holidays,\n                                      year: e.target.value,\n                                    })\n                                  }\n                                />\n                              </div>\n                            </div>\n                          </div>\n                        </CCardBody>\n                      </CCard>\n                    </CCol>\n                  </CRow>\n                </form>\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"primary\" onClick={handleSubmit}>\n                  Save\n                </CButton>{\" \"}\n                <CButton color=\"warning\" onClick={() => setVisible(!visible)}>\n                  Reset\n                </CButton>{\" \"}\n                <CButton color=\"danger\" onClick={() => setVisible(!visible)}>\n                  Close\n                </CButton>\n              </CModalFooter>\n            </CModal>\n\n            <CCardBody>\n              <table className=\"table table-hover table-outline mb-0 d-none d-sm-table\">\n                <caption>Holidays</caption>\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th>Number</th>\n                    <th>Holiday</th>\n                    <th>Date</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody className=\"\">\n                  {dataTouse.map((s, index) => (\n                    <tr key={s._id}>\n                      <td>{index + 1}</td>\n                      <td>{s.holiday}</td>\n\n                      <td>{moment(s.hdate).format(\"DD,MMMM,YYYY\")}</td>\n                      <td className=\"float-right\">\n                        <CButton\n                          color=\"info\"\n                          size=\"sm\"\n                          onClick={(s) => handleEditClicked(s)}\n                        >\n                          Edit\n                        </CButton>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default HolidaySetup;\n"]},"metadata":{},"sourceType":"module"}
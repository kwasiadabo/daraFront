{"ast":null,"code":"import _objectSpread from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanPrincipalEntry.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate } from 'react-router-dom';\nimport axios from 'axios';\nimport baseUrl from '../../config.json';\nimport auth from '../../components/services/authService';\nimport Swal from 'sweetalert2';\nimport moment from 'moment';\nimport { apiUrl } from '../../config.json';\nimport Joi from 'joi-browser';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from 'reactstrap';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup //CForm,\n} from '@coreui/react';\n\nvar BookLoanPrincipal = function BookLoanPrincipal(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      products = _useState2[0],\n      setProducts = _useState2[1];\n\n  var _useState3 = useState({\n    disbursementId: 0,\n    customer: 0,\n    principal: 0,\n    purpose: ''\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      principalData = _useState4[0],\n      setPrincipalData = _useState4[1];\n\n  useEffect(function () {\n    function getProducts() {\n      return _getProducts.apply(this, arguments);\n    }\n\n    function _getProducts() {\n      _getProducts = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(baseUrl.apiUrl + '/setup/product');\n\n              case 2:\n                results = _context.sent;\n                setProducts(results.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getProducts.apply(this, arguments);\n    }\n\n    getProducts();\n  }, [products]);\n\n  var handlePrincipalEntry = function handlePrincipalEntry(e) {\n    setPrincipalData(_objectSpread(_objectSpread({}, principalData), {}, {\n      principal: e.currentTarget.value,\n      customer: props.customer,\n      disbursementId: props.disbursementId,\n      cashCollateral: props.cashCollateral\n    }));\n  };\n\n  var handlePurposeEntry = function handlePurposeEntry(e) {\n    setPrincipalData(_objectSpread(_objectSpread({}, principalData), {}, {\n      purpose: e.currentTarget.value\n    }));\n  };\n\n  var schemaMap = {\n    disbursementId: Joi.number().required().label('Disbursement ID'),\n    customer: Joi.number().required().label('Customer'),\n    principal: Joi.number().required().label('Principal'),\n    purpose: Joi.string().required().label('Purpose'),\n    cashCollateral: Joi.number()\n  };\n  var schema = Joi.object(schemaMap);\n\n  var validateForm = function validateForm() {\n    var result = Joi.validate(principalData, schema);\n\n    if (result.error) {\n      return result.error.details[0].message;\n    } else {\n      return null;\n    }\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var validate, results;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log('disbursed :' + props.disbursedAmount);\n              console.log('Principal :' + principalData.principal);\n\n              if (!(props.disbursedAmount >= principalData.principal)) {\n                _context2.next = 4;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", Swal.fire('OOPs !', 'Principal should not be less or equal to disbursed amount !', 'error'));\n\n            case 4:\n              //console.log(props)\n              validate = validateForm();\n\n              if (!(validate !== null)) {\n                _context2.next = 7;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", Swal.fire('Validation', validate, 'error'));\n\n            case 7:\n              _context2.prev = 7;\n              _context2.next = 10;\n              return axios.put(apiUrl + '/loan/booking/principal', principalData);\n\n            case 10:\n              results = _context2.sent;\n\n              if (!(results.status !== 200)) {\n                _context2.next = 15;\n                break;\n              }\n\n              return _context2.abrupt(\"return\", Swal.fire('OOPs !', 'Submission Failed ! Check Entries and try again !', 'error'));\n\n            case 15:\n              Swal.fire('Good job!', 'Loan Principal Saved Successfully', 'success');\n              setPrincipalData({\n                disbursementId: 0,\n                customer: 0,\n                principal: 0,\n                purpose: ''\n              });\n\n            case 17:\n              _context2.next = 22;\n              break;\n\n            case 19:\n              _context2.prev = 19;\n              _context2.t0 = _context2[\"catch\"](7);\n              Swal.fire('OOPS ! ', 'Loan Principal NOT Saved', 'error');\n\n            case 22:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[7, 19]]);\n    }));\n\n    return function handleSubmit() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"product\",\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Amount Requested *\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    className: \"form-control-xl text-right\",\n    value: principalData.principal,\n    onChange: handlePrincipalEntry,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mb-3 row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"product\",\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, \"Purpose *\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-6\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    className: \"form-control-xl\",\n    value: principalData.purpose,\n    onChange: handlePurposeEntry,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleSubmit,\n    className: \"m-3 float-right\",\n    color: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, \"Submit\")));\n};\n\nexport default BookLoanPrincipal;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanPrincipalEntry.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","axios","baseUrl","auth","Swal","moment","apiUrl","Joi","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","BookLoanPrincipal","props","products","setProducts","disbursementId","customer","principal","purpose","principalData","setPrincipalData","getProducts","get","results","data","handlePrincipalEntry","e","currentTarget","value","cashCollateral","handlePurposeEntry","schemaMap","number","required","label","string","schema","object","validateForm","result","validate","error","details","message","handleSubmit","console","log","disbursedAmount","fire","put","status"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate } from 'react-router-dom'\nimport axios from 'axios'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\nimport moment from 'moment'\nimport { apiUrl } from '../../config.json'\nimport Joi from 'joi-browser'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nconst BookLoanPrincipal = (props) => {\n  const [products, setProducts] = useState([])\n  const [principalData, setPrincipalData] = useState({\n    disbursementId: 0,\n    customer: 0,\n    principal: 0,\n    purpose: '',\n  })\n\n  useEffect(() => {\n    async function getProducts() {\n      const results = await axios.get(baseUrl.apiUrl + '/setup/product')\n      setProducts(results.data)\n    }\n    getProducts()\n  }, [products])\n\n  const handlePrincipalEntry = (e) => {\n    setPrincipalData({\n      ...principalData,\n      principal: e.currentTarget.value,\n      customer: props.customer,\n      disbursementId: props.disbursementId,\n      cashCollateral: props.cashCollateral,\n    })\n  }\n\n  const handlePurposeEntry = (e) => {\n    setPrincipalData({\n      ...principalData,\n      purpose: e.currentTarget.value,\n    })\n  }\n\n  const schemaMap = {\n    disbursementId: Joi.number().required().label('Disbursement ID'),\n    customer: Joi.number().required().label('Customer'),\n    principal: Joi.number().required().label('Principal'),\n    purpose: Joi.string().required().label('Purpose'),\n    cashCollateral: Joi.number(),\n  }\n  const schema = Joi.object(schemaMap)\n\n  const validateForm = () => {\n    const result = Joi.validate(principalData, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n  }\n\n  const handleSubmit = async () => {\n    console.log('disbursed :' + props.disbursedAmount)\n    console.log('Principal :' + principalData.principal)\n    if (props.disbursedAmount >= principalData.principal)\n      return Swal.fire(\n        'OOPs !',\n        'Principal should not be less or equal to disbursed amount !',\n        'error',\n      )\n\n    //console.log(props)\n    const validate = validateForm()\n    if (validate !== null) {\n      return Swal.fire('Validation', validate, 'error')\n    }\n    try {\n      const results = await axios.put(\n        apiUrl + '/loan/booking/principal',\n        principalData,\n      )\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPs !',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Good job!', 'Loan Principal Saved Successfully', 'success')\n\n        setPrincipalData({\n          disbursementId: 0,\n          customer: 0,\n          principal: 0,\n          purpose: '',\n        })\n      }\n    } catch (err) {\n      Swal.fire('OOPS ! ', 'Loan Principal NOT Saved', 'error')\n    }\n  }\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"col-sm-12 mt-3\">\n        <div className=\"mb-3 row\">\n          <CLabel htmlFor=\"product\" className=\"col-sm-3\">\n            Amount Requested *\n          </CLabel>\n          <div class=\"col-sm-6\">\n            <CInput\n              className=\"form-control-xl text-right\"\n              value={principalData.principal}\n              onChange={handlePrincipalEntry}\n            />\n          </div>\n        </div>\n\n        <div className=\"mb-3 row\">\n          <CLabel htmlFor=\"product\" className=\"col-sm-3\">\n            Purpose *\n          </CLabel>\n          <div class=\"col-sm-6\">\n            <CInput\n              className=\"form-control-xl\"\n              value={principalData.purpose}\n              onChange={handlePurposeEntry}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"justify-content-center\">\n        <CButton\n          onClick={handleSubmit}\n          className=\"m-3 float-right\"\n          color=\"success\"\n        >\n          Submit\n        </CButton>\n      </div>\n    </div>\n  )\n}\n\nexport default BookLoanPrincipal\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Modal}from'react-bootstrap';import{Link,useNavigate,Navigate,useHistory}from'react-router-dom';import axios from'axios';import moment from'moment';import Joi from'joi-browser';import CurrencyFormat from'react-currency-format';import Swal from'sweetalert2';import auth from'../../components/services/authService';import{apiUrl}from'../../config.json';import BookProduct from'./bookProduct';import LoanPrincipal from'./loanPrincipalEntry';import Guarantors from'./guarantors';import GuarantorTwo from'./guarantorTwo';import BusinessDetails from'./businessDetails';import Directions from'./directions';import AdaboSelect from'react-select';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Badge,Card//Modal,\n}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CDropdownDivider,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';import{render}from'enzyme';var BulkCashReceipts=function BulkCashReceipts(){var _useState=useState(auth.getCurrentUser),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),received=_useState4[0],setReceived=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),staff=_useState6[0],setStaff=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),officer=_useState8[0],setOfficer=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),search=_useState10[0],setSearch=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),show=_useState12[0],setShow=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),reload=_useState14[0],setReload=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),chartData=_useState16[0],setChartData=_useState16[1];var _useState17=useState(new Date().toISOString().slice(0,10)),_useState18=_slicedToArray(_useState17,2),chartDate=_useState18[0],setChartDate=_useState18[1];var _useState19=useState(new Date()),_useState20=_slicedToArray(_useState19,2),todayDate=_useState20[0],setTodayDate=_useState20[1];var formatToday=function formatToday(date){return date.toISOString().slice(0,10);};var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),overageShortageChecked=_useState22[0],setOverageShortageChecked=_useState22[1];// const [shortageChecked, setShortageChecked] = useState(false);\nvar _useState23=useState({Officer:'',dateOfReceipt:new Date().toISOString().slice(0,10),Momo:'',Cash:'',TotalAmount:'',Overage:'',Shortage:'',receivedBy:user.nameOfStaff}),_useState24=_slicedToArray(_useState23,2),bulkCash=_useState24[0],setBulkCash=_useState24[1];var _useState25=useState(new Date().toISOString().slice(0,10)),_useState26=_slicedToArray(_useState25,2),tdate=_useState26[0],setTdate=_useState26[1];useEffect(function(){function getStaff(){return _getStaff.apply(this,arguments);}function _getStaff(){_getStaff=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(apiUrl+'/setup/staff');case 2:results=_context.sent;setStaff(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getStaff.apply(this,arguments);}getStaff();},[]);useEffect(function(){function getBulkCash(){return _getBulkCash.apply(this,arguments);}function _getBulkCash(){_getBulkCash=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(apiUrl+'/loan/bulkCash/'+tdate);case 2:results=_context2.sent;setReceived(results.data);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _getBulkCash.apply(this,arguments);}getBulkCash();//console.log(received);\n},[tdate,reload]);/*const handleSearch = (event) => {\n    setSearch(event.currentTarget.value);\n  };\n\n  const data = {\n    staff: staff.filter((c) =>\n      c.nameOfStaff.toLowerCase().includes(search.toLowerCase())\n    ),\n  };\n\n  const dataTouse = search.length === 0 ? staff : data.staff;\n*/var handleOfficerSelect=function handleOfficerSelect(c){setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{Officer:c.currentTarget.value,Overage:0,Shortage:0}));//setOfficer(c.nameOfStaff);\n// setShow(!show);\n};var handleSelectBulkCash=function handleSelectBulkCash(c){setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{dateOfReceipt:c.dateOfReceipt,Officer:c.Officer,receivedBy:c.receivedBy,overageshortage:c.overageshortage,Momo:c.Momo,Cash:c.Cash,TotalAmount:c.TotalAmount,Overage:0,Shortage:0}));setShow(!show);};var handleMomoEntry=function handleMomoEntry(e){var TotalAmt=parseFloat(bulkCash.Cash)+parseFloat(e.currentTarget.value);setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{Momo:e.currentTarget.value,TotalAmount:TotalAmt}));};var handleCashEntry=function handleCashEntry(e){var TotalAmt=parseFloat(bulkCash.Momo)+parseFloat(e.currentTarget.value);setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{Cash:e.currentTarget.value,TotalAmount:TotalAmt}));};var schemaMap={Officer:Joi.string().required().label('Field Officer'),dateOfReceipt:Joi.date().required().label('Date of Collection'),Momo:Joi.number().required().label('Momo Received'),Cash:Joi.number().required().label('Cash Received'),TotalAmount:Joi.number().required().label('Total Amount'),Overage:Joi.number().default(0),Shortage:Joi.number().default(0),receivedBy:Joi.string().allow('')};var schema=Joi.object(schemaMap);var validateForm=function validateForm(){var result=Joi.validate(bulkCash,schema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var validate,results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(bulkCash);validate=validateForm();if(!(validate!==null)){_context3.next=4;break;}return _context3.abrupt(\"return\",Swal.fire('Validation',validate,'error'));case 4:_context3.prev=4;_context3.next=7;return axios.post(apiUrl+'/loan/bulkcash',bulkCash);case 7:results=_context3.sent;if(!(results.status!==200)){_context3.next=12;break;}return _context3.abrupt(\"return\",Swal.fire('OOPs !','Submission Failed ! Check Entries and try again !','error'));case 12:Swal.fire('Good job!','Bulk Cash Received Successfully','success');setBulkCash({Officer:'',dateOfReceipt:new Date().toISOString().slice(0,10),Momo:'',Cash:'',TotalAmount:'',Overage:'',Shortage:'',receivedBy:user.nameOfStaff});setReload(!reload);case 15:_context3.next=20;break;case 17:_context3.prev=17;_context3.t0=_context3[\"catch\"](4);Swal.fire('OOPS ! ','Bulk Cash NOT Received','error');case 20:case\"end\":return _context3.stop();}}},_callee3,null,[[4,17]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var formatter=new Intl.NumberFormat('en-US',{style:'currency',currency:'GHS'// These options are needed to round to whole numbers if that's what you want.\n//minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n//maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n});var handleRemove=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(c){var results;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:console.log(c);_context4.prev=1;_context4.next=4;return axios.delete(apiUrl+'/loan/bulkCash/'+c.id+'/'+c.officerId+'/'+c.dateOfReceipt);case 4:results=_context4.sent;if(!(results.status===200)){_context4.next=12;break;}Swal.fire('OK','Bulk Cash Deleted','success');setBulkCash({Officer:'',dateOfReceipt:new Date().toISOString().slice(0,10),Momo:'',Cash:'',TotalAmount:'',Overage:'',Shortage:'',receivedBy:user.nameOfStaff});setReload(!reload);setTdate(new Date().toISOString().slice(0,10));_context4.next=13;break;case 12:return _context4.abrupt(\"return\",Swal.fire('OOPS','Bulk Cash NOT Deleted','error'));case 13:_context4.next=18;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](1);return _context4.abrupt(\"return\",Swal.fire('OOPS',_context4.t0+'  [Bulk Cash NOT Deleted]','error'));case 18:case\"end\":return _context4.stop();}}},_callee4,null,[[1,15]]);}));return function handleRemove(_x){return _ref2.apply(this,arguments);};}();var handleClose=function handleClose(){setBulkCash({Officer:'',dateOfReceipt:new Date().toISOString().slice(0,10),Momo:'',Cash:'',TotalAmount:'',Overage:'',Shortage:'',receivedBy:user.nameOfStaff});setOfficer('');setShow(false);};var handleOverage=function handleOverage(e){setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{Overage:e.currentTarget.value,Shortage:0}));};var handleShortage=function handleShortage(e){setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{Shortage:e.currentTarget.value,Overage:0}));};var myData=[];var yData=chartData.map(function(m){var d={Officer:m.Officer.nameOfStaff,Amount:m.amount};myData.push(d);});var handleDateChange=function handleDateChange(e){setChartDate(e.currentTarget.value);setTdate(e.currentTarget.value);setReload(!reload);};var handleEdit=function handleEdit(c){console.log(c);setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{dateOfReceipt:new Date(c.dateOfReceipt).toISOString().slice(0,10),Officer:c.Officer,receivedBy:c.receivedBy,Momo:c.Momo,Cash:c.Cash,TotalAmount:c.TotalAmount,Overage:0,Shortage:0,id:c.id}));setShow(!show);};return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success btn-sm float-right\",onClick:function onClick(){setBulkCash({dateOfReceipt:new Date().toISOString().slice(0,10),Officer:'',receivedBy:user.nameOfStaff,Momo:'',Cash:'',TotalAmount:'',Overage:0,Shortage:0});console.log(bulkCash);setShow(!show);}},\"Receive Bulk Collections\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"dateOfReceipt\",className:\"form-control col-sm-4 mb-3\",id:\"dateOfReceipt\",value:chartDate,onChange:handleDateChange}),/*#__PURE__*/React.createElement(Table,{className:\"table align-middle mb-0 table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Date\"),/*#__PURE__*/React.createElement(\"th\",null,\"Officer\"),/*#__PURE__*/React.createElement(\"th\",null,\"Momo\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cash\"),/*#__PURE__*/React.createElement(\"th\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"th\",null,\"Overage\"),/*#__PURE__*/React.createElement(\"th\",null,\"Shortage\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,received.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c._id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,moment(c.dateOfReceipt).format('DD-MMMM-YYYY')),/*#__PURE__*/React.createElement(\"td\",null,c.Officer),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Momo)),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Cash)),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.TotalAmount)),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Overage)),/*#__PURE__*/React.createElement(\"td\",null,formatter.format(c.Shortage)),/*#__PURE__*/React.createElement(\"td\",null,c.status==null?/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(CButton,{className:\"btn-sm\",color:\"danger\",onClick:function onClick(){return handleRemove(c);}},\"Remove\")):null));}))),/*#__PURE__*/React.createElement(CModal,{className:\"fade col-sm-10\",size:\"md\",show:show,color:\"success\",\"data-backdrop\":\"static\",\"data-keyboard\":\"false\",onClose:function onClose(){setShow(!show);}},/*#__PURE__*/React.createElement(CModalHeader,{className:\"modal-header\",closeButton:true},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"h3\",{className:\"centertext\"},\"Receive Bulk Amount\"))),/*#__PURE__*/React.createElement(CModalBody,{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"dateOfReceipt\",className:\"form-label\"},\"Date of Receipt\"),/*#__PURE__*/React.createElement(\"input\",{type:\"date\",name:\"dateOfReceipt\",className:\"form-control text-center col-sm-12 mb-3\",id:\"dateOfReceipt\",value:bulkCash.dateOfReceipt,onChange:function onChange(e){return setBulkCash(_objectSpread(_objectSpread({},bulkCash),{},{dateOfReceipt:e.currentTarget.value}));}}),/*#__PURE__*/React.createElement(CSelect,{className:\"form-select col-sm-12 mb-3\",\"aria-label\":\"Default select example\",value:bulkCash.Officer,onChange:handleOfficerSelect},/*#__PURE__*/React.createElement(\"option\",{defaultValue:\"\"},\"--Select Loan Officer--\"),staff.map(function(b){return/*#__PURE__*/React.createElement(\"option\",{key:b.id,value:b.id,id:b.id},b.nameOfStaff);})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amountReceived\",className:\"form-label\"},\"Momo Amount (GHS) *\"),/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",type:\"text\",name:\"amountReceived\",className:\"form-control col-sm-12 mb-3\",id:\"MomoAmount\",value:bulkCash.Momo,onChange:handleMomoEntry}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amountReceived\",className:\"form-label\"},\"Cash Amount (GHS) *\"),/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",type:\"text\",name:\"amountReceived\",className:\"form-control  col-sm-12 mb-3\",id:\"CashAmount\",value:bulkCash.Cash,onChange:handleCashEntry}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-label mb-3 dispLabel float-right\"},\"Total Amount : \",formatter.format(bulkCash.TotalAmount)),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"overage\",className:\"form-label mt-3\"},\"Overage (if any)\"),/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",type:\"text\",name:\"overage\",className:\"form-control  col-sm-12 mb-3\",id:\"overage\",value:bulkCash.Overage,onChange:handleOverage}),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"shortage\",className:\"form-label\"},\"Shortage (if any)\"),/*#__PURE__*/React.createElement(\"input\",{autoComplete:\"off\",type:\"text\",name:\"shortage\",className:\"form-control  col-sm-12 mb-3\",id:\"shortage\",value:bulkCash.Shortage,onChange:handleShortage}))),/*#__PURE__*/React.createElement(CModalFooter,null,/*#__PURE__*/React.createElement(CButton,{onClick:handleSubmit,color:\"success\",className:\"btn-sm\"},\"Submit\"),/*#__PURE__*/React.createElement(CButton,{onClick:handleClose,color:\"danger\",className:\"btn-sm\"},\"Close\"))));};export default BulkCashReceipts;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/bulkCashReceipts.jsx"],"names":["React","useState","useEffect","Modal","Link","useNavigate","Navigate","useHistory","axios","moment","Joi","CurrencyFormat","Swal","auth","apiUrl","BookProduct","LoanPrincipal","Guarantors","GuarantorTwo","BusinessDetails","Directions","AdaboSelect","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Badge","Card","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","render","BulkCashReceipts","getCurrentUser","user","setUser","received","setReceived","staff","setStaff","officer","setOfficer","search","setSearch","show","setShow","reload","setReload","chartData","setChartData","Date","toISOString","slice","chartDate","setChartDate","todayDate","setTodayDate","formatToday","date","overageShortageChecked","setOverageShortageChecked","Officer","dateOfReceipt","Momo","Cash","TotalAmount","Overage","Shortage","receivedBy","nameOfStaff","bulkCash","setBulkCash","tdate","setTdate","getStaff","get","results","data","getBulkCash","handleOfficerSelect","c","currentTarget","value","handleSelectBulkCash","overageshortage","handleMomoEntry","e","TotalAmt","parseFloat","handleCashEntry","schemaMap","string","required","label","number","default","allow","schema","object","validateForm","result","validate","error","details","message","handleSubmit","console","log","fire","post","status","formatter","Intl","NumberFormat","style","currency","handleRemove","delete","id","officerId","handleClose","handleOverage","handleShortage","myData","yData","map","m","d","Amount","amount","push","handleDateChange","handleEdit","index","_id","format","b"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Modal } from 'react-bootstrap'\nimport { Link, useNavigate, Navigate, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport Joi from 'joi-browser'\nimport CurrencyFormat from 'react-currency-format'\nimport Swal from 'sweetalert2'\nimport auth from '../../components/services/authService'\nimport { apiUrl } from '../../config.json'\nimport BookProduct from './bookProduct'\nimport LoanPrincipal from './loanPrincipalEntry'\nimport Guarantors from './guarantors'\nimport GuarantorTwo from './guarantorTwo'\nimport BusinessDetails from './businessDetails'\nimport Directions from './directions'\nimport AdaboSelect from 'react-select'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Badge,\n  Card,\n  //Modal,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nimport { render } from 'enzyme'\n\nconst BulkCashReceipts = () => {\n  const [user, setUser] = useState(auth.getCurrentUser)\n  const [received, setReceived] = useState([])\n  const [staff, setStaff] = useState([])\n  const [officer, setOfficer] = useState('')\n  const [search, setSearch] = useState('')\n  const [show, setShow] = useState(false)\n  const [reload, setReload] = useState(false)\n  const [chartData, setChartData] = useState([])\n  const [chartDate, setChartDate] = useState(\n    new Date().toISOString().slice(0, 10),\n  )\n  const [todayDate, setTodayDate] = useState(new Date())\n  const formatToday = (date) => date.toISOString().slice(0, 10)\n  const [overageShortageChecked, setOverageShortageChecked] = useState(false)\n  // const [shortageChecked, setShortageChecked] = useState(false);\n  const [bulkCash, setBulkCash] = useState({\n    Officer: '',\n    dateOfReceipt: new Date().toISOString().slice(0, 10),\n    Momo: '',\n    Cash: '',\n    TotalAmount: '',\n    Overage: '',\n    Shortage: '',\n    receivedBy: user.nameOfStaff,\n  })\n  const [tdate, setTdate] = useState(new Date().toISOString().slice(0, 10))\n\n  useEffect(() => {\n    async function getStaff() {\n      const results = await axios.get(apiUrl + '/setup/staff')\n      setStaff(results.data)\n    }\n\n    getStaff()\n  }, [])\n\n  useEffect(() => {\n    async function getBulkCash() {\n      const results = await axios.get(apiUrl + '/loan/bulkCash/' + tdate)\n      setReceived(results.data)\n    }\n    getBulkCash()\n    //console.log(received);\n  }, [tdate, reload])\n\n  /*const handleSearch = (event) => {\n    setSearch(event.currentTarget.value);\n  };\n\n  const data = {\n    staff: staff.filter((c) =>\n      c.nameOfStaff.toLowerCase().includes(search.toLowerCase())\n    ),\n  };\n\n  const dataTouse = search.length === 0 ? staff : data.staff;\n*/\n  const handleOfficerSelect = (c) => {\n    setBulkCash({\n      ...bulkCash,\n      Officer: c.currentTarget.value,\n      Overage: 0,\n      Shortage: 0,\n    })\n    //setOfficer(c.nameOfStaff);\n    // setShow(!show);\n  }\n\n  const handleSelectBulkCash = (c) => {\n    setBulkCash({\n      ...bulkCash,\n      dateOfReceipt: c.dateOfReceipt,\n      Officer: c.Officer,\n      receivedBy: c.receivedBy,\n      overageshortage: c.overageshortage,\n      Momo: c.Momo,\n      Cash: c.Cash,\n      TotalAmount: c.TotalAmount,\n      Overage: 0,\n      Shortage: 0,\n    })\n    setShow(!show)\n  }\n\n  const handleMomoEntry = (e) => {\n    const TotalAmt =\n      parseFloat(bulkCash.Cash) + parseFloat(e.currentTarget.value)\n    setBulkCash({\n      ...bulkCash,\n      Momo: e.currentTarget.value,\n      TotalAmount: TotalAmt,\n    })\n  }\n\n  const handleCashEntry = (e) => {\n    const TotalAmt =\n      parseFloat(bulkCash.Momo) + parseFloat(e.currentTarget.value)\n    setBulkCash({\n      ...bulkCash,\n      Cash: e.currentTarget.value,\n      TotalAmount: TotalAmt,\n    })\n  }\n  const schemaMap = {\n    Officer: Joi.string().required().label('Field Officer'),\n    dateOfReceipt: Joi.date().required().label('Date of Collection'),\n    Momo: Joi.number().required().label('Momo Received'),\n    Cash: Joi.number().required().label('Cash Received'),\n    TotalAmount: Joi.number().required().label('Total Amount'),\n    Overage: Joi.number().default(0),\n    Shortage: Joi.number().default(0),\n    receivedBy: Joi.string().allow(''),\n  }\n\n  const schema = Joi.object(schemaMap)\n\n  const validateForm = () => {\n    const result = Joi.validate(bulkCash, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n  }\n\n  const handleSubmit = async () => {\n    console.log(bulkCash)\n    const validate = validateForm()\n    if (validate !== null) {\n      return Swal.fire('Validation', validate, 'error')\n    }\n    try {\n      const results = await axios.post(apiUrl + '/loan/bulkcash', bulkCash)\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPs !',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Good job!', 'Bulk Cash Received Successfully', 'success')\n        setBulkCash({\n          Officer: '',\n          dateOfReceipt: new Date().toISOString().slice(0, 10),\n          Momo: '',\n          Cash: '',\n          TotalAmount: '',\n          Overage: '',\n          Shortage: '',\n          receivedBy: user.nameOfStaff,\n        })\n        setReload(!reload)\n      }\n    } catch (err) {\n      Swal.fire('OOPS ! ', 'Bulk Cash NOT Received', 'error')\n    }\n  }\n\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  const handleRemove = async (c) => {\n    console.log(c)\n    try {\n      const results = await axios.delete(\n        apiUrl +\n          '/loan/bulkCash/' +\n          c.id +\n          '/' +\n          c.officerId +\n          '/' +\n          c.dateOfReceipt,\n      )\n      if (results.status === 200) {\n        Swal.fire('OK', 'Bulk Cash Deleted', 'success')\n        setBulkCash({\n          Officer: '',\n          dateOfReceipt: new Date().toISOString().slice(0, 10),\n          Momo: '',\n          Cash: '',\n          TotalAmount: '',\n          Overage: '',\n          Shortage: '',\n          receivedBy: user.nameOfStaff,\n        })\n        setReload(!reload)\n        setTdate(new Date().toISOString().slice(0, 10))\n      } else {\n        return Swal.fire('OOPS', 'Bulk Cash NOT Deleted', 'error')\n      }\n    } catch (ex) {\n      return Swal.fire('OOPS', ex + '  [Bulk Cash NOT Deleted]', 'error')\n    }\n  }\n\n  const handleClose = () => {\n    setBulkCash({\n      Officer: '',\n      dateOfReceipt: new Date().toISOString().slice(0, 10),\n      Momo: '',\n      Cash: '',\n      TotalAmount: '',\n      Overage: '',\n      Shortage: '',\n      receivedBy: user.nameOfStaff,\n    })\n    setOfficer('')\n    setShow(false)\n  }\n\n  const handleOverage = (e) => {\n    setBulkCash({\n      ...bulkCash,\n      Overage: e.currentTarget.value,\n      Shortage: 0,\n    })\n  }\n\n  const handleShortage = (e) => {\n    setBulkCash({\n      ...bulkCash,\n      Shortage: e.currentTarget.value,\n      Overage: 0,\n    })\n  }\n\n  const myData = []\n  const yData = chartData.map((m) => {\n    let d = {\n      Officer: m.Officer.nameOfStaff,\n      Amount: m.amount,\n    }\n    myData.push(d)\n  })\n\n  const handleDateChange = (e) => {\n    setChartDate(e.currentTarget.value)\n    setTdate(e.currentTarget.value)\n    setReload(!reload)\n  }\n\n  const handleEdit = (c) => {\n    console.log(c)\n    setBulkCash({\n      ...bulkCash,\n      dateOfReceipt: new Date(c.dateOfReceipt).toISOString().slice(0, 10),\n      Officer: c.Officer,\n      receivedBy: c.receivedBy,\n      Momo: c.Momo,\n      Cash: c.Cash,\n      TotalAmount: c.TotalAmount,\n      Overage: 0,\n      Shortage: 0,\n      id: c.id,\n    })\n    setShow(!show)\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <button\n        type=\"button\"\n        className=\"btn btn-success btn-sm float-right\"\n        onClick={() => {\n          setBulkCash({\n            dateOfReceipt: new Date().toISOString().slice(0, 10),\n            Officer: '',\n            receivedBy: user.nameOfStaff,\n            Momo: '',\n            Cash: '',\n            TotalAmount: '',\n            Overage: 0,\n            Shortage: 0,\n          })\n          console.log(bulkCash)\n          setShow(!show)\n        }}\n      >\n        Receive Bulk Collections\n      </button>\n      <input\n        type=\"date\"\n        name=\"dateOfReceipt\"\n        className=\"form-control col-sm-4 mb-3\"\n        id=\"dateOfReceipt\"\n        value={chartDate}\n        onChange={handleDateChange}\n      />\n      <Table className=\"table align-middle mb-0 table-sm\">\n        <thead>\n          <tr className=\"fs-sm\">\n            <th></th>\n            <th>Date</th>\n            <th>Officer</th>\n            <th>Momo</th>\n            <th>Cash</th>\n            <th>Amount</th>\n            <th>Overage</th>\n            <th>Shortage</th>\n            <th></th>\n          </tr>\n        </thead>\n        <tbody>\n          {received.map((c, index) => (\n            <tr key={c._id}>\n              <td>{index + 1}</td>\n              <td>{moment(c.dateOfReceipt).format('DD-MMMM-YYYY')}</td>\n              <td>{c.Officer}</td>\n              <td>{formatter.format(c.Momo)}</td>\n              <td>{formatter.format(c.Cash)}</td>\n              <td>{formatter.format(c.TotalAmount)}</td>\n              <td>{formatter.format(c.Overage)}</td>\n              <td>{formatter.format(c.Shortage)}</td>\n              <td>\n                {c.status == null ? (\n                  <td>\n                    <CButton\n                      className=\"btn-sm\"\n                      color=\"danger\"\n                      onClick={() => handleRemove(c)}\n                    >\n                      Remove\n                    </CButton>\n                  </td>\n                ) : null}\n              </td>\n\n              {/*<td>\n                <CButton\n                  className=\"btn-sm\"\n                  color=\"info\"\n                  onClick={() => handleEdit(c)}\n                >\n                  Edit Entry\n                </CButton>\n              </td>*/}\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n\n      <CModal\n        className=\"fade col-sm-10\"\n        size=\"md\"\n        show={show}\n        color=\"success\"\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n        onClose={() => {\n          setShow(!show)\n        }}\n      >\n        <CModalHeader className=\"modal-header\" closeButton>\n          <p>\n            <h3 className=\"centertext\">Receive Bulk Amount</h3>\n          </p>\n        </CModalHeader>\n\n        <CModalBody className=\"modal-body\">\n          <form>\n            <label htmlFor=\"dateOfReceipt\" className=\"form-label\">\n              Date of Receipt\n            </label>\n            <input\n              type=\"date\"\n              name=\"dateOfReceipt\"\n              className=\"form-control text-center col-sm-12 mb-3\"\n              id=\"dateOfReceipt\"\n              value={bulkCash.dateOfReceipt}\n              onChange={(e) =>\n                setBulkCash({\n                  ...bulkCash,\n                  dateOfReceipt: e.currentTarget.value,\n                })\n              }\n            />\n\n            <CSelect\n              className=\"form-select col-sm-12 mb-3\"\n              aria-label=\"Default select example\"\n              value={bulkCash.Officer}\n              onChange={handleOfficerSelect}\n            >\n              <option defaultValue=\"\">--Select Loan Officer--</option>\n              {staff.map((b) => (\n                <option key={b.id} value={b.id} id={b.id}>\n                  {b.nameOfStaff}\n                </option>\n              ))}\n            </CSelect>\n\n            <label htmlFor=\"amountReceived\" className=\"form-label\">\n              Momo Amount (GHS) *\n            </label>\n            <input\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"amountReceived\"\n              className=\"form-control col-sm-12 mb-3\"\n              id=\"MomoAmount\"\n              value={bulkCash.Momo}\n              onChange={handleMomoEntry}\n            />\n\n            <label htmlFor=\"amountReceived\" className=\"form-label\">\n              Cash Amount (GHS) *\n            </label>\n            <input\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"amountReceived\"\n              className=\"form-control  col-sm-12 mb-3\"\n              id=\"CashAmount\"\n              value={bulkCash.Cash}\n              onChange={handleCashEntry}\n            />\n\n            <label className=\"form-label mb-3 dispLabel float-right\">\n              Total Amount : {formatter.format(bulkCash.TotalAmount)}\n            </label>\n\n            <label htmlFor=\"overage\" className=\"form-label mt-3\">\n              Overage (if any)\n            </label>\n            <input\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"overage\"\n              className=\"form-control  col-sm-12 mb-3\"\n              id=\"overage\"\n              value={bulkCash.Overage}\n              onChange={handleOverage}\n            />\n\n            <label htmlFor=\"shortage\" className=\"form-label\">\n              Shortage (if any)\n            </label>\n            <input\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"shortage\"\n              className=\"form-control  col-sm-12 mb-3\"\n              id=\"shortage\"\n              value={bulkCash.Shortage}\n              onChange={handleShortage}\n            />\n          </form>\n        </CModalBody>\n        <CModalFooter>\n          <CButton onClick={handleSubmit} color=\"success\" className=\"btn-sm\">\n            Submit\n          </CButton>\n          <CButton onClick={handleClose} color=\"danger\" className=\"btn-sm\">\n            Close\n          </CButton>\n        </CModalFooter>\n      </CModal>\n    </div>\n  )\n}\n\nexport default BulkCashReceipts\n"]},"metadata":{},"sourceType":"module"}
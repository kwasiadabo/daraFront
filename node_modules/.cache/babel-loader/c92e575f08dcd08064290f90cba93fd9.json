{"ast":null,"code":"import _objectSpread from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/viewToCorrectRepayments.js\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal } from 'react-bootstrap';\nimport { Link, useNavigate, Navigate, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Joi from 'joi-browser';\nimport CurrencyFormat from 'react-currency-format';\nimport Swal from 'sweetalert2';\nimport auth from '../../components/services/authService';\nimport { apiUrl } from '../../config.json';\nimport { reportUrl } from '../../config.json';\nimport BookProduct from './bookProduct';\nimport LoanPrincipal from './loanPrincipalEntry';\nimport Guarantors from './guarantors';\nimport GuarantorTwo from './guarantorTwo';\nimport BusinessDetails from './businessDetails';\nimport Directions from './directions';\nimport AdaboSelect from 'react-select';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from 'reactstrap';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CDropdownDivider, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup //CForm,\n} from '@coreui/react';\nimport { now } from 'moment';\n\nvar ViewToCorrectRepayment = function ViewToCorrectRepayment() {\n  var _React$createElement, _React$createElement2;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      dailycollections = _useState2[0],\n      setDailyCollections = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      render = _useState4[0],\n      setRender = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      search = _useState6[0],\n      setSearch = _useState6[1];\n\n  var _useState7 = useState(new Date()),\n      _useState8 = _slicedToArray(_useState7, 2),\n      dated = _useState8[0],\n      setDated = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      show = _useState10[0],\n      setShow = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      save = _useState12[0],\n      setSave = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      edit = _useState14[0],\n      setEdit = _useState14[1];\n\n  var _useState15 = useState(new Date().toISOString().slice(0, 10)),\n      _useState16 = _slicedToArray(_useState15, 2),\n      dateOfCollection = _useState16[0],\n      setDateOfCollection = _useState16[1];\n\n  var _useState17 = useState({\n    id: '',\n    dateOfCollection: '',\n    customer: '',\n    officer: '',\n    amount: '',\n    ModeOfPayment: '',\n    status: '',\n    loanId: ''\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      allData = _useState18[0],\n      setAllData = _useState18[1];\n\n  var _useState19 = useState({\n    id: 0,\n    amount: 0\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      ds = _useState20[0],\n      setDs = _useState20[1];\n\n  function formatDate(date) {\n    var newDate = new Date(date);\n    var year = newDate.getFullYear().toString();\n    var month = (newDate.getMonth() + 101).toString().substring(1);\n    var day = (newDate.getDate() + 100).toString().substring(1);\n    return year + '-' + month + '-' + day;\n  }\n\n  useEffect(function () {\n    function getDailyCollections() {\n      return _getDailyCollections.apply(this, arguments);\n    }\n\n    function _getDailyCollections() {\n      _getDailyCollections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(apiUrl + '/loan/dailycollections/correction/' + dateOfCollection);\n\n              case 2:\n                results = _context.sent;\n                setDailyCollections(results.data); //if (results.data[0].img == null) return\n                //setBuffer(results.data[0].img.data)\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getDailyCollections.apply(this, arguments);\n    }\n\n    getDailyCollections();\n  }, [render, dateOfCollection]);\n\n  var handleDateOfPaymentChange = function handleDateOfPaymentChange(e) {\n    setDateOfCollection(e.currentTarget.value);\n  };\n\n  var handleSearchChanged = function handleSearchChanged(e) {\n    setSearch(e.currentTarget.value);\n  };\n  /*useEffect(() => {\n    async function getRegistrationFees() {\n      const results = await axios.get(apiUrl + '/loan/registrationfee')\n      setRegistrationFees(results.data)\n    }\n    getRegistrationFees()\n  }, [registrationFees, render])\n  */\n\n\n  var data = {\n    dailycollectionsFilter: dailycollections.filter(function (item) {\n      return item.Officer.toLowerCase().includes(search.toLowerCase()) || item.Customer.toLowerCase().includes(search.toLowerCase());\n    })\n  };\n  var dataTouse = search.length === 0 ? dailycollections : data.dailycollectionsFilter;\n  var formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS' // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\n  });\n\n  var openCustomerListAsReport = function openCustomerListAsReport(url) {\n    var windowFeatures = 'left=100,top=100,width=320,height=320';\n    window.open(url, 'customerlist', 'popup', windowFeatures);\n  };\n\n  var showModal = function showModal(e) {\n    setAllData({\n      id: e.id,\n      dateOfCollection: e.dateOfCollection,\n      customer: e.Customer,\n      officer: e.Officer,\n      amount: e.Amount,\n      modeOfPayment: e.ModeOfPayment,\n      status: e.status,\n      loanId: e.loanId\n    });\n    setDs({\n      id: e.id,\n      amount: e.Amount\n    });\n    setShow(!show);\n  };\n\n  var handleCorrection = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(ds);\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post(apiUrl + '/loan/dailycollections/payment/correctdailycollection', {\n                id: ds.id,\n                amount: ds.amount\n              });\n\n            case 4:\n              results = _context2.sent;\n\n              if (!(results.statusText === 'OK')) {\n                _context2.next = 12;\n                break;\n              }\n\n              Swal.fire('Success', 'Correction Made', 'success');\n              setAllData({\n                id: '',\n                dateOfCollection: '',\n                customer: '',\n                officer: '',\n                amount: '',\n                ModeOfPayment: '',\n                status: '',\n                loanId: ''\n              });\n              setDs({\n                id: 0,\n                amount: 0\n              });\n              setRender(!render);\n              _context2.next = 13;\n              break;\n\n            case 12:\n              return _context2.abrupt(\"return\", Swal.fire('OOPS', 'Correction Unsuccessful', 'error'));\n\n            case 13:\n              _context2.next = 18;\n              break;\n\n            case 15:\n              _context2.prev = 15;\n              _context2.t0 = _context2[\"catch\"](1);\n              return _context2.abrupt(\"return\", Swal.fire(_context2.t0.message + '[OOPS', 'Correction Unsuccessful]', 'error'));\n\n            case 18:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 15]]);\n    }));\n\n    return function handleCorrection() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    lg: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-left mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, \"Daily Collections Update\"), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mb-3 row mt-5 col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"dateOfPayment\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, \"Date Of Payment\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    class: \"form-control\",\n    id: \"dateOfPayment\",\n    value: dateOfCollection,\n    onChange: handleDateOfPaymentChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"search\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 17\n    }\n  }, \"Search\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"search\",\n    value: search,\n    onChange: handleSearchChanged,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Table, {\n    className: \"table-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"caption\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }\n  }, \"Daily Collections\"), /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 21\n    }\n  }, \"ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 21\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  }, \"Officer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 21\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 21\n    }\n  }, \"Mode Of Payment\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 21\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 21\n    }\n  }, \"Loan ID\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 17\n    }\n  }, dataTouse.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 23\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 23\n      }\n    }, c.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 23\n      }\n    }, c.Customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 23\n      }\n    }, c.Officer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 23\n      }\n    }, formatter.format(c.Amount)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 23\n      }\n    }, c.ModeOfPayment), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 23\n      }\n    }, c.status), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 23\n      }\n    }, c.loanId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(CButton, {\n      color: \"success btn-sm\",\n      onClick: function onClick() {\n        return showModal(c);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 25\n      }\n    }, \"Select\")));\n  }))))))), /*#__PURE__*/React.createElement(Modal, {\n    className: \"modalCustomer fade \",\n    size: \"md\",\n    show: show,\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    closeButton: true,\n    align: \"left\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    className: \"modal-body col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"nameOfOfficer\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 13\n    }\n  }, \"Name of Customer\"), /*#__PURE__*/React.createElement(CInput, {\n    name: \"nameOfCustomer\",\n    className: \"text-left\",\n    type: \"text\",\n    id: \"nameOfCustomer\",\n    value: allData.customer,\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"Balance\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 13\n    }\n  }, \"Officer\"), /*#__PURE__*/React.createElement(CInput, {\n    name: \"Balance\",\n    className: \"form-control  text-left\",\n    type: \"text\",\n    id: \"Balance\",\n    value: allData.officer,\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"amountReceived\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 13\n    }\n  }, \"Mode Of Payment\"), /*#__PURE__*/React.createElement(CInput, {\n    autoComplete: \"off\",\n    type: \"text\",\n    name: \"amountReceived\",\n    className: \"form-control  text-right\",\n    id: \"amountReceived\",\n    value: allData.modeOfPayment,\n    onChange: null,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"comment\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(CInput, (_React$createElement = {\n    autoComplete: \"off\",\n    type: \"textArea\",\n    name: \"comment\",\n    className: \"form-control text-left\",\n    id: \"comment\",\n    value: allData.status\n  }, _defineProperty(_React$createElement, \"autoComplete\", \"off\"), _defineProperty(_React$createElement, \"onChange\", null), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 13\n  }), _React$createElement)), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"comment\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 13\n    }\n  }, \"Loan ID\"), /*#__PURE__*/React.createElement(CInput, (_React$createElement2 = {\n    autoComplete: \"off\",\n    type: \"textArea\",\n    name: \"comment\",\n    className: \"form-control text-left\",\n    id: \"comment\",\n    value: allData.loanId\n  }, _defineProperty(_React$createElement2, \"autoComplete\", \"off\"), _defineProperty(_React$createElement2, \"onChange\", null), _defineProperty(_React$createElement2, \"__self\", _this), _defineProperty(_React$createElement2, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 13\n  }), _React$createElement2)), /*#__PURE__*/React.createElement(CLabel, {\n    htmlFor: \"Balance\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, \"Amount (GHC)\"), /*#__PURE__*/React.createElement(CInput, {\n    name: \"Balance\",\n    className: \"form-control  text-left\",\n    type: \"text\",\n    id: \"Balance\",\n    value: ds.amount,\n    onChange: function onChange(e) {\n      return setDs(_objectSpread(_objectSpread({}, ds), {}, {\n        amount: e.currentTarget.value\n      }));\n    },\n    autoComplete: \"off\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleCorrection,\n    color: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 11\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(CButton, {\n    onClick: function onClick() {\n      return setShow(false);\n    },\n    color: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n};\n\nexport default ViewToCorrectRepayment;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/viewToCorrectRepayments.js"],"names":["React","useState","useEffect","Modal","Link","useNavigate","Navigate","useHistory","axios","moment","Joi","CurrencyFormat","Swal","auth","apiUrl","reportUrl","BookProduct","LoanPrincipal","Guarantors","GuarantorTwo","BusinessDetails","Directions","AdaboSelect","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","now","ViewToCorrectRepayment","dailycollections","setDailyCollections","render","setRender","search","setSearch","Date","dated","setDated","show","setShow","save","setSave","edit","setEdit","toISOString","slice","dateOfCollection","setDateOfCollection","id","customer","officer","amount","ModeOfPayment","status","loanId","allData","setAllData","ds","setDs","formatDate","date","newDate","year","getFullYear","toString","month","getMonth","substring","day","getDate","getDailyCollections","get","results","data","handleDateOfPaymentChange","e","currentTarget","value","handleSearchChanged","dailycollectionsFilter","filter","item","Officer","toLowerCase","includes","Customer","dataTouse","length","formatter","Intl","NumberFormat","style","currency","openCustomerListAsReport","url","windowFeatures","window","open","showModal","Amount","modeOfPayment","handleCorrection","console","log","post","statusText","fire","message","map","c","index","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Modal } from 'react-bootstrap'\nimport { Link, useNavigate, Navigate, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport Joi from 'joi-browser'\nimport CurrencyFormat from 'react-currency-format'\nimport Swal from 'sweetalert2'\nimport auth from '../../components/services/authService'\nimport { apiUrl } from '../../config.json'\nimport { reportUrl } from '../../config.json'\nimport BookProduct from './bookProduct'\nimport LoanPrincipal from './loanPrincipalEntry'\nimport Guarantors from './guarantors'\nimport GuarantorTwo from './guarantorTwo'\nimport BusinessDetails from './businessDetails'\nimport Directions from './directions'\nimport AdaboSelect from 'react-select'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nimport { now } from 'moment'\n\nconst ViewToCorrectRepayment = () => {\n  const [dailycollections, setDailyCollections] = useState([])\n  const [render, setRender] = useState(false)\n  const [search, setSearch] = useState('')\n  const [dated, setDated] = useState(new Date())\n  const [show, setShow] = useState(false)\n  const [save, setSave] = useState(true)\n  const [edit, setEdit] = useState(false)\n  const [dateOfCollection, setDateOfCollection] = useState(\n    new Date().toISOString().slice(0, 10),\n  )\n  const [allData, setAllData] = useState({\n    id: '',\n    dateOfCollection: '',\n    customer: '',\n    officer: '',\n    amount: '',\n    ModeOfPayment: '',\n    status: '',\n    loanId: '',\n  })\n\n  const [ds, setDs] = useState({\n    id: 0,\n    amount: 0,\n  })\n\n  function formatDate(date) {\n    let newDate = new Date(date)\n    var year = newDate.getFullYear().toString()\n    var month = (newDate.getMonth() + 101).toString().substring(1)\n    var day = (newDate.getDate() + 100).toString().substring(1)\n    return year + '-' + month + '-' + day\n  }\n\n  useEffect(() => {\n    async function getDailyCollections() {\n      const results = await axios.get(\n        apiUrl + '/loan/dailycollections/correction/' + dateOfCollection,\n      )\n      setDailyCollections(results.data)\n      //if (results.data[0].img == null) return\n      //setBuffer(results.data[0].img.data)\n    }\n    getDailyCollections()\n  }, [render, dateOfCollection])\n\n  const handleDateOfPaymentChange = (e) => {\n    setDateOfCollection(e.currentTarget.value)\n  }\n  const handleSearchChanged = (e) => {\n    setSearch(e.currentTarget.value)\n  }\n\n  /*useEffect(() => {\n    async function getRegistrationFees() {\n      const results = await axios.get(apiUrl + '/loan/registrationfee')\n      setRegistrationFees(results.data)\n    }\n    getRegistrationFees()\n  }, [registrationFees, render])\n*/\n  const data = {\n    dailycollectionsFilter: dailycollections.filter(\n      (item) =>\n        item.Officer.toLowerCase().includes(search.toLowerCase()) ||\n        item.Customer.toLowerCase().includes(search.toLowerCase()),\n    ),\n  }\n\n  const dataTouse =\n    search.length === 0 ? dailycollections : data.dailycollectionsFilter\n\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=320,height=320'\n    window.open(url, 'customerlist', 'popup', windowFeatures)\n  }\n\n  const showModal = (e) => {\n    setAllData({\n      id: e.id,\n      dateOfCollection: e.dateOfCollection,\n      customer: e.Customer,\n      officer: e.Officer,\n      amount: e.Amount,\n      modeOfPayment: e.ModeOfPayment,\n      status: e.status,\n      loanId: e.loanId,\n    })\n    setDs({\n      id: e.id,\n      amount: e.Amount,\n    })\n    setShow(!show)\n  }\n\n  const handleCorrection = async () => {\n    console.log(ds)\n    try {\n      const results = await axios.post(\n        apiUrl + '/loan/dailycollections/payment/correctdailycollection',\n        {\n          id: ds.id,\n          amount: ds.amount,\n        },\n      )\n      if (results.statusText === 'OK') {\n        Swal.fire('Success', 'Correction Made', 'success')\n        setAllData({\n          id: '',\n          dateOfCollection: '',\n          customer: '',\n          officer: '',\n          amount: '',\n          ModeOfPayment: '',\n          status: '',\n          loanId: '',\n        })\n        setDs({\n          id: 0,\n          amount: 0,\n        })\n        setRender(!render)\n      } else {\n        //console.log(results)\n        return Swal.fire('OOPS', 'Correction Unsuccessful', 'error')\n      }\n    } catch (ex) {\n      return Swal.fire(\n        ex.message + '[OOPS',\n        'Correction Unsuccessful]',\n        'error',\n      )\n    }\n  }\n  return (\n    <div>\n      <CRow>\n        <CCol lg={12}>\n          <CCard>\n            <h4 className=\"text-left mt-3\">Daily Collections Update</h4>\n            <CCardBody>\n              <div class=\"mb-3 row mt-5 col-sm-12\">\n                <CLabel htmlFor=\"dateOfPayment\" className=\"form-label\">\n                  Date Of Payment\n                </CLabel>\n                <div className=\"col-sm-3\">\n                  <CInput\n                    type=\"date\"\n                    class=\"form-control\"\n                    id=\"dateOfPayment\"\n                    value={dateOfCollection}\n                    onChange={handleDateOfPaymentChange}\n                  />\n                </div>\n\n                <CLabel htmlFor=\"search\" className=\"form-label\">\n                  Search\n                </CLabel>\n                <div className=\"col-sm-3\">\n                  <CInput\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"search\"\n                    value={search}\n                    onChange={handleSearchChanged}\n                  />\n                </div>\n              </div>\n\n              <Table className=\"table-sm\">\n                <caption>Daily Collections</caption>\n                <thead>\n                  <tr className=\"fs-sm\">\n                    <th></th>\n                    <th>ID</th>\n                    {/* <th>Date Of Collection</th> */}\n                    <th>Customer</th>\n                    <th>Officer</th>\n                    <th>Amount</th>\n                    <th>Mode Of Payment</th>\n                    <th>Status</th>\n                    <th>Loan ID</th>\n                    <th></th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {dataTouse.map((c, index) => (\n                    <tr key={c.id}>\n                      <td>{index + 1}</td>\n                      <td>{c.id}</td>\n                      {/* <td>{c.dateOfCollection}</td> */}\n                      <td>{c.Customer}</td>\n                      <td>{c.Officer}</td>\n                      <td>{formatter.format(c.Amount)}</td>\n                      <td>{c.ModeOfPayment}</td>\n                      <td>{c.status}</td>\n                      <td>{c.loanId}</td>\n                      <td>\n                        <CButton\n                          color=\"success btn-sm\"\n                          onClick={() => showModal(c)}\n                        >\n                          Select\n                        </CButton>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </Table>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n      <Modal\n        className=\"modalCustomer fade \"\n        size=\"md\"\n        show={show}\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n        closeButton\n        align=\"left\"\n      >\n        <Modal.Body className=\"modal-body col-sm-12\">\n          <form>\n            <CLabel htmlFor=\"nameOfOfficer\" className=\"form-label\">\n              Name of Customer\n            </CLabel>\n            <CInput\n              name=\"nameOfCustomer\"\n              className=\"text-left\"\n              type=\"text\"\n              id=\"nameOfCustomer\"\n              value={allData.customer}\n              autoComplete=\"off\"\n            />\n\n            <CLabel htmlFor=\"Balance\" className=\"form-label\">\n              Officer\n            </CLabel>\n            <CInput\n              name=\"Balance\"\n              className=\"form-control  text-left\"\n              type=\"text\"\n              id=\"Balance\"\n              value={allData.officer}\n              autoComplete=\"off\"\n            />\n\n            <CLabel htmlFor=\"amountReceived\" className=\"form-label\">\n              Mode Of Payment\n            </CLabel>\n            <CInput\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"amountReceived\"\n              className=\"form-control  text-right\"\n              id=\"amountReceived\"\n              value={allData.modeOfPayment}\n              onChange={null}\n            />\n\n            <CLabel htmlFor=\"comment\" className=\"form-label\">\n              Status\n            </CLabel>\n            <CInput\n              autoComplete=\"off\"\n              type=\"textArea\"\n              name=\"comment\"\n              className=\"form-control text-left\"\n              id=\"comment\"\n              value={allData.status}\n              autoComplete=\"off\"\n              onChange={null}\n            />\n            <CLabel htmlFor=\"comment\" className=\"form-label\">\n              Loan ID\n            </CLabel>\n            <CInput\n              autoComplete=\"off\"\n              type=\"textArea\"\n              name=\"comment\"\n              className=\"form-control text-left\"\n              id=\"comment\"\n              value={allData.loanId}\n              autoComplete=\"off\"\n              onChange={null}\n            />\n            <CLabel htmlFor=\"Balance\" className=\"form-label\">\n              Amount (GHC)\n            </CLabel>\n            <CInput\n              name=\"Balance\"\n              className=\"form-control  text-left\"\n              type=\"text\"\n              id=\"Balance\"\n              value={ds.amount}\n              onChange={(e) => setDs({ ...ds, amount: e.currentTarget.value })}\n              autoComplete=\"off\"\n            />\n          </form>\n        </Modal.Body>\n        <Modal.Footer>\n          <CButton onClick={handleCorrection} color=\"success\">\n            Submit\n          </CButton>\n\n          <CButton onClick={() => setShow(false)} color=\"danger\">\n            Close\n          </CButton>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  )\n}\n\nexport default ViewToCorrectRepayment\n"]},"metadata":{},"sourceType":"module"}
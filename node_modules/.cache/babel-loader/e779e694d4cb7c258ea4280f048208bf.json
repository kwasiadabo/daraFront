{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import CIcon from\"@coreui/icons-react\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import Joi from\"joi-browser\";import Swal from\"sweetalert2\";//import NavHeader from \"../../components/navHeader\";\n//import { toast } from \"react-toastify\";\nimport{//CBadge,\nCCard,CCardBody//CCardHeader,\n,CCol//CDataTable,\n,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend//CDropdownItem,\n,CForm//CCardFooter,\n//CDropdownToggle,\n//CInputRadio,\n//CDropdown,\n,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n//CSelect,\n//CDropdownMenu,\n//CCardFooter,\n,CInputGroup//CForm,\n}from\"@coreui/react\";//import { DocsLink } from 'src/reusable'\n//import usersData from './psm/users/usersData';\n//import usersData from '../users/UsersData';\nvar GradeSetup=function GradeSetup(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),gradeData=_useState2[0],setGradeData=_useState2[1];var getBadge=function getBadge(status){switch(status){case\"Active\":return\"success\";case\"Inactive\":return\"secondary\";case\"Pending\":return\"warning\";case\"Banned\":return\"danger\";default:return\"primary\";}};//{id: 0, name: 'John Doe', registered: '2018/01/01', role: 'Guest', status: 'Pending', ok: 'Pending'}\nvar fields=[\"_id\",\"Grade\",\"Action\"];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),visible=_useState4[0],setVisible=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),search=_useState6[0],setSearch=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),grades=_useState8[0],setGrades=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),disableButton=_useState10[0],setDisableButton=_useState10[1];useEffect(function(){function getGrades(){return _getGrades.apply(this,arguments);}function _getGrades(){_getGrades=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://ugmcservice.herokuapp.com/api/grades\");case 2:results=_context.sent;setGrades(results.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return _getGrades.apply(this,arguments);}getGrades();},[grades]);var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),grade=_useState12[0],setGrade=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),level=_useState14[0],setLevel=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),days=_useState16[0],setDays=_useState16[1];var joiGradeSchema=Joi.object().keys({grade:Joi.string().required().label(\"Grade\"),level:Joi.string().required().label(\"Level\"),days:Joi.number().label(\"Days\")});var validateEntry=function validateEntry(){var result=Joi.validate({grade:grade,level:level},joiGradeSchema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleLevelChange=function handleLevelChange(e){setLevel(e.currentTarget.value);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var Ldays,validate,results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:Ldays=level===\"Management\"?42:level===\"Senior\"?36:level===\"Middle\"?28:21;validate=validateEntry();if(!(validate===null)){_context2.next=17;break;}_context2.prev=3;setDisableButton(true);_context2.next=7;return axios.post(\"https://ugmcservice.herokuapp.com/api/grades\",{grade:grade,level:level,days:Ldays});case 7:results=_context2.sent;if(results.status===200){Swal.fire({title:\"Success\",text:\"Grade Successfully Added\",icon:\"success\"});setVisible(false);}else{Swal.fire({title:\"Oops!\",text:\"Grade Failed\",icon:\"danger\"});}_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);if(!(_context2.t0.response&&_context2.t0.response.status===400)){_context2.next=15;break;}return _context2.abrupt(\"return\",Swal.fire({title:\"Oops!\",text:_context2.t0.response.data,icon:\"danger\"}));case 15:_context2.next=18;break;case 17:Swal.fire(\"Validation Error\",validate,\"error\");case 18:setGrade(\"\");setLevel(\"\");setDays(\"\");setDisableButton(false);case 22:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();var handleSearch=function handleSearch(e){setSearch(e.currentTarget.value);};var handleEditClicked=function handleEditClicked(s){console.log(s);};var data={grades:grades.filter(function(item){return item.grade.toLowerCase().includes(search.toLowerCase());})};var dataTouse=search.length===0?grades:data.grades;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CModalHeader,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CFormGroup,null,/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"appendedInputButtons\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"controls\"},/*#__PURE__*/React.createElement(CInputGroup,null,/*#__PURE__*/React.createElement(CInput,{id:\"appendedInputButtons\",size:\"16\",type:\"text\",onChange:handleSearch}),/*#__PURE__*/React.createElement(CInputGroupAppend,null,/*#__PURE__*/React.createElement(CCol,null,/*#__PURE__*/React.createElement(CButton,{color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(CButton,{color:\"primary\",onClick:function onClick(){return setVisible(!visible);}},\"+ New Grade\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"success\",onClick:function onClick(){return setVisible(!visible);}},\"Export Report\")))))))),/*#__PURE__*/React.createElement(CModal,{show:visible,onClose:function onClose(){return setVisible(!visible);},color:\"primary\",size:\"lg\"},/*#__PURE__*/React.createElement(CModalHeader,{closeButton:true},/*#__PURE__*/React.createElement(CModalTitle,null,\"System Setup | Grade \")),/*#__PURE__*/React.createElement(CModalBody,null,/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,{xs:\"12\",md:\"12\"},/*#__PURE__*/React.createElement(CCard,null,/*#__PURE__*/React.createElement(CCardHeader,null,\"GRADE MANAGEMENT\"),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(CForm,{action:\"\",method:\"post\",className:\"form-horizontal\"},/*#__PURE__*/React.createElement(CFormGroup,{row:true},/*#__PURE__*/React.createElement(CCol,{md:\"12\"},/*#__PURE__*/React.createElement(CInputGroup,null,/*#__PURE__*/React.createElement(CInputGroupPrepend,null,/*#__PURE__*/React.createElement(CButton,{type:\"InsName\",color:\"primary\"},/*#__PURE__*/React.createElement(CIcon,{name:\"cil-magnifying-glass\"}))),/*#__PURE__*/React.createElement(CInput,{id:\"Grade\",name:\"Grade\",placeholder:\"Grade Name\",value:grade,onChange:function onChange(e){return setGrade(e.currentTarget.value);}}))),/*#__PURE__*/React.createElement(CCol,{md:\"12\",className:\"mt-3\"},/*#__PURE__*/React.createElement(CInputGroup,null,/*#__PURE__*/React.createElement(\"select\",{name:\"Levels\",id:\"Levels\",className:\"form-control col-6 mt-3\",value:level,onChange:handleLevelChange},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"--Select Level--\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Management\"},\"Management\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Senior\"},\"Senior\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Middle\"},\"Middle\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Junior\"},\"Junior\")))))))))))),/*#__PURE__*/React.createElement(CModalFooter,null,/*#__PURE__*/React.createElement(CButton,{color:\"success\",size:\"sm\",onClick:handleSubmit},\"Save\"),\" \",/*#__PURE__*/React.createElement(CButton,{color:\"warning\",size:\"sm\",onClick:function onClick(){return setVisible(!visible);}},\"Reset\"),/*#__PURE__*/React.createElement(CButton,{color:\"danger\",size:\"sm\",onClick:function onClick(){return setVisible(!visible);}},\"Cancel\"))),/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(\"table\",{className:\"table table-hover table-outline mb-0 d-none d-sm-table\"},/*#__PURE__*/React.createElement(\"caption\",null,\"Grades\"),/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-light\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Number\"),/*#__PURE__*/React.createElement(\"th\",null,\"Grade\"),/*#__PURE__*/React.createElement(\"th\",null,\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"\"},dataTouse.map(function(s,index){return/*#__PURE__*/React.createElement(\"tr\",{key:s._id},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,s.grade),/*#__PURE__*/React.createElement(\"td\",{className:\"float-right\"},/*#__PURE__*/React.createElement(CButton,{color:\"info\",size:\"sm\",onClick:function onClick(s){return handleEditClicked(s);}},\"Edit\")));}))),/*#__PURE__*/React.createElement(\"p\",{className:\"hou-p\"},\"Showing \",grades.length,\" Grades...\"))))));};export default GradeSetup;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/setup/Grade.js"],"names":["CIcon","React","useState","useEffect","axios","Joi","Swal","CCard","CCardBody","CCol","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CForm","CModalTitle","CFormGroup","CLabel","CInput","CInputGroup","GradeSetup","gradeData","setGradeData","getBadge","status","fields","visible","setVisible","search","setSearch","grades","setGrades","disableButton","setDisableButton","getGrades","get","results","data","grade","setGrade","level","setLevel","days","setDays","joiGradeSchema","object","keys","string","required","label","number","validateEntry","result","validate","error","details","message","handleLevelChange","e","currentTarget","value","handleSubmit","Ldays","post","fire","title","text","icon","response","handleSearch","handleEditClicked","s","console","log","filter","item","toLowerCase","includes","dataTouse","length","map","index","_id"],"mappings":"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","sourcesContent":["import CIcon from \"@coreui/icons-react\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport Joi from \"joi-browser\";\nimport Swal from \"sweetalert2\";\n//import NavHeader from \"../../components/navHeader\";\n//import { toast } from \"react-toastify\";\n\nimport {\n  //CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  //CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  //CDropdownItem,\n  CForm,\n  //CCardFooter,\n  //CDropdownToggle,\n  //CInputRadio,\n  //CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  //CSelect,\n  //CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from \"@coreui/react\";\n//import { DocsLink } from 'src/reusable'\n\n//import usersData from './psm/users/usersData';\n\n//import usersData from '../users/UsersData';\n\nconst GradeSetup = () => {\n  const [gradeData, setGradeData] = useState([]);\n\n  const getBadge = (status) => {\n    switch (status) {\n      case \"Active\":\n        return \"success\";\n      case \"Inactive\":\n        return \"secondary\";\n      case \"Pending\":\n        return \"warning\";\n      case \"Banned\":\n        return \"danger\";\n      default:\n        return \"primary\";\n    }\n  };\n\n  //{id: 0, name: 'John Doe', registered: '2018/01/01', role: 'Guest', status: 'Pending', ok: 'Pending'}\n  const fields = [\"_id\", \"Grade\", \"Action\"];\n  const [visible, setVisible] = useState(false);\n  const [search, setSearch] = useState(\"\");\n\n  const [grades, setGrades] = useState([]);\n  const [disableButton, setDisableButton] = useState(false);\n\n  useEffect(() => {\n    async function getGrades() {\n      const results = await axios.get(\n        \"https://ugmcservice.herokuapp.com/api/grades\"\n      );\n      setGrades(results.data);\n    }\n    getGrades();\n  }, [grades]);\n\n  const [grade, setGrade] = useState(\"\");\n  const [level, setLevel] = useState(\"\");\n  const [days, setDays] = useState(\"\");\n\n  const joiGradeSchema = Joi.object().keys({\n    grade: Joi.string().required().label(\"Grade\"),\n    level: Joi.string().required().label(\"Level\"),\n    days: Joi.number().label(\"Days\"),\n  });\n\n  const validateEntry = () => {\n    const result = Joi.validate({ grade, level }, joiGradeSchema);\n    if (result.error) {\n      return result.error.details[0].message;\n    } else {\n      return null;\n    }\n  };\n\n  const handleLevelChange = (e) => {\n    setLevel(e.currentTarget.value);\n  };\n\n  const handleSubmit = async () => {\n    const Ldays =\n      level === \"Management\"\n        ? 42\n        : level === \"Senior\"\n        ? 36\n        : level === \"Middle\"\n        ? 28\n        : 21;\n\n    const validate = validateEntry();\n    if (validate === null) {\n      try {\n        setDisableButton(true);\n        const results = await axios.post(\n          \"https://ugmcservice.herokuapp.com/api/grades\",\n          { grade: grade, level: level, days: Ldays }\n        );\n\n        if (results.status === 200) {\n          Swal.fire({\n            title: \"Success\",\n            text: \"Grade Successfully Added\",\n            icon: \"success\",\n          });\n          setVisible(false);\n        } else {\n          Swal.fire({ title: \"Oops!\", text: \"Grade Failed\", icon: \"danger\" });\n        }\n      } catch (err) {\n        if (err.response && err.response.status === 400) {\n          return Swal.fire({\n            title: \"Oops!\",\n            text: err.response.data,\n            icon: \"danger\",\n          });\n\n          //toast.error(err.response.data);\n        }\n      }\n    } else {\n      Swal.fire(\"Validation Error\", validate, \"error\");\n    }\n    setGrade(\"\");\n    setLevel(\"\");\n    setDays(\"\");\n    setDisableButton(false);\n  };\n  const handleSearch = (e) => {\n    setSearch(e.currentTarget.value);\n  };\n  const handleEditClicked = (s) => {\n    console.log(s);\n  };\n\n  const data = {\n    grades: grades.filter((item) =>\n      item.grade.toLowerCase().includes(search.toLowerCase())\n    ),\n  };\n\n  const dataTouse = search.length === 0 ? grades : data.grades;\n\n  return (\n    <>\n      <CRow>\n        <CCol>\n          <CCard>\n            <div>\n              <CModalHeader>\n                <CCol>\n                  <CFormGroup>\n                    <CLabel htmlFor=\"appendedInputButtons\"></CLabel>\n                    <div className=\"controls\">\n                      <CInputGroup>\n                        <CInput\n                          id=\"appendedInputButtons\"\n                          size=\"16\"\n                          type=\"text\"\n                          onChange={handleSearch}\n                        />\n                        <CInputGroupAppend>\n                          <CCol>\n                            <CButton color=\"primary\">Search</CButton>\n                          </CCol>\n                          <CButton\n                            color=\"primary\"\n                            onClick={() => setVisible(!visible)}\n                          >\n                            + New Grade\n                          </CButton>{\" \"}\n                          <CButton\n                            color=\"success\"\n                            onClick={() => setVisible(!visible)}\n                          >\n                            Export Report\n                          </CButton>\n                        </CInputGroupAppend>\n                      </CInputGroup>\n                    </div>\n                  </CFormGroup>\n                </CCol>\n              </CModalHeader>\n            </div>\n\n            {/*<CButton color=\"success\" onClick={() => setSuccess(!success)} className=\"mr-1\">Success modal</CButton>\n            <CButton color=\"warning\" onClick={() => setWarning(!warning)} className=\"mr-1\">Warning modal</CButton>\n            <CButton color=\"danger\" onClick={() => setDanger(!danger)} className=\"mr-1\">Danger modal</CButton>\n  <CButton color=\"info\" onClick={() => setInfo(!info)} className=\"mr-1\">Info modal</CButton>*/}\n\n            <CModal\n              show={visible}\n              onClose={() => setVisible(!visible)}\n              color=\"primary\"\n              size=\"lg\"\n            >\n              <CModalHeader closeButton>\n                <CModalTitle>System Setup | Grade </CModalTitle>\n              </CModalHeader>\n              <CModalBody>\n                <form>\n                  <CRow>\n                    <CCol xs=\"12\" md=\"12\">\n                      <CCard>\n                        <CCardHeader>GRADE MANAGEMENT</CCardHeader>\n                        <CCardBody>\n                          <CForm\n                            action=\"\"\n                            method=\"post\"\n                            className=\"form-horizontal\"\n                          >\n                            <CFormGroup row>\n                              <CCol md=\"12\">\n                                <CInputGroup>\n                                  <CInputGroupPrepend>\n                                    <CButton type=\"InsName\" color=\"primary\">\n                                      <CIcon name=\"cil-magnifying-glass\" />\n                                    </CButton>\n                                  </CInputGroupPrepend>\n                                  <CInput\n                                    id=\"Grade\"\n                                    name=\"Grade\"\n                                    placeholder=\"Grade Name\"\n                                    value={grade}\n                                    onChange={(e) =>\n                                      setGrade(e.currentTarget.value)\n                                    }\n                                  />\n                                </CInputGroup>\n                              </CCol>\n                              <CCol md=\"12\" className=\"mt-3\">\n                                <CInputGroup>\n                                  <select\n                                    name=\"Levels\"\n                                    id=\"Levels\"\n                                    className=\"form-control col-6 mt-3\"\n                                    value={level}\n                                    onChange={handleLevelChange}\n                                  >\n                                    <option value=\"\">--Select Level--</option>\n                                    <option value=\"Management\">\n                                      Management\n                                    </option>\n                                    <option value=\"Senior\">Senior</option>\n                                    <option value=\"Middle\">Middle</option>\n                                    <option value=\"Junior\">Junior</option>\n                                  </select>\n                                </CInputGroup>\n                              </CCol>\n                            </CFormGroup>\n                          </CForm>\n                        </CCardBody>\n                      </CCard>\n                    </CCol>\n                  </CRow>\n                </form>\n              </CModalBody>\n              <CModalFooter>\n                <CButton color=\"success\" size=\"sm\" onClick={handleSubmit}>\n                  Save\n                </CButton>{\" \"}\n                <CButton\n                  color=\"warning\"\n                  size=\"sm\"\n                  onClick={() => setVisible(!visible)}\n                >\n                  Reset\n                </CButton>\n                <CButton\n                  color=\"danger\"\n                  size=\"sm\"\n                  onClick={() => setVisible(!visible)}\n                >\n                  Cancel\n                </CButton>\n              </CModalFooter>\n            </CModal>\n\n            <CCardBody>\n              {/* <CDataTable\n              items={dataTouse}\n              fields={fields}\n              dark\n              hover\n              striped\n              bordered\n              size=\"sm\"\n              itemsPerPage={20}\n              pagination\n              scopedSlots = {{\n                'Action':\n                  (item)=>(\n               \n                      \n                    <td>\n                      <tr>\n                      <CButton color=\"info\" size=\"sm\" onClick={(s)=>handleEditClicked(s)}>\n                  Edit\n                </CButton>\n\n\n<CButton color=\"danger\" size=\"sm\" onClick={() => setVisible(!visible)}>\nCancel\n</CButton>\n\n<CButton color=\"primary\" size=\"sm\" onClick={() => setVisible(!visible)}>\nCancel\n</CButton>\n</tr>\n\n</td>\n\n\n                \n                    \n                  )\n              }}\n            />*/}\n\n              <table className=\"table table-hover table-outline mb-0 d-none d-sm-table\">\n                <caption>Grades</caption>\n                <thead className=\"thead-light\">\n                  <tr>\n                    <th>Number</th>\n                    <th>Grade</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody className=\"\">\n                  {dataTouse.map((s, index) => (\n                    <tr key={s._id}>\n                      <td>{index + 1}</td>\n                      <td>{s.grade}</td>\n\n                      <td className=\"float-right\">\n                        <CButton\n                          color=\"info\"\n                          size=\"sm\"\n                          onClick={(s) => handleEditClicked(s)}\n                        >\n                          Edit\n                        </CButton>\n\n                        {/*<CButton color=\"primary\" size=\"sm\" onClick={(s)=>handleEditClicked(s)}>\n                  Edit\n                </CButton>\n                <CButton color=\"danger\" size=\"sm\" onClick={(s)=>handleEditClicked(s)}>\n                  Edit\n              </CButton>*/}\n                      </td>\n                      {/*<td>\n                    <button\n                      className=\"but btn-houReject\"\n                      onClick={() => handleShow(s)}\n                    >\n                      Reject\n                    </button>\n                  </td>*/}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n              <p className=\"hou-p\">Showing {grades.length} Grades...</p>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </>\n  );\n};\n\nexport default GradeSetup;\n"]},"metadata":{},"sourceType":"module"}
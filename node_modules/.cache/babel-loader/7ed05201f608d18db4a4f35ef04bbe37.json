{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/cashAccounting.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate, useParams, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { Modal } from 'react-bootstrap';\nimport auth from '../../components/services/authService';\nimport Joi from 'joi-browser';\nimport Swal from 'sweetalert2';\nimport { apiUrl } from '../../config.json';\nimport '../../.././src/schedulecards.css';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Badge //Modal,\n} from 'reactstrap';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CDropdownDivider, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup //CForm,\n} from '@coreui/react';\nimport { LineChart, BarChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, Bar, Cell, Label, Legend, ResponsiveContainer } from 'recharts';\nimport { GiSatelliteCommunication } from 'react-icons/gi';\n\nvar CashAccounting = function CashAccounting() {\n  var _useState = useState(auth.getCurrentUser),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      expenses = _useState4[0],\n      setExpenses = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loans = _useState6[0],\n      setLoans = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      vaultTransfer = _useState8[0],\n      setVaultTransfer = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      registrations = _useState10[0],\n      setRegistrations = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      processingFee = _useState12[0],\n      setProcessingFee = _useState12[1];\n\n  var _useState13 = useState(0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      collateral = _useState14[0],\n      setCollateral = _useState14[1];\n\n  var _useState15 = useState(new Date().toISOString().slice(0, 10)),\n      _useState16 = _slicedToArray(_useState15, 2),\n      tdate = _useState16[0],\n      setTdate = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      render = _useState18[0],\n      setRender = _useState18[1];\n\n  var navigate = useHistory();\n  useEffect(function () {\n    function getLoanCollections() {\n      return _getLoanCollections.apply(this, arguments);\n    }\n\n    function _getLoanCollections() {\n      _getLoanCollections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(apiUrl + '/cashaccounting/loans/' + tdate);\n\n              case 2:\n                results = _context.sent;\n                setLoans(results.data[0].TotalAmount);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _getLoanCollections.apply(this, arguments);\n    }\n\n    getLoanCollections();\n  }, [tdate]);\n  useEffect(function () {\n    function getCollateralCollections() {\n      return _getCollateralCollections.apply(this, arguments);\n    }\n\n    function _getCollateralCollections() {\n      _getCollateralCollections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.get(apiUrl + '/cashaccounting/collateral/' + tdate);\n\n              case 2:\n                results = _context2.sent;\n                setCollateral(results.data[0].collateral);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _getCollateralCollections.apply(this, arguments);\n    }\n\n    getCollateralCollections();\n  }, [tdate]);\n  useEffect(function () {\n    function getRegistrationCollections() {\n      return _getRegistrationCollections.apply(this, arguments);\n    }\n\n    function _getRegistrationCollections() {\n      _getRegistrationCollections = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.get(apiUrl + '/cashaccounting/registration/' + tdate);\n\n              case 2:\n                results = _context3.sent;\n                setRegistrations(results.data[0].registrations);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      return _getRegistrationCollections.apply(this, arguments);\n    }\n\n    getRegistrationCollections();\n  }, [tdate]);\n  useEffect(function () {\n    function getExpenses() {\n      return _getExpenses.apply(this, arguments);\n    }\n\n    function _getExpenses() {\n      _getExpenses = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return axios.get(apiUrl + '/cashaccounting/expenses/' + tdate);\n\n              case 2:\n                results = _context4.sent;\n                setExpenses(results.data[0].expenses);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      return _getExpenses.apply(this, arguments);\n    }\n\n    getExpenses();\n  }, [tdate]);\n  useEffect(function () {\n    function getProcessingFee() {\n      return _getProcessingFee.apply(this, arguments);\n    }\n\n    function _getProcessingFee() {\n      _getProcessingFee = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return axios.get(apiUrl + '/cashaccounting/processingFee/' + tdate);\n\n              case 2:\n                results = _context5.sent;\n                setProcessingFee(results.data[0].processingFee);\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n      return _getProcessingFee.apply(this, arguments);\n    }\n\n    getProcessingFee();\n  }, [tdate]);\n  useEffect(function () {\n    function checkVaultTransfer() {\n      return _checkVaultTransfer.apply(this, arguments);\n    }\n\n    function _checkVaultTransfer() {\n      _checkVaultTransfer = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return axios.get(apiUrl + '/vault/checkendofday/' + tdate);\n\n              case 2:\n                results = _context6.sent;\n                setVaultTransfer(results.data[0].id); //console.log(results.data[0].id)\n\n              case 4:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n      return _checkVaultTransfer.apply(this, arguments);\n    }\n\n    checkVaultTransfer(); //console.log(vaultTransfer)\n  }, [tdate]);\n  var formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS' // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\n  });\n\n  var handleDateChange = function handleDateChange(e) {\n    setTdate(e.currentTarget.value);\n  };\n\n  var handleTranfer = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8() {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              if (!(cashAtHand <= 0)) {\n                _context8.next = 2;\n                break;\n              }\n\n              return _context8.abrupt(\"return\", Swal.fire('Transactions Empty', 'No transaction records showing', 'info'));\n\n            case 2:\n              Swal.fire({\n                title: 'Do you want to transfer cash at hand to vault ?',\n                showDenyButton: true,\n                showCancelButton: true,\n                confirmButtonText: 'Transfer',\n                denyButtonText: \"Don't Transfer\"\n              }).then( /*#__PURE__*/function () {\n                var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(result) {\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          if (!result.isConfirmed) {\n                            _context7.next = 7;\n                            break;\n                          }\n\n                          _context7.next = 3;\n                          return axios.post(apiUrl + '/cashaccounting', {\n                            Cr: cashAtHand,\n                            narration: 'Cash at hand from -' + tdate,\n                            tdate: tdate\n                          });\n\n                        case 3:\n                          Swal.fire('Transferred!', '', 'success');\n                          setRender(!render);\n                          _context7.next = 8;\n                          break;\n\n                        case 7:\n                          if (result.isDenied) {\n                            Swal.fire('Cancelled', '', 'info');\n                          }\n\n                        case 8:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7);\n                }));\n\n                return function (_x) {\n                  return _ref2.apply(this, arguments);\n                };\n              }());\n\n            case 3:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleTranfer() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var cashAtHand = loans + registrations + collateral - expenses;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 mt-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"centertext mb-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, \"Daily Summary\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, \"This page gives a summary account of all monies received during the day. Expenses are made from such receipts and the remainder tranferred to vault.\")), /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    className: \"col-sm-12\",\n    id: \"dateOnCheque\",\n    value: tdate,\n    onChange: function onChange(e) {\n      setTdate(e.currentTarget.value);\n      console.log(e.currentTarget.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-6 mt-3 procFee_bg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 11\n    }\n  }, \"Processing Fees\"), \" :\", ' ', formatter.format(processingFee)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mt-5 d-flex justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3 loans_bg text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  }, \"Loan Repayments\"), \": \", formatter.format(loans)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3 collateral_bg text-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, \"Cash Collateral\"), \":\", ' ', formatter.format(collateral)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3 registration_bg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, \"Registrations\"), \":\", ' ', formatter.format(registrations)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-3 expenses_bg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 13\n    }\n  }, \"Expenses\"), \" : \", formatter.format(expenses))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12 mt-5 cashAtHand_bg justify-content-center d-flex\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 11\n    }\n  }, \"Cash At Hand\"), \" :\", ' ', formatter.format(cashAtHand))), vaultTransfer == 0 && /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleTranfer,\n    className: \"col-sm-12 mt-5\",\n    color: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, \"Complete End of Day\"));\n};\n\nexport default CashAccounting;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/cashAccounting.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","useParams","useHistory","axios","moment","Modal","auth","Joi","Swal","apiUrl","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","LineChart","BarChart","Line","CartesianGrid","XAxis","YAxis","Tooltip","Bar","Cell","Label","Legend","ResponsiveContainer","GiSatelliteCommunication","CashAccounting","getCurrentUser","user","setUser","expenses","setExpenses","loans","setLoans","vaultTransfer","setVaultTransfer","registrations","setRegistrations","processingFee","setProcessingFee","collateral","setCollateral","Date","toISOString","slice","tdate","setTdate","render","setRender","navigate","getLoanCollections","get","results","data","TotalAmount","getCollateralCollections","getRegistrationCollections","getExpenses","getProcessingFee","checkVaultTransfer","id","formatter","Intl","NumberFormat","style","currency","handleDateChange","e","currentTarget","value","handleTranfer","cashAtHand","fire","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","post","Cr","narration","isDenied","console","log","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  Link,\n  useNavigate,\n  Navigate,\n  useParams,\n  useHistory,\n} from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport { Modal } from 'react-bootstrap'\nimport auth from '../../components/services/authService'\nimport Joi from 'joi-browser'\nimport Swal from 'sweetalert2'\nimport { apiUrl } from '../../config.json'\nimport '../../.././src/schedulecards.css'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Badge,\n  //Modal,\n} from 'reactstrap'\n\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nimport {\n  LineChart,\n  BarChart,\n  Line,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Bar,\n  Cell,\n  Label,\n  Legend,\n  ResponsiveContainer,\n} from 'recharts'\nimport { GiSatelliteCommunication } from 'react-icons/gi'\n\nconst CashAccounting = () => {\n  const [user, setUser] = useState(auth.getCurrentUser)\n  const [expenses, setExpenses] = useState(0)\n  const [loans, setLoans] = useState(0)\n  const [vaultTransfer, setVaultTransfer] = useState(0)\n  const [registrations, setRegistrations] = useState(0)\n  const [processingFee, setProcessingFee] = useState(0)\n  const [collateral, setCollateral] = useState(0)\n  const [tdate, setTdate] = useState(new Date().toISOString().slice(0, 10))\n  const [render, setRender] = useState(false)\n\n  let navigate = useHistory()\n\n  useEffect(() => {\n    async function getLoanCollections() {\n      const results = await axios.get(apiUrl + '/cashaccounting/loans/' + tdate)\n      setLoans(results.data[0].TotalAmount)\n    }\n    getLoanCollections()\n  }, [tdate])\n\n  useEffect(() => {\n    async function getCollateralCollections() {\n      const results = await axios.get(\n        apiUrl + '/cashaccounting/collateral/' + tdate,\n      )\n      setCollateral(results.data[0].collateral)\n    }\n    getCollateralCollections()\n  }, [tdate])\n\n  useEffect(() => {\n    async function getRegistrationCollections() {\n      const results = await axios.get(\n        apiUrl + '/cashaccounting/registration/' + tdate,\n      )\n      setRegistrations(results.data[0].registrations)\n    }\n    getRegistrationCollections()\n  }, [tdate])\n\n  useEffect(() => {\n    async function getExpenses() {\n      const results = await axios.get(\n        apiUrl + '/cashaccounting/expenses/' + tdate,\n      )\n      setExpenses(results.data[0].expenses)\n    }\n    getExpenses()\n  }, [tdate])\n\n  useEffect(() => {\n    async function getProcessingFee() {\n      const results = await axios.get(\n        apiUrl + '/cashaccounting/processingFee/' + tdate,\n      )\n      setProcessingFee(results.data[0].processingFee)\n    }\n    getProcessingFee()\n  }, [tdate])\n\n  useEffect(() => {\n    async function checkVaultTransfer() {\n      //console.log(tdate)\n      const results = await axios.get(apiUrl + '/vault/checkendofday/' + tdate)\n      setVaultTransfer(results.data[0].id)\n      //console.log(results.data[0].id)\n    }\n    checkVaultTransfer()\n    //console.log(vaultTransfer)\n  }, [tdate])\n\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  const handleDateChange = (e) => {\n    setTdate(e.currentTarget.value)\n  }\n\n  const handleTranfer = async () => {\n    if (cashAtHand <= 0)\n      return Swal.fire(\n        'Transactions Empty',\n        'No transaction records showing',\n        'info',\n      )\n    Swal.fire({\n      title: 'Do you want to transfer cash at hand to vault ?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Transfer',\n      denyButtonText: `Don't Transfer`,\n    }).then(async (result) => {\n      /* Read more about isConfirmed, isDenied below */\n      if (result.isConfirmed) {\n        await axios.post(apiUrl + '/cashaccounting', {\n          Cr: cashAtHand,\n          narration: 'Cash at hand from -' + tdate,\n          tdate,\n        })\n        Swal.fire('Transferred!', '', 'success')\n        setRender(!render)\n      } else if (result.isDenied) {\n        Swal.fire('Cancelled', '', 'info')\n      }\n    })\n  }\n  const cashAtHand = loans + registrations + collateral - expenses\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-sm-12 mt-2\">\n          <div className=\"row justify-content-center\">\n            <h4 className=\"centertext mb-3\">Daily Summary</h4>\n          </div>\n\n          <p className=\"text-center\">\n            This page gives a summary account of all monies received during the\n            day. Expenses are made from such receipts and the remainder\n            tranferred to vault.\n          </p>\n        </div>\n        <CInput\n          type=\"date\"\n          className=\"col-sm-12\"\n          id=\"dateOnCheque\"\n          value={tdate}\n          onChange={(e) => {\n            setTdate(e.currentTarget.value)\n            console.log(e.currentTarget.value)\n          }}\n        />\n        <div className=\"col-sm-6 mt-3 procFee_bg\">\n          <span className=\"\">Processing Fees</span> :{' '}\n          {formatter.format(processingFee)}\n        </div>\n\n        <div className=\"row mt-5 d-flex justify-content-center\">\n          <div className=\"col-sm-3 loans_bg text-center\">\n            <span className=\"\">Loan Repayments</span>: {formatter.format(loans)}\n          </div>\n\n          <div className=\"col-sm-3 collateral_bg text-center\">\n            <span className=\"\">Cash Collateral</span>:{' '}\n            {formatter.format(collateral)}\n          </div>\n\n          <div className=\"col-sm-3 registration_bg\">\n            <span className=\"\">Registrations</span>:{' '}\n            {formatter.format(registrations)}\n          </div>\n\n          <div className=\"col-sm-3 expenses_bg\">\n            <span className=\"\">Expenses</span> : {formatter.format(expenses)}\n          </div>\n        </div>\n        <div className=\"col-sm-12 mt-5 cashAtHand_bg justify-content-center d-flex\">\n          <span className=\"\">Cash At Hand</span> :{' '}\n          {formatter.format(cashAtHand)}\n        </div>\n      </div>\n      {vaultTransfer == 0 && (\n        <CButton\n          onClick={handleTranfer}\n          className=\"col-sm-12 mt-5\"\n          color=\"success\"\n        >\n          Complete End of Day\n        </CButton>\n      )}\n    </div>\n  )\n}\n\nexport default CashAccounting\n"]},"metadata":{},"sourceType":"module"}
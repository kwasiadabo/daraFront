{"ast":null,"code":"import _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/viewOfficerLoansDisbursed.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal } from 'react-bootstrap';\nimport { Link, useNavigate, Navigate, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport Joi from 'joi-browser';\nimport CurrencyFormat from 'react-currency-format';\nimport Swal from 'sweetalert2';\nimport auth from '../../components/services/authService';\nimport { apiUrl } from '../../config.json';\nimport { reportUrl } from '../../config.json';\nimport BookProduct from './bookProduct';\nimport LoanPrincipal from './loanPrincipalEntry';\nimport Guarantors from './guarantors';\nimport GuarantorTwo from './guarantorTwo';\nimport BusinessDetails from './businessDetails';\nimport Directions from './directions';\nimport AdaboSelect from 'react-select';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge } from 'reactstrap';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CDropdownDivider, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup //CForm,\n} from '@coreui/react';\nimport { now } from 'moment';\n\nvar ViewOfficerLoansDisbursed = function ViewOfficerLoansDisbursed() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      loanDisbursed = _useState2[0],\n      setLoansDisbursed = _useState2[1];\n\n  var _useState3 = useState(auth.getCurrentUser),\n      _useState4 = _slicedToArray(_useState3, 2),\n      officer = _useState4[0],\n      setOfficer = _useState4[1];\n\n  var _useState5 = useState(new Date().toISOString().slice(0, 10)),\n      _useState6 = _slicedToArray(_useState5, 2),\n      startDate = _useState6[0],\n      setStartDate = _useState6[1];\n\n  var _useState7 = useState(new Date().toISOString().slice(0, 10)),\n      _useState8 = _slicedToArray(_useState7, 2),\n      endDate = _useState8[0],\n      setEndDate = _useState8[1];\n\n  function formatDate(date) {\n    var newDate = new Date(date);\n    var year = newDate.getFullYear().toString();\n    var month = (newDate.getMonth() + 101).toString().substring(1);\n    var day = (newDate.getDate() + 100).toString().substring(1);\n    return year + '-' + month + '-' + day;\n  }\n\n  useEffect(function () {\n    function viewLoanBookings() {\n      return _viewLoanBookings.apply(this, arguments);\n    }\n\n    function _viewLoanBookings() {\n      _viewLoanBookings = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(officer.staff);\n                _context.next = 3;\n                return axios.get(apiUrl + '/loanreports/officerloans/' + startDate + '/' + endDate + '/' + officer.staff);\n\n              case 3:\n                results = _context.sent;\n                //console.log('Officer: ' + officer.id)\n                setLoansDisbursed(results.data); // setOfficer(auth.getCurrentUser)\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _viewLoanBookings.apply(this, arguments);\n    }\n\n    viewLoanBookings();\n  }, [startDate, endDate]);\n\n  var getBookedLoanDetails = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(c) {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return axios.get(apiUrl + '/loanreports/portfolio' + startDate + '/' + endDate);\n\n            case 2:\n              results = _context2.sent;\n              console.log(results.data);\n              setLoansDisbursed(results.data);\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getBookedLoanDetails(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleStartDateChange = function handleStartDateChange(e) {\n    setStartDate(e.currentTarget.value);\n  };\n\n  var handleEndDateChange = function handleEndDateChange(e) {\n    setEndDate(e.currentTarget.value);\n  };\n\n  var openCustomerListAsReport = function openCustomerListAsReport(url) {\n    var windowFeatures = 'left=100,top=100,width=320,height=320';\n    window.open(url, 'Loan Details', 'popup', windowFeatures);\n  };\n\n  var formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS' // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CRow, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CCol, {\n    lg: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CCard, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CCardHeader, {\n    className: \"text-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"m-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"Start Date\"), /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    className: \"col-sm-3 float-right\",\n    onChange: handleStartDateChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"m-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"m-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }, \"End Date\"), /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    className: \"col-sm-3 float-right ms-3\",\n    onChange: handleEndDateChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(CButton, {\n    className: \"float-right m-3 col-sm-3 btn-sm\",\n    color: \"success\",\n    onClick: function onClick() {\n      return openCustomerListAsReport(reportUrl + '/officerLoansDisbursed.aspx?' + startDate + '?' + endDate + '?' + officer.staff);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, \"View As Report\")), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"text-center mt-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }\n  }, \"Disbursed Loans Per Officer\"), /*#__PURE__*/React.createElement(CCardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: \"table-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"caption\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, \"Disbursed Loans By Officer\"), /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 21\n    }\n  }, \"Date\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 21\n    }\n  }, \"LoanId\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }, \"Principal\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, \"Interest\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, \"Proc.Fee\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  }, loanDisbursed.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 23\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 23\n      }\n    }, c.tDate), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 23\n      }\n    }, c.Customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 23\n      }\n    }, c.loanId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 23\n      }\n    }, formatter.format(c.principal)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 23\n      }\n    }, formatter.format(c.interestRate)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 23\n      }\n    }, formatter.format(c.processingFee)));\n  }))))))));\n};\n\nexport default ViewOfficerLoansDisbursed;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/viewOfficerLoansDisbursed.jsx"],"names":["React","useState","useEffect","Modal","Link","useNavigate","Navigate","useHistory","axios","moment","Joi","CurrencyFormat","Swal","auth","apiUrl","reportUrl","BookProduct","LoanPrincipal","Guarantors","GuarantorTwo","BusinessDetails","Directions","AdaboSelect","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","now","ViewOfficerLoansDisbursed","loanDisbursed","setLoansDisbursed","getCurrentUser","officer","setOfficer","Date","toISOString","slice","startDate","setStartDate","endDate","setEndDate","formatDate","date","newDate","year","getFullYear","toString","month","getMonth","substring","day","getDate","viewLoanBookings","console","log","staff","get","results","data","getBookedLoanDetails","c","handleStartDateChange","e","currentTarget","value","handleEndDateChange","openCustomerListAsReport","url","windowFeatures","window","open","formatter","Intl","NumberFormat","style","currency","map","index","id","tDate","Customer","loanId","format","principal","interestRate","processingFee"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Modal } from 'react-bootstrap'\nimport { Link, useNavigate, Navigate, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport Joi from 'joi-browser'\nimport CurrencyFormat from 'react-currency-format'\nimport Swal from 'sweetalert2'\nimport auth from '../../components/services/authService'\nimport { apiUrl } from '../../config.json'\nimport { reportUrl } from '../../config.json'\nimport BookProduct from './bookProduct'\nimport LoanPrincipal from './loanPrincipalEntry'\nimport Guarantors from './guarantors'\nimport GuarantorTwo from './guarantorTwo'\nimport BusinessDetails from './businessDetails'\nimport Directions from './directions'\nimport AdaboSelect from 'react-select'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nimport { now } from 'moment'\n\nconst ViewOfficerLoansDisbursed = () => {\n  const [loanDisbursed, setLoansDisbursed] = useState([])\n  const [officer, setOfficer] = useState(auth.getCurrentUser)\n  const [startDate, setStartDate] = useState(\n    new Date().toISOString().slice(0, 10),\n  )\n  const [endDate, setEndDate] = useState(new Date().toISOString().slice(0, 10))\n\n  function formatDate(date) {\n    let newDate = new Date(date)\n    var year = newDate.getFullYear().toString()\n    var month = (newDate.getMonth() + 101).toString().substring(1)\n    var day = (newDate.getDate() + 100).toString().substring(1)\n    return year + '-' + month + '-' + day\n  }\n\n  useEffect(() => {\n    async function viewLoanBookings() {\n      console.log(officer.staff)\n      const results = await axios.get(\n        apiUrl +\n          '/loanreports/officerloans/' +\n          startDate +\n          '/' +\n          endDate +\n          '/' +\n          officer.staff,\n      )\n      //console.log('Officer: ' + officer.id)\n      setLoansDisbursed(results.data)\n      // setOfficer(auth.getCurrentUser)\n    }\n    viewLoanBookings()\n  }, [startDate, endDate])\n\n  const getBookedLoanDetails = async (c) => {\n    const results = await axios.get(\n      apiUrl + '/loanreports/portfolio' + startDate + '/' + endDate,\n    )\n    console.log(results.data)\n    setLoansDisbursed(results.data)\n  }\n  const handleStartDateChange = (e) => {\n    setStartDate(e.currentTarget.value)\n  }\n  const handleEndDateChange = (e) => {\n    setEndDate(e.currentTarget.value)\n  }\n\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=320,height=320'\n    window.open(url, 'Loan Details', 'popup', windowFeatures)\n  }\n\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n  return (\n    <div>\n      <CRow>\n        <CCol lg={12}>\n          <CCard>\n            <CCardHeader className=\"text-right\">\n              <div className=\"m-2\">\n                <label className=\"m-2\">Start Date</label>\n                <CInput\n                  type=\"date\"\n                  className=\"col-sm-3 float-right\"\n                  onChange={handleStartDateChange}\n                />\n              </div>\n              <div className=\"m-2\">\n                <label className=\"m-2\">End Date</label>\n                <CInput\n                  type=\"date\"\n                  className=\"col-sm-3 float-right ms-3\"\n                  onChange={handleEndDateChange}\n                />\n              </div>\n              <CButton\n                className=\"float-right m-3 col-sm-3 btn-sm\"\n                color=\"success\"\n                onClick={() =>\n                  openCustomerListAsReport(\n                    reportUrl +\n                      '/officerLoansDisbursed.aspx?' +\n                      startDate +\n                      '?' +\n                      endDate +\n                      '?' +\n                      officer.staff,\n                  )\n                }\n              >\n                View As Report\n              </CButton>\n            </CCardHeader>\n            <h4 className=\"text-center mt-3\">Disbursed Loans Per Officer</h4>\n            <CCardBody>\n              <Table className=\"table-sm\">\n                <caption>Disbursed Loans By Officer</caption>\n                <thead>\n                  <tr className=\"fs-sm\">\n                    <th></th>\n                    <th>Date</th>\n                    <th>Customer</th>\n                    <th>LoanId</th>\n                    <th>Principal</th>\n                    <th>Interest</th>\n                    <th>Proc.Fee</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {loanDisbursed.map((c, index) => (\n                    <tr key={c.id}>\n                      <td>{index + 1}</td>\n                      <td>{c.tDate}</td>\n                      <td>{c.Customer}</td>\n                      <td>{c.loanId}</td>\n                      <td>{formatter.format(c.principal)}</td>\n                      <td>{formatter.format(c.interestRate)}</td>\n                      <td>{formatter.format(c.processingFee)}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </Table>\n            </CCardBody>\n          </CCard>\n        </CCol>\n      </CRow>\n    </div>\n  )\n}\n\nexport default ViewOfficerLoansDisbursed\n"]},"metadata":{},"sourceType":"module"}
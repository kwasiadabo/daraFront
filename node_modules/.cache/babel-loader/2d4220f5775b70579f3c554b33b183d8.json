{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef,useContext}from'react';import{Link,useHistory,Navigate,useParams}from'react-router-dom';import{Buffer}from'buffer';import axios from'axios';import moment from'moment';import Swal from'sweetalert2';//import '../../table.css'\nimport baseUrl from'../../config.json';import auth from'../../components/services/authService';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Label,Badge}from'reactstrap';var CustomerView=function CustomerView(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),customerDetails=_useState2[0],setCustomerDetails=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),buffer=_useState4[0],setBuffer=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),render=_useState6[0],setRender=_useState6[1];var customer=useParams();var user=auth.getCurrentUser();useEffect(function(){function getCustomer(){return _getCustomer.apply(this,arguments);}function _getCustomer(){_getCustomer=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(baseUrl.apiUrl+'/customer/'+customer.customer);case 2:results=_context.sent;setCustomerDetails(results.data);setBuffer(results.data.img.data);// console.log(results.data);\ncase 5:case\"end\":return _context.stop();}}},_callee);}));return _getCustomer.apply(this,arguments);}getCustomer();},[render]);var handleApprove=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.prev=1;_context2.next=4;return axios.put(baseUrl.apiUrl+'/customer/approve/'+customerDetails._id,{isAuthorised:'true',dateAuthorised:new Date(),authorisedBy:user._id,status:'Authorised'});case 4:results=_context2.sent;if(!(results.status!==200)){_context2.next=9;break;}return _context2.abrupt(\"return\",Swal.fire('Failed','Customer Details  Authorisation failed !','error'));case 9:Swal.fire('Success','Customer Details  Authorised Successfully','success');setRender(!render);case 11:_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",Swal.fire('Error',_context2.t0,'error'));case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[1,13]]);}));return function handleApprove(_x){return _ref.apply(this,arguments);};}();var navigate=useHistory();var EditCustomer=function EditCustomer(s){navigate('/customer/edit/'+customerDetails._id);};//<img src={`data:image/jpeg;base64,${customerDetails.img}`} />;\nvar bb=Buffer.from(buffer).toString('base64');return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row \"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10 mt-3 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"p\",{className:\"centertext m-3\"},\"Dara Capital Customer Registration Details\"),/*#__PURE__*/React.createElement(\"h1\",{className:\"centertext m-3\"},\"Customer Details View\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-11\"},/*#__PURE__*/React.createElement(\"legend\",{className:\"legend\"},\"*Customer Details*\"),/*#__PURE__*/React.createElement(\"form\",{className:\"row g-3 shadow\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"img\",{src:\"data:image/jpeg;base64,\".concat(bb),width:\"120px\",className:\"ms-3\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"form-label label custlabel\"},\"FullName\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.fullName),/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label custlabel\"},\"Gender\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.gender)),/*#__PURE__*/React.createElement(\"div\",{class:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputPassword4\",className:\"form-label label custlabel\"},\"Date of Birth\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},moment(customerDetails.dob).format('DD-MMM-YYYY')),/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"ID Type\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.idType)),/*#__PURE__*/React.createElement(\"div\",{class:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputAddress\",className:\"form-label label custlabel\"},\"ID Number\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.idNumber),/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",clasName:\"form-label label custlabel\"},\"TIN\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.tin)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Occupation\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.occupation)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Res. Address\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.residentialAddress)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Ghana Post GPS\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.ghanaPostGPS)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Phone Number\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.phone)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Nationality\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.nationality)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Place of Birth\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.placeOfBirth)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Residence\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.residence)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Marital Status\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.maritalStatus)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Name of Spouse\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.nameOfSpouse)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Phone of Spouse\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.phoneOfSpouse)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Occupation of Spouse\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.occupationOfSpouse)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Religion\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.religion)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Place of Worship\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.placeOfWorship)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Name of Pastor /Imam/Priest\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.leaderOfPlaceOfWorship)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",className:\"form-label label custlabel\"},\"Contact of Pastor/Imam/Priest\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.contactOfPlaceOfWorship)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",class:\"form-label label custlabel\"},\"Date Entry Made\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},moment(customerDetails.dateCreated).format('DD-MMM-YYYY'))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"inputEmail4\",class:\"form-label label custlabel\"},\"Authorisation Status\"),/*#__PURE__*/React.createElement(\"label\",{className:\"form-control\"},customerDetails.status)),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"button col-md-2 m-5\",onClick:function onClick(){return window.print();}},\"Print\"),/*#__PURE__*/React.createElement(\"button\",{className:\"button col-md-2 m-5\",onClick:EditCustomer},\"Edit\"),user.userRole==='Admin'&&/*#__PURE__*/React.createElement(\"button\",{className:\"button col-md-2 m-5\",onClick:handleApprove},\"Approve\"))))))));//return <>{customerDetails.fullName}</>;\n};export default CustomerView;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/customerView.jsx"],"names":["React","useState","useEffect","useRef","useContext","Link","useHistory","Navigate","useParams","Buffer","axios","moment","Swal","baseUrl","auth","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CustomerView","props","customerDetails","setCustomerDetails","buffer","setBuffer","render","setRender","customer","user","getCurrentUser","getCustomer","get","apiUrl","results","data","img","handleApprove","e","preventDefault","put","_id","isAuthorised","dateAuthorised","Date","authorisedBy","status","fire","navigate","EditCustomer","s","bb","from","toString","fullName","gender","dob","format","idType","idNumber","tin","occupation","residentialAddress","ghanaPostGPS","phone","nationality","placeOfBirth","residence","maritalStatus","nameOfSpouse","phoneOfSpouse","occupationOfSpouse","religion","placeOfWorship","leaderOfPlaceOfWorship","contactOfPlaceOfWorship","dateCreated","window","print","userRole"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react'\nimport { Link, useHistory, Navigate, useParams } from 'react-router-dom'\nimport { Buffer } from 'buffer'\nimport axios from 'axios'\nimport moment from 'moment'\nimport Swal from 'sweetalert2'\n\n//import '../../table.css'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n} from 'reactstrap'\n\nconst CustomerView = (props) => {\n  const [customerDetails, setCustomerDetails] = useState('')\n  const [buffer, setBuffer] = useState('')\n  const [render, setRender] = useState(false)\n  const customer = useParams()\n\n  const user = auth.getCurrentUser()\n\n  useEffect(() => {\n    async function getCustomer() {\n      const results = await axios.get(\n        baseUrl.apiUrl + '/customer/' + customer.customer,\n      )\n\n      setCustomerDetails(results.data)\n      setBuffer(results.data.img.data)\n      // console.log(results.data);\n    }\n    getCustomer()\n  }, [render])\n\n  const handleApprove = async (e) => {\n    e.preventDefault()\n    try {\n      const results = await axios.put(\n        baseUrl.apiUrl + '/customer/approve/' + customerDetails._id,\n        {\n          isAuthorised: 'true',\n          dateAuthorised: new Date(),\n          authorisedBy: user._id,\n          status: 'Authorised',\n        },\n      )\n      if (results.status !== 200) {\n        return Swal.fire(\n          'Failed',\n          'Customer Details  Authorisation failed !',\n          'error',\n        )\n      } else {\n        Swal.fire(\n          'Success',\n          'Customer Details  Authorised Successfully',\n          'success',\n        )\n        setRender(!render)\n      }\n    } catch (err) {\n      return Swal.fire('Error', err, 'error')\n    }\n  }\n  const navigate = useHistory()\n\n  const EditCustomer = (s) => {\n    navigate('/customer/edit/' + customerDetails._id)\n  }\n\n  //<img src={`data:image/jpeg;base64,${customerDetails.img}`} />;\n  const bb = Buffer.from(buffer).toString('base64')\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row \">\n        <div className=\"col-10 mt-3 \">\n          <div className=\"row justify-content-center\">\n            <p className=\"centertext m-3\">\n              Dara Capital Customer Registration Details\n            </p>\n            <h1 className=\"centertext m-3\">Customer Details View</h1>\n\n            <div className=\"col-md-11\">\n              <legend className=\"legend\">*Customer Details*</legend>\n              <form className=\"row g-3 shadow\">\n                <div className=\"col-md-2\">\n                  <img\n                    src={`data:image/jpeg;base64,${bb}`}\n                    width=\"120px\"\n                    className=\"ms-3\"\n                  />\n                </div>\n                <div className=\"col-md-3\">\n                  <label className=\"form-label label custlabel\">FullName</label>\n                  <label className=\"form-control\">\n                    {customerDetails.fullName}\n                  </label>\n\n                  <label for=\"inputEmail4\" className=\"form-label custlabel\">\n                    Gender\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.gender}\n                  </label>\n                </div>\n                <div class=\"col-md-3\">\n                  <label\n                    for=\"inputPassword4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Date of Birth\n                  </label>\n                  <label className=\"form-control\">\n                    {moment(customerDetails.dob).format('DD-MMM-YYYY')}\n                  </label>\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    ID Type\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.idType}\n                  </label>\n                </div>\n                <div class=\"col-md-3\">\n                  <label\n                    for=\"inputAddress\"\n                    className=\"form-label label custlabel\"\n                  >\n                    ID Number\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.idNumber}\n                  </label>\n                  <label\n                    for=\"inputEmail4\"\n                    clasName=\"form-label label custlabel\"\n                  >\n                    TIN\n                  </label>\n                  <label className=\"form-control\">{customerDetails.tin}</label>\n                </div>\n\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Occupation\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.occupation}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Res. Address\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.residentialAddress}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Ghana Post GPS\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.ghanaPostGPS}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Phone Number\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.phone}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Nationality\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.nationality}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Place of Birth\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.placeOfBirth}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Residence\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.residence}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Marital Status\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.maritalStatus}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Name of Spouse\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.nameOfSpouse}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Phone of Spouse\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.phoneOfSpouse}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Occupation of Spouse\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.occupationOfSpouse}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Religion\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.religion}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Place of Worship\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.placeOfWorship}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Name of Pastor /Imam/Priest\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.leaderOfPlaceOfWorship}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label\n                    for=\"inputEmail4\"\n                    className=\"form-label label custlabel\"\n                  >\n                    Contact of Pastor/Imam/Priest\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.contactOfPlaceOfWorship}\n                  </label>\n                </div>\n\n                <div className=\"col-md-3\">\n                  <label for=\"inputEmail4\" class=\"form-label label custlabel\">\n                    Date Entry Made\n                  </label>\n                  <label className=\"form-control\">\n                    {moment(customerDetails.dateCreated).format('DD-MMM-YYYY')}\n                  </label>\n                </div>\n                <div className=\"col-md-3\">\n                  <label for=\"inputEmail4\" class=\"form-label label custlabel\">\n                    Authorisation Status\n                  </label>\n                  <label className=\"form-control\">\n                    {customerDetails.status}\n                  </label>\n                </div>\n                <div className=\"row justify-content-center\">\n                  <button\n                    type=\"submit\"\n                    className=\"button col-md-2 m-5\"\n                    onClick={() => window.print()}\n                  >\n                    Print\n                  </button>\n                  <button\n                    className=\"button col-md-2 m-5\"\n                    onClick={EditCustomer}\n                  >\n                    Edit\n                  </button>\n                  {user.userRole === 'Admin' && (\n                    <button\n                      className=\"button col-md-2 m-5\"\n                      onClick={handleApprove}\n                    >\n                      Approve\n                    </button>\n                  )}\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n\n  //return <>{customerDetails.fullName}</>;\n}\n\nexport default CustomerView\n"]},"metadata":{},"sourceType":"module"}
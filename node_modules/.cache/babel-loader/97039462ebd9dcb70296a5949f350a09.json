{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useNavigate,Navigate,useParams}from'react-router-dom';import axios from'axios';import moment from'moment';import baseUrl from'../../config.json';import auth from'../../components/services/authService';import Joi from'joi-browser';import{Row,Col,Table,Progress,Button,UncontrolledButtonDropdown,DropdownMenu,DropdownToggle,DropdownItem,Input,Badge}from'reactstrap';import{CBadge,CCard,CCardBody//CCardHeader,\n,CCol,CDataTable,CRow,CButton,CModal,CModalFooter,CModalHeader,CModalBody,CCardHeader,CInputGroupAppend,CInputGroupPrepend,CDropdownItem,CForm//CCardFooter,\n,CDropdownToggle//CInputRadio,\n,CDropdown,CModalTitle//CFormText,\n//CTextarea,\n,CFormGroup,CLabel// CSwitch,\n,CInput//CInputFile,\n,CSelect,CDropdownMenu//CCardFooter,\n,CInputGroup//CForm,\n}from'@coreui/react';import Swal from'sweetalert2';var ProductSetup=function ProductSetup(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allProducts=_useState2[0],setAllProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),disabled=_useState4[0],setDisabled=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),render=_useState6[0],setRender=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),editMode=_useState8[0],setEditMode=_useState8[1];var _useState9=useState({product:'',processingFee:'',frequency:'',interestRate:'',registrationFee:'',duration:'',shortName:'',//fixation: '',\n// allowedAmount: 0,\ncashCollateral:0}),_useState10=_slicedToArray(_useState9,2),products=_useState10[0],setProducts=_useState10[1];var schemaMap={product:Joi.string().required().label('Product Field'),processingFee:Joi.number().required().label('Processing Fee Field'),frequency:Joi.string().required().label('Frequency Field'),interestRate:Joi.number().required().label('Interest Rate Field'),registrationFee:Joi.number().required().label('Registration Fee Field'),duration:Joi.number().required().label('duration Field'),//fixation: Joi.string().allow('').label('Fixation Field'),\n//allowedAmount: Joi.number().allow('').label('Allowed Amount'),\ncashCollateral:Joi.number().required().label('Cash Collateral'),id:Joi.string().allow('').label('ID'),shortName:Joi.string().allow('')};var schema=Joi.object(schemaMap);var validateForm=function validateForm(){var result=Joi.validate(products,schema);if(result.error){return result.error.details[0].message;}else{return null;}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var validate,results;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(products);e.preventDefault();setEditMode(false);_context.prev=3;validate=validateForm();if(!(validate!==null)){_context.next=7;break;}return _context.abrupt(\"return\",Swal.fire('error',validate,'error'));case 7:_context.next=9;return axios.post(baseUrl.apiUrl+'/setup/product',products);case 9:results=_context.sent;if(!(results.status!==200)){_context.next=14;break;}return _context.abrupt(\"return\",Swal.fire('OOPS !','Submission Failed ! Check Entries and try again !','error'));case 14:Swal.fire('Success','Product Saved Successfully','success');setProducts({product:'',processingFee:'',frequency:'',interestRate:'',registrationFee:'',duration:'',fixation:'',allowedAmount:0,cashCollateral:0,shortName:''});setRender(!render);case 17:_context.next=22;break;case 19:_context.prev=19;_context.t0=_context[\"catch\"](3);Swal.fire('OOPS ! '+_context.t0.message,'error');case 22:case\"end\":return _context.stop();}}},_callee,null,[[3,19]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();useEffect(function(){function getProducts(){return _getProducts.apply(this,arguments);}function _getProducts(){_getProducts=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var results;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(baseUrl.apiUrl+'/setup/product');case 2:results=_context2.sent;setAllProducts(results.data);setEditMode(false);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _getProducts.apply(this,arguments);}getProducts();},[render]);var handleOnEdit=function handleOnEdit(p){setEditMode(true);setProducts({product:p.product,processingFee:p.processingFee,frequency:p.frequency,interestRate:p.interestRate,registrationFee:p.registrationFee,duration:p.duration,cashCollateral:p.cashCollateral,shortName:p.shortName,id:p.id});//setDisabled(!disabled);\n};var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var results;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();if(!(products.product!=='')){_context3.next=20;break;}_context3.prev=2;_context3.next=5;return axios.put(baseUrl.apiUrl+'/setup/product',products);case 5:results=_context3.sent;if(!(results.status!==200)){_context3.next=10;break;}return _context3.abrupt(\"return\",Swal.fire('OOPS !','Submission Failed ! Check Entries and try again !','error'));case 10:Swal.fire('Success','Product Updated Successfully','success');setProducts({product:'',processingFee:'',frequency:'',interestRate:'',registrationFee:'',duration:'',fixation:'',allowedAmount:0,cashCollateral:0,shortName:'',id:''});setRender(!render);case 13:_context3.next=18;break;case 15:_context3.prev=15;_context3.t0=_context3[\"catch\"](2);Swal.fire('OOPS ! '+_context3.t0.message,'error');case 18:_context3.next=21;break;case 20:return _context3.abrupt(\"return\",Swal.fire('OOPS','Enter all Details !','error'));case 21:case\"end\":return _context3.stop();}}},_callee3,null,[[2,15]]);}));return function handleUpdate(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"centertext mt-5\"},\"Setup Products\"),/*#__PURE__*/React.createElement(\"p\",{className:\"staffp\"},\"Setup all products you deal in. Your products brings in the income, capture all details about them.\"),/*#__PURE__*/React.createElement(CForm,{className:\"row g-3 m-5\"},/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"product\",className:\"col-sm-3\"},\"Product Name\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"col-sm-8\",id:\"product\",value:products.product,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{product:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"shortName\",className:\"col-sm-3\"},\"Short Name\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"col-sm-4\",id:\"shortName\",value:products.shortName,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{shortName:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"processingFee\",className:\"col-sm-3\"},\"Proc. Fee (%)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"col-sm-8\",id:\"processingFee\",value:products.processingFee,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{processingFee:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"frequency\",className:\"col-sm-3\"},\"Repayment Frequency\"),/*#__PURE__*/React.createElement(CSelect,{id:\"frequency\",className:\"form-select col-sm-8\",value:products.frequency,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{frequency:e.currentTarget.value}));}},/*#__PURE__*/React.createElement(\"option\",{selected:true},\"Choose...\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Daily\"},\"Daily\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Weekly\"},\"Weekly\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Bi Weekly\"},\"Bi Weekly\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Monthly\"},\" Monthly\"))),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"minInterest\",className:\"col-sm-3\"},\"Interest Rate (%)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"form-control-md col-sm-8\",id:\"minInterest\",value:products.interestRate,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{interestRate:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"registrationFee\",className:\"col-sm-3\"},\"Reg. Fee (GHC)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"form-control-md col-sm-8\",id:\"registrationFee\",value:products.registrationFee,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{registrationFee:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{for:\"duration\",className:\"col-sm-3\"},\"Duration (Days)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"text\",className:\"form-control-md col-sm-8\",id:\"duration\",value:products.duration,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{duration:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mt-3\"},/*#__PURE__*/React.createElement(CLabel,{htmlFor:\"cashCollateral\",className:\"col-sm-3\"},\"Cash Collateral (%)\"),/*#__PURE__*/React.createElement(CInput,{autoComplete:\"off\",type:\"number\",pattern:\"([0-9]{1,3}).([0-9]{1,3})\",className:\"form-control-md col-sm-8\",id:\"cashCollateral\",value:products.cashCollateral,onChange:function onChange(e){return setProducts(_objectSpread(_objectSpread({},products),{},{cashCollateral:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},!editMode?/*#__PURE__*/React.createElement(CButton,{type:\"submit\",className:\"btn btn-danger mt-5\",onClick:handleSubmit},\"Save Product\"):null,editMode?/*#__PURE__*/React.createElement(CButton,{type:\"submit\",class:\"btn btn-success mt-5 ms-5\",onClick:handleUpdate},\"Edit Product\"):null)),/*#__PURE__*/React.createElement(Table,{className:\"sm table-sm\"},/*#__PURE__*/React.createElement(\"caption\",null,\"Click on any product details to update\"),/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",{className:\"fs-sm\"},/*#__PURE__*/React.createElement(\"th\",null),/*#__PURE__*/React.createElement(\"th\",null,\"Product Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Short Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Proc. Fee(%)\"),/*#__PURE__*/React.createElement(\"th\",null,\"Frequency\"),/*#__PURE__*/React.createElement(\"th\",null,\"Interest Rate (%)\"),/*#__PURE__*/React.createElement(\"th\",null,\"Reg. Fee\"),/*#__PURE__*/React.createElement(\"th\",null,\"Duration\"),/*#__PURE__*/React.createElement(\"th\",null,\"Cash Collateral (%)\"))),/*#__PURE__*/React.createElement(\"tbody\",null,allProducts.map(function(c,index){return/*#__PURE__*/React.createElement(\"tr\",{key:c._id,onClick:function onClick(){return handleOnEdit(c);},Style:\"cursor: pointer;\"},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",null,c.product),/*#__PURE__*/React.createElement(\"td\",null,c.shortName),/*#__PURE__*/React.createElement(\"td\",null,c.processingFee),/*#__PURE__*/React.createElement(\"td\",null,c.frequency),/*#__PURE__*/React.createElement(\"td\",null,c.interestRate),/*#__PURE__*/React.createElement(\"td\",null,c.registrationFee),/*#__PURE__*/React.createElement(\"td\",null,c.duration),/*#__PURE__*/React.createElement(\"td\",null,c.cashCollateral));}))));};export default ProductSetup;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/products.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","useParams","axios","moment","baseUrl","auth","Joi","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","Swal","ProductSetup","allProducts","setAllProducts","disabled","setDisabled","render","setRender","editMode","setEditMode","product","processingFee","frequency","interestRate","registrationFee","duration","shortName","cashCollateral","products","setProducts","schemaMap","string","required","label","number","id","allow","schema","object","validateForm","result","validate","error","details","message","handleSubmit","e","console","log","preventDefault","fire","post","apiUrl","results","status","fixation","allowedAmount","getProducts","get","data","handleOnEdit","p","handleUpdate","put","currentTarget","value","map","c","index","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate, useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport baseUrl from '../../config.json'\nimport auth from '../../components/services/authService'\nimport Joi from 'joi-browser'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Badge,\n} from 'reactstrap'\n\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\n\nimport Swal from 'sweetalert2'\n\nconst ProductSetup = () => {\n  const [allProducts, setAllProducts] = useState([])\n  const [disabled, setDisabled] = useState(false)\n  const [render, setRender] = useState(false)\n  const [editMode, setEditMode] = useState(false)\n\n  const [products, setProducts] = useState({\n    product: '',\n    processingFee: '',\n    frequency: '',\n    interestRate: '',\n    registrationFee: '',\n    duration: '',\n    shortName: '',\n    //fixation: '',\n    // allowedAmount: 0,\n    cashCollateral: 0,\n  })\n  const schemaMap = {\n    product: Joi.string().required().label('Product Field'),\n    processingFee: Joi.number().required().label('Processing Fee Field'),\n\n    frequency: Joi.string().required().label('Frequency Field'),\n    interestRate: Joi.number().required().label('Interest Rate Field'),\n\n    registrationFee: Joi.number().required().label('Registration Fee Field'),\n    duration: Joi.number().required().label('duration Field'),\n    //fixation: Joi.string().allow('').label('Fixation Field'),\n    //allowedAmount: Joi.number().allow('').label('Allowed Amount'),\n    cashCollateral: Joi.number().required().label('Cash Collateral'),\n    id: Joi.string().allow('').label('ID'),\n    shortName: Joi.string().allow(''),\n  }\n\n  const schema = Joi.object(schemaMap)\n  const validateForm = () => {\n    const result = Joi.validate(products, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n  }\n\n  const handleSubmit = async (e) => {\n    console.log(products)\n    e.preventDefault()\n    setEditMode(false)\n    try {\n      const validate = validateForm()\n      if (validate !== null) {\n        return Swal.fire('error', validate, 'error')\n      }\n      const results = await axios.post(\n        baseUrl.apiUrl + '/setup/product',\n        products,\n      )\n      if (results.status !== 200) {\n        return Swal.fire(\n          'OOPS !',\n          'Submission Failed ! Check Entries and try again !',\n          'error',\n        )\n      } else {\n        Swal.fire('Success', 'Product Saved Successfully', 'success')\n        setProducts({\n          product: '',\n          processingFee: '',\n          frequency: '',\n          interestRate: '',\n          registrationFee: '',\n          duration: '',\n          fixation: '',\n          allowedAmount: 0,\n          cashCollateral: 0,\n          shortName: '',\n        })\n        setRender(!render)\n      }\n    } catch (err) {\n      Swal.fire('OOPS ! ' + err.message, 'error')\n    }\n  }\n  useEffect(() => {\n    async function getProducts() {\n      const results = await axios.get(baseUrl.apiUrl + '/setup/product')\n      setAllProducts(results.data)\n      setEditMode(false)\n    }\n    getProducts()\n  }, [render])\n\n  const handleOnEdit = (p) => {\n    setEditMode(true)\n    setProducts({\n      product: p.product,\n      processingFee: p.processingFee,\n      frequency: p.frequency,\n      interestRate: p.interestRate,\n      registrationFee: p.registrationFee,\n      duration: p.duration,\n      cashCollateral: p.cashCollateral,\n      shortName: p.shortName,\n      id: p.id,\n    })\n    //setDisabled(!disabled);\n  }\n  const handleUpdate = async (e) => {\n    e.preventDefault()\n\n    if (products.product !== '') {\n      try {\n        const results = await axios.put(\n          baseUrl.apiUrl + '/setup/product',\n          products,\n        )\n        if (results.status !== 200) {\n          return Swal.fire(\n            'OOPS !',\n            'Submission Failed ! Check Entries and try again !',\n            'error',\n          )\n        } else {\n          Swal.fire('Success', 'Product Updated Successfully', 'success')\n          setProducts({\n            product: '',\n            processingFee: '',\n            frequency: '',\n            interestRate: '',\n            registrationFee: '',\n            duration: '',\n            fixation: '',\n            allowedAmount: 0,\n            cashCollateral: 0,\n            shortName: '',\n            id: '',\n          })\n          setRender(!render)\n        }\n      } catch (err) {\n        Swal.fire('OOPS ! ' + err.message, 'error')\n      }\n    } else {\n      return Swal.fire('OOPS', 'Enter all Details !', 'error')\n    }\n  }\n\n  return (\n    <div className=\"container-fluid\">\n      <h1 className=\"centertext mt-5\">Setup Products</h1>\n      <p className=\"staffp\">\n        Setup all products you deal in. Your products brings in the income,\n        capture all details about them.\n      </p>\n      <CForm className=\"row g-3 m-5\">\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"product\" className=\"col-sm-3\">\n            Product Name\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"col-sm-8\"\n            id=\"product\"\n            value={products.product}\n            onChange={(e) =>\n              setProducts({ ...products, product: e.currentTarget.value })\n            }\n          />\n        </CInputGroup>\n\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"shortName\" className=\"col-sm-3\">\n            Short Name\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"col-sm-4\"\n            id=\"shortName\"\n            value={products.shortName}\n            onChange={(e) =>\n              setProducts({ ...products, shortName: e.currentTarget.value })\n            }\n          />\n        </CInputGroup>\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"processingFee\" className=\"col-sm-3\">\n            Proc. Fee (%)\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"col-sm-8\"\n            id=\"processingFee\"\n            value={products.processingFee}\n            onChange={(e) =>\n              setProducts({\n                ...products,\n                processingFee: e.currentTarget.value,\n              })\n            }\n          />\n        </CInputGroup>\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"frequency\" className=\"col-sm-3\">\n            Repayment Frequency\n          </CLabel>\n          <CSelect\n            id=\"frequency\"\n            className=\"form-select col-sm-8\"\n            value={products.frequency}\n            onChange={(e) =>\n              setProducts({ ...products, frequency: e.currentTarget.value })\n            }\n          >\n            <option selected>Choose...</option>\n            <option value=\"Daily\">Daily</option>\n            <option value=\"Weekly\">Weekly</option>\n            <option value=\"Bi Weekly\">Bi Weekly</option>\n            <option value=\"Monthly\"> Monthly</option>\n          </CSelect>\n        </CInputGroup>\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"minInterest\" className=\"col-sm-3\">\n            Interest Rate (%)\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"form-control-md col-sm-8\"\n            id=\"minInterest\"\n            value={products.interestRate}\n            onChange={(e) =>\n              setProducts({\n                ...products,\n                interestRate: e.currentTarget.value,\n              })\n            }\n          />\n        </CInputGroup>\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"registrationFee\" className=\"col-sm-3\">\n            Reg. Fee (GHC)\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"form-control-md col-sm-8\"\n            id=\"registrationFee\"\n            value={products.registrationFee}\n            onChange={(e) =>\n              setProducts({\n                ...products,\n                registrationFee: e.currentTarget.value,\n              })\n            }\n          />\n        </CInputGroup>\n        <CInputGroup className=\"mt-3\">\n          <CLabel for=\"duration\" className=\"col-sm-3\">\n            Duration (Days)\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"text\"\n            className=\"form-control-md col-sm-8\"\n            id=\"duration\"\n            value={products.duration}\n            onChange={(e) =>\n              setProducts({ ...products, duration: e.currentTarget.value })\n            }\n          />\n        </CInputGroup>\n\n        <CInputGroup className=\"mt-3\">\n          <CLabel htmlFor=\"cashCollateral\" className=\"col-sm-3\">\n            Cash Collateral (%)\n          </CLabel>\n          <CInput\n            autoComplete=\"off\"\n            type=\"number\"\n            pattern=\"([0-9]{1,3}).([0-9]{1,3})\"\n            className=\"form-control-md col-sm-8\"\n            id=\"cashCollateral\"\n            value={products.cashCollateral}\n            onChange={(e) =>\n              setProducts({\n                ...products,\n                cashCollateral: e.currentTarget.value,\n              })\n            }\n          />\n        </CInputGroup>\n\n        <div className=\"row\">\n          {!editMode ? (\n            <CButton\n              type=\"submit\"\n              className=\"btn btn-danger mt-5\"\n              onClick={handleSubmit}\n            >\n              Save Product\n            </CButton>\n          ) : null}\n          {editMode ? (\n            <CButton\n              type=\"submit\"\n              class=\"btn btn-success mt-5 ms-5\"\n              onClick={handleUpdate}\n            >\n              Edit Product\n            </CButton>\n          ) : null}\n        </div>\n      </CForm>\n\n      <Table className=\"sm table-sm\">\n        <caption>Click on any product details to update</caption>\n        <thead>\n          <tr className=\"fs-sm\">\n            <th></th>\n            <th>Product Name</th>\n            <th>Short Name</th>\n            <th>Proc. Fee(%)</th>\n            <th>Frequency</th>\n            <th>Interest Rate (%)</th>\n            <th>Reg. Fee</th>\n            <th>Duration</th>\n            <th>Cash Collateral (%)</th>\n          </tr>\n        </thead>\n        <tbody>\n          {allProducts.map((c, index) => (\n            <tr\n              key={c._id}\n              onClick={() => handleOnEdit(c)}\n              Style=\"cursor: pointer;\"\n            >\n              <td>{index + 1}</td>\n              <td>{c.product}</td>\n              <td>{c.shortName}</td>\n              <td>{c.processingFee}</td>\n              <td>{c.frequency}</td>\n              <td>{c.interestRate}</td>\n              <td>{c.registrationFee}</td>\n              <td>{c.duration}</td>\n              <td>{c.cashCollateral}</td>\n            </tr>\n          ))}\n        </tbody>\n      </Table>\n    </div>\n  )\n}\n\nexport default ProductSetup\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _regeneratorRuntime from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanRepayment.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate, Navigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport moment from 'moment';\nimport { apiUrl } from '../../config.json';\nimport { reportUrl } from '../../config.json';\nimport { Modal } from 'react-bootstrap';\nimport auth from '../../components/services/authService';\nimport Swal from 'sweetalert2';\nimport Card from 'react-bootstrap/Card';\nimport { Row, Col, Table, Progress, Button, UncontrolledButtonDropdown, DropdownMenu, DropdownToggle, DropdownItem, Input, Label, Badge //Modal,\n} from 'reactstrap';\nimport { CBadge, CCard, CCardBody //CCardHeader,\n, CCol, CDataTable, CRow, CButton, CModal, CModalFooter, CModalHeader, CModalBody, CCardHeader, CInputGroupAppend, CInputGroupPrepend, CDropdownItem, CForm //CCardFooter,\n, CDropdownToggle //CInputRadio,\n, CDropdown, CDropdownDivider, CModalTitle //CFormText,\n//CTextarea,\n, CFormGroup, CLabel // CSwitch,\n, CInput //CInputFile,\n, CSelect, CDropdownMenu //CCardFooter,\n, CInputGroup //CForm,\n} from '@coreui/react';\n\nvar LoanRepayment = function LoanRepayment() {\n  var _React$createElement;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      loanees = _useState2[0],\n      setLoanees = _useState2[1];\n\n  var _useState3 = useState(auth.getCurrentUser()),\n      _useState4 = _slicedToArray(_useState3, 2),\n      user = _useState4[0],\n      setUser = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      staff = _useState6[0],\n      setStaff = _useState6[1]; //const user = auth.getCurrentUser();\n\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      daysPayments = _useState8[0],\n      setDaysPayments = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      show = _useState10[0],\n      setShow = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      fullName = _useState12[0],\n      setFullName = _useState12[1];\n\n  var _useState13 = useState({\n    amount: 0,\n    overage: 0,\n    shortage: 0\n  }),\n      _useState14 = _slicedToArray(_useState13, 2),\n      bulkCash = _useState14[0],\n      setBulkCash = _useState14[1];\n\n  var _useState15 = useState(new Date()),\n      _useState16 = _slicedToArray(_useState15, 2),\n      todayDate = _useState16[0],\n      setTodayDate = _useState16[1];\n\n  var _useState17 = useState(0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      payments = _useState18[0],\n      setPayments = _useState18[1];\n\n  var formatToday = function formatToday(date) {\n    return date.toISOString().slice(0, 10);\n  };\n\n  var _useState19 = useState(1),\n      _useState20 = _slicedToArray(_useState19, 2),\n      pageSize = _useState20[0],\n      setPageSize = _useState20[1];\n\n  var _useState21 = useState(1),\n      _useState22 = _slicedToArray(_useState21, 2),\n      currentPage = _useState22[0],\n      setCurrentPage = _useState22[1];\n\n  var _useState23 = useState(''),\n      _useState24 = _slicedToArray(_useState23, 2),\n      search = _useState24[0],\n      setSearch = _useState24[1];\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      edit = _useState26[0],\n      setEdit = _useState26[1];\n\n  var _useState27 = useState(false),\n      _useState28 = _slicedToArray(_useState27, 2),\n      render = _useState28[0],\n      setRender = _useState28[1];\n\n  var _useState29 = useState(true),\n      _useState30 = _slicedToArray(_useState29, 2),\n      save = _useState30[0],\n      setSave = _useState30[1];\n\n  var _useState31 = useState([]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      colPayments = _useState32[0],\n      setColPayments = _useState32[1];\n\n  var _useState33 = useState([]),\n      _useState34 = _slicedToArray(_useState33, 2),\n      todaysPayments = _useState34[0],\n      setTodaysPayments = _useState34[1];\n\n  var _useState35 = useState(0),\n      _useState36 = _slicedToArray(_useState35, 2),\n      loanBal = _useState36[0],\n      setLoanBal = _useState36[1];\n\n  var _useState37 = useState({\n    dateOfCollection: new Date().toISOString().slice(0, 10),\n    officer: '',\n    customer: '',\n    amount: '',\n    modeOfPayment: ''\n  }),\n      _useState38 = _slicedToArray(_useState37, 2),\n      loanPayments = _useState38[0],\n      setLoanPayments = _useState38[1];\n\n  var _useState39 = useState(new Date().toISOString().slice(0, 10)),\n      _useState40 = _slicedToArray(_useState39, 2),\n      tdate = _useState40[0],\n      setTdate = _useState40[1];\n\n  useEffect(function () {\n    var getActiveLoans = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.get(apiUrl + '/loan/dailycollections/' + user.staff);\n\n              case 2:\n                results = _context.sent;\n                setLoanees(results.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getActiveLoans() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getActiveLoans();\n  }, [loanees, render]);\n  useEffect(function () {\n    function getBulkCash() {\n      return _getBulkCash.apply(this, arguments);\n    }\n\n    function _getBulkCash() {\n      _getBulkCash = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return axios.get(apiUrl + '/loan/bulkCash/submitted/' + tdate + '/' + user.staff);\n\n              case 3:\n                results = _context2.sent;\n                setBulkCash(_objectSpread(_objectSpread({}, bulkCash), {}, {\n                  amount: results.data[0].TotalSubmitted // overage: results.data[0].overage,\n                  // shortage: results.data[0].shortage,\n\n                }));\n                _context2.next = 9;\n                break;\n\n              case 7:\n                _context2.prev = 7;\n                _context2.t0 = _context2[\"catch\"](0);\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[0, 7]]);\n      }));\n      return _getBulkCash.apply(this, arguments);\n    }\n\n    getBulkCash();\n  }, [tdate, render]);\n  useEffect(function () {\n    function getPayments() {\n      return _getPayments.apply(this, arguments);\n    }\n\n    function _getPayments() {\n      _getPayments = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.get(apiUrl + '/loan/dailycollections/' + tdate + '/' + user.staff);\n\n              case 2:\n                results = _context3.sent;\n                setPayments(results.data[0].TotalDailyCollections); // console.log('Payments: ' + formatToday(todayDate))\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n      return _getPayments.apply(this, arguments);\n    }\n\n    getPayments(); //console.log(tdate)\n  }, [render, tdate]);\n  useEffect(function () {\n    function getDaysPayments() {\n      return _getDaysPayments.apply(this, arguments);\n    }\n\n    function _getDaysPayments() {\n      _getDaysPayments = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var results;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return axios.get(apiUrl + '/loan/dailycollections/dayspayments/' + tdate + '/' + user.staff);\n\n              case 2:\n                results = _context4.sent;\n                setDaysPayments(results.data); // console.log('Payments: ' + formatToday(todayDate))\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n      return _getDaysPayments.apply(this, arguments);\n    }\n\n    getDaysPayments(); //console.log(daysPayments)\n  }, [render, tdate]);\n\n  var handleAmountChange = function handleAmountChange(e) {\n    setLoanPayments(_objectSpread(_objectSpread({}, loanPayments), {}, {\n      amount: e.currentTarget.value,\n      officer: user.staff\n    }));\n  };\n\n  var formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS' // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n\n  });\n\n  var handleCustomerSelect = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(c) {\n      var loanBalance;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return axios.get(apiUrl + '/loan/dailycollections/bal/' + c.id);\n\n            case 2:\n              loanBalance = _context5.sent;\n              setFullName(c.fullName);\n              setLoanBal(loanBalance.data[0].loanBalance);\n              setLoanPayments({\n                customer: c.id,\n                dateOfCollection: tdate,\n                officer: user.staff\n              });\n\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function handleCustomerSelect(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleSearch = function handleSearch(event) {\n    setSearch(event.currentTarget.value);\n  };\n\n  var data = {\n    customer: loanees.filter(function (c) {\n      return c.fullName.toLowerCase().includes(search.toLowerCase());\n    })\n  };\n  var dataTouse = search.length === 0 ? loanees : data.customer;\n\n  var handleClose = function handleClose() {\n    setLoanPayments({\n      customer: '',\n      amount: '',\n      modeOfPayment: '',\n      officer: '',\n      dateOfCollection: ''\n    });\n    setFullName('');\n    setShow(false);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n        while (1) {\n          switch (_context6.prev = _context6.next) {\n            case 0:\n              if (!(bulkCash.amount - payments < loanPayments.amount)) {\n                _context6.next = 2;\n                break;\n              }\n\n              return _context6.abrupt(\"return\", Swal.fire('OOPS', 'Payment Unsuccessful - Insufficient Bulk Amount', 'error'));\n\n            case 2:\n              _context6.prev = 2;\n              _context6.next = 5;\n              return axios.post(apiUrl + '/loan/dailycollections', loanPayments);\n\n            case 5:\n              results = _context6.sent;\n\n              if (!(results.statusText === 'OK')) {\n                _context6.next = 12;\n                break;\n              }\n\n              Swal.fire('Success', 'Payment Made', 'success');\n              setLoanPayments({\n                customer: '',\n                amount: '',\n                modeOfPayment: '',\n                officer: '',\n                dateOfCollection: ''\n              });\n              setRender(!render);\n              _context6.next = 13;\n              break;\n\n            case 12:\n              return _context6.abrupt(\"return\", Swal.fire('OOPS', 'Payment Unsuccessful', 'error'));\n\n            case 13:\n              _context6.next = 18;\n              break;\n\n            case 15:\n              _context6.prev = 15;\n              _context6.t0 = _context6[\"catch\"](2);\n              return _context6.abrupt(\"return\", Swal.fire('OOPS', _context6.t0 + ' [Payment Unsuccessful]', 'error'));\n\n            case 18:\n            case \"end\":\n              return _context6.stop();\n          }\n        }\n      }, _callee6, null, [[2, 15]]);\n    }));\n\n    return function handleSubmit() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var showForEdit = function showForEdit(p) {\n    setLoanPayments({\n      loanId: p.loanId._id,\n      customer: p.customer._id,\n      fullName: p.customer.fullName,\n      entryBy: user._id,\n      dateOfCollection: new Date().toISOString().slice(0, 10),\n      modeOfPayment: p.modeOfPayment,\n      amount: p.amount,\n      officer: p.officer.id,\n      comment: p.comment,\n      id: p.id\n    });\n    setShow(!show);\n    setEdit(true);\n    setSave(false);\n  };\n\n  var handleRemovePayment = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(p) {\n      return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n        while (1) {\n          switch (_context8.prev = _context8.next) {\n            case 0:\n              //console.log(p)\n              Swal.fire({\n                title: 'Do you want to remove this payment?',\n                showDenyButton: true,\n                showCancelButton: true,\n                confirmButtonText: 'Remove',\n                denyButtonText: \"Don't Remove\"\n              }).then( /*#__PURE__*/function () {\n                var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(result) {\n                  var results;\n                  return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n                    while (1) {\n                      switch (_context7.prev = _context7.next) {\n                        case 0:\n                          if (!result.isConfirmed) {\n                            _context7.next = 14;\n                            break;\n                          }\n\n                          _context7.prev = 1;\n                          _context7.next = 4;\n                          return axios.delete(apiUrl + '/loan/dailycollections/' + p.id);\n\n                        case 4:\n                          results = _context7.sent;\n\n                          if (results.status === 200) {\n                            Swal.fire('Success', 'Payment Removed', 'success');\n                          }\n\n                          setRender(!render);\n                          _context7.next = 12;\n                          break;\n\n                        case 9:\n                          _context7.prev = 9;\n                          _context7.t0 = _context7[\"catch\"](1);\n                          Swal.fire('Error', _context7.t0 + ' Payment Removal Failed', 'error');\n\n                        case 12:\n                          _context7.next = 15;\n                          break;\n\n                        case 14:\n                          if (result.isDenied) {\n                            Swal.fire('Payment Removal Failed', '', 'error');\n                          }\n\n                        case 15:\n                        case \"end\":\n                          return _context7.stop();\n                      }\n                    }\n                  }, _callee7, null, [[1, 9]]);\n                }));\n\n                return function (_x3) {\n                  return _ref5.apply(this, arguments);\n                };\n              }());\n              setRender(!render); //console.log(results)\n\n            case 2:\n            case \"end\":\n              return _context8.stop();\n          }\n        }\n      }, _callee8);\n    }));\n\n    return function handleRemovePayment(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var handleUpdate = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9() {\n      var results;\n      return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n        while (1) {\n          switch (_context9.prev = _context9.next) {\n            case 0:\n              console.log(loanPayments);\n              _context9.prev = 1;\n              _context9.next = 4;\n              return axios.put(apiUrl + '/collectionsheet/' + loanPayments.id, loanPayments);\n\n            case 4:\n              results = _context9.sent;\n\n              if (!(results.status === 200)) {\n                _context9.next = 11;\n                break;\n              }\n\n              Swal.fire('Success', 'Payment Updated', 'success');\n              setLoanPayments({\n                customer: '',\n                fullName: '',\n                amount: '',\n                modeOfPayment: '',\n                loanId: '',\n                officer: '',\n                comment: '',\n                entryBy: '',\n                dateOfCollection: ''\n              });\n              setRender(!render);\n              _context9.next = 12;\n              break;\n\n            case 11:\n              return _context9.abrupt(\"return\", Swal.fire('OOPS', 'Payment Update Unsuccessful', 'error'));\n\n            case 12:\n              _context9.next = 17;\n              break;\n\n            case 14:\n              _context9.prev = 14;\n              _context9.t0 = _context9[\"catch\"](1);\n              return _context9.abrupt(\"return\", Swal.fire('OOPS', _context9.t0 + ' [Payment Update Unsuccessful]', 'error'));\n\n            case 17:\n            case \"end\":\n              return _context9.stop();\n          }\n        }\n      }, _callee9, null, [[1, 14]]);\n    }));\n\n    return function handleUpdate() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var handleMakePayment = function handleMakePayment() {\n    if (bulkCash.amount <= 0) return Swal.fire('OOPS', 'You have NOT submitted Bulk Cash for ' + tdate, 'error');\n    setSave(true);\n    setEdit(false);\n    setShow(true);\n  };\n\n  var handleSubmitCollections = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10() {\n      return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n        while (1) {\n          switch (_context10.prev = _context10.next) {\n            case 0:\n              _context10.prev = 0;\n              _context10.next = 3;\n              return axios.post(apiUrl + '/loan/dailycollections/' + user.staff + '/' + tdate);\n\n            case 3:\n              Swal.fire('Submission Done', 'Days Collections Submitted!', 'success');\n              setRender(!render);\n              openCustomerListAsReport(reportUrl + '/dailyEntry.aspx?' + user.staff + '?' + tdate);\n              _context10.next = 11;\n              break;\n\n            case 8:\n              _context10.prev = 8;\n              _context10.t0 = _context10[\"catch\"](0);\n              return _context10.abrupt(\"return\", Swal.fire('OOPS', _context10.t0 + ' [Collections Submission Failed]', 'error'));\n\n            case 11:\n            case \"end\":\n              return _context10.stop();\n          }\n        }\n      }, _callee10, null, [[0, 8]]);\n    }));\n\n    return function handleSubmitCollections() {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var openCustomerListAsReport = function openCustomerListAsReport(url) {\n    var windowFeatures = 'left=100,top=100,width=380,height=320';\n    window.open(url, 'Daily Entry', 'popup', windowFeatures);\n  };\n\n  var handleSelectDate = function handleSelectDate(e) {\n    setTdate(e.currentTarget.value);\n    console.log(bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"centertext mt-\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }\n  }, \"Customer Loan Repayment\"), /*#__PURE__*/React.createElement(CInput, {\n    type: \"date\",\n    name: \"dateToday\",\n    className: \"form-control text-center col-sm-12\",\n    id: \"dateToday\",\n    value: tdate,\n    onChange: handleSelectDate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row text-center col-sm-12 justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    classname: \"m-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '12rem',\n      height: '6rem'\n    },\n    className: \"m-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 17\n    }\n  }, \"Submitted\"), formatter.format(bulkCash.amount)))), /*#__PURE__*/React.createElement(\"div\", {\n    classname: \"m-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '12rem',\n      height: '6rem'\n    },\n    className: \"m-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 17\n    }\n  }, \"Payments\"), formatter.format(payments)))), /*#__PURE__*/React.createElement(\"div\", {\n    classname: \"m-3 justify-content-right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '12rem',\n      height: '6rem'\n    },\n    className: parseFloat(bulkCash.amount - payments) > 0 ? 'positivebalcolor m-3' : 'negativebalcolor m-3',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 17\n    }\n  }, parseFloat(bulkCash.amount - payments) < 0 ? 'Overage' : 'Balance'), formatter.format(parseFloat(bulkCash.amount - payments)))))), /*#__PURE__*/React.createElement(CButton, {\n    className: \"mt-3 mb-2 float-right\",\n    onClick: handleMakePayment,\n    color: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 9\n    }\n  }, \"Make Loan Payments\"), /*#__PURE__*/React.createElement(Table, {\n    className: \"table align-left mb-0 bg-white table-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 414,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 15\n    }\n  }, \"Customer\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 15\n    }\n  }, \"Mode\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 15\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 15\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 11\n    }\n  }, daysPayments.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 427,\n        columnNumber: 17\n      }\n    }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 17\n      }\n    }, c.Customer), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }\n    }, c.ModeOfPayment), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 17\n      }\n    }, formatter.format(c.Amount)), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 17\n      }\n    }, c.status), c.status === 'Not Submitted' ? /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CButton, {\n      className: \"btn-sm\",\n      color: \"danger\",\n      onClick: function onClick() {\n        return handleRemovePayment(c);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 21\n      }\n    }, \"remove\")) : null);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex mt-5 justify-content-center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 9\n    }\n  }, bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments == 0 && /*#__PURE__*/React.createElement(CButton, {\n    className: \"col-sm-3 float-center\",\n    color: \"danger\",\n    onClick: handleSubmitCollections,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 13\n    }\n  }, \"Submit Days Collections\"))), /*#__PURE__*/React.createElement(Modal, {\n    className: \"modalCustomer fade \",\n    size: \"md\",\n    show: show,\n    \"data-backdrop\": \"static\",\n    \"data-keyboard\": \"false\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Body, {\n    className: \"modal-body col-sm-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"float-center mb-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 470,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CInput, {\n    className: \"col-sm-12 mb-2 text-center\",\n    placeholder: \" Search Loan Customer\",\n    onChange: handleSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Table, {\n    className: \"table mb-3 mt-2 align-middle mb-0 bg-white table-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"fs-sm\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 17\n    }\n  }, \"A/C No.\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 17\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 482,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 13\n    }\n  }, dataTouse.map(function (c, index) {\n    return /*#__PURE__*/React.createElement(\"tr\", {\n      key: c.id,\n      onClick: function onClick() {\n        return handleCustomerSelect(c);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 19\n      }\n    }, c.accountNumber), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 19\n      }\n    }, c.fullName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CButton, {\n      color: \"danger\",\n      onClick: function onClick() {\n        return handleCustomerSelect(c);\n      },\n      className: \"btn-sm\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 21\n      }\n    }, \"Select\")));\n  }))), /*#__PURE__*/React.createElement(\"form\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"nameOfOfficer\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 13\n    }\n  }, \"Name of Customer\"), /*#__PURE__*/React.createElement(CInput, {\n    name: \"nameOfCustomer\",\n    className: \"text-center\",\n    type: \"text\",\n    id: \"nameOfCustomer\",\n    value: fullName,\n    autoComplete: \"off\",\n    readOnly: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"Balance\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 13\n    }\n  }, \"Current Loan Balance\"), /*#__PURE__*/React.createElement(CInput, {\n    name: \"Balance\",\n    className: \"form-control  text-center\",\n    type: \"text\",\n    id: \"Balance\",\n    value: formatter.format(loanBal),\n    autoComplete: \"off\",\n    readOnly: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CSelect, {\n    className: \"form-select  mb-3 mt-4 text-center\",\n    \"aria-label\": \".form-select-lg\",\n    value: loanPayments.modeOfPayment,\n    onChange: function onChange(e) {\n      return setLoanPayments(_objectSpread(_objectSpread({}, loanPayments), {}, {\n        modeOfPayment: e.currentTarget.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 15\n    }\n  }, \"Select Mode of Payment\"), /*#__PURE__*/React.createElement(\"option\", {\n    value: \"Cash\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 15\n    }\n  }, \"Cash\")), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"amountReceived\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 13\n    }\n  }, \"Amount (GHS)\"), /*#__PURE__*/React.createElement(CInput, {\n    autoComplete: \"off\",\n    type: \"text\",\n    name: \"amountReceived\",\n    className: \"form-control  text-right\",\n    id: \"amountReceived\",\n    value: loanPayments.amount,\n    onChange: handleAmountChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"comment\",\n    className: \"form-label\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 13\n    }\n  }, \"Comment\"), /*#__PURE__*/React.createElement(CInput, (_React$createElement = {\n    autoComplete: \"off\",\n    type: \"textArea\",\n    name: \"comment\",\n    className: \"form-control text-center\",\n    id: \"comment\",\n    value: null\n  }, _defineProperty(_React$createElement, \"autoComplete\", \"off\"), _defineProperty(_React$createElement, \"onChange\", function onChange(e) {\n    return setLoanPayments(_objectSpread({}, loanPayments));\n  }), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 563,\n    columnNumber: 13\n  }), _React$createElement)))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 9\n    }\n  }, save && /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleSubmit,\n    color: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 582,\n      columnNumber: 13\n    }\n  }, \"Submit\"), edit && /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleUpdate,\n    color: \"info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 587,\n      columnNumber: 13\n    }\n  }, \"Update\"), /*#__PURE__*/React.createElement(CButton, {\n    onClick: handleClose,\n    color: \"danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 591,\n      columnNumber: 11\n    }\n  }, \"Close\"))));\n};\n\nexport default LoanRepayment;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/pages/loanRepayment.jsx"],"names":["React","useState","useEffect","Link","useNavigate","Navigate","useParams","axios","moment","apiUrl","reportUrl","Modal","auth","Swal","Card","Row","Col","Table","Progress","Button","UncontrolledButtonDropdown","DropdownMenu","DropdownToggle","DropdownItem","Input","Label","Badge","CBadge","CCard","CCardBody","CCol","CDataTable","CRow","CButton","CModal","CModalFooter","CModalHeader","CModalBody","CCardHeader","CInputGroupAppend","CInputGroupPrepend","CDropdownItem","CForm","CDropdownToggle","CDropdown","CDropdownDivider","CModalTitle","CFormGroup","CLabel","CInput","CSelect","CDropdownMenu","CInputGroup","LoanRepayment","loanees","setLoanees","getCurrentUser","user","setUser","staff","setStaff","daysPayments","setDaysPayments","show","setShow","fullName","setFullName","amount","overage","shortage","bulkCash","setBulkCash","Date","todayDate","setTodayDate","payments","setPayments","formatToday","date","toISOString","slice","pageSize","setPageSize","currentPage","setCurrentPage","search","setSearch","edit","setEdit","render","setRender","save","setSave","colPayments","setColPayments","todaysPayments","setTodaysPayments","loanBal","setLoanBal","dateOfCollection","officer","customer","modeOfPayment","loanPayments","setLoanPayments","tdate","setTdate","getActiveLoans","get","results","data","getBulkCash","TotalSubmitted","getPayments","TotalDailyCollections","getDaysPayments","handleAmountChange","e","currentTarget","value","formatter","Intl","NumberFormat","style","currency","handleCustomerSelect","c","id","loanBalance","handleSearch","event","filter","toLowerCase","includes","dataTouse","length","handleClose","handleSubmit","fire","post","statusText","showForEdit","p","loanId","_id","entryBy","comment","handleRemovePayment","title","showDenyButton","showCancelButton","confirmButtonText","denyButtonText","then","result","isConfirmed","delete","status","isDenied","handleUpdate","console","log","put","handleMakePayment","handleSubmitCollections","openCustomerListAsReport","url","windowFeatures","window","open","handleSelectDate","width","height","format","parseFloat","map","index","Customer","ModeOfPayment","Amount","accountNumber"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, useNavigate, Navigate, useParams } from 'react-router-dom'\nimport axios from 'axios'\nimport moment from 'moment'\nimport { apiUrl } from '../../config.json'\nimport { reportUrl } from '../../config.json'\nimport { Modal } from 'react-bootstrap'\nimport auth from '../../components/services/authService'\nimport Swal from 'sweetalert2'\n\nimport Card from 'react-bootstrap/Card'\nimport {\n  Row,\n  Col,\n  Table,\n  Progress,\n  Button,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownToggle,\n  DropdownItem,\n  Input,\n  Label,\n  Badge,\n  //Modal,\n} from 'reactstrap'\n\nimport {\n  CBadge,\n  CCard,\n  CCardBody,\n  //CCardHeader,\n  CCol,\n  CDataTable,\n  CRow,\n  CButton,\n  CModal,\n  CModalFooter,\n  CModalHeader,\n  CModalBody,\n  CCardHeader,\n  CInputGroupAppend,\n  CInputGroupPrepend,\n  CDropdownItem,\n  CForm,\n  //CCardFooter,\n  CDropdownToggle,\n  //CInputRadio,\n  CDropdown,\n  CDropdownDivider,\n  CModalTitle,\n  //CFormText,\n  //CTextarea,\n  CFormGroup,\n  CLabel,\n  // CSwitch,\n  CInput,\n  //CInputFile,\n  CSelect,\n  CDropdownMenu,\n  //CCardFooter,\n  CInputGroup,\n  //CForm,\n} from '@coreui/react'\nconst LoanRepayment = () => {\n  const [loanees, setLoanees] = useState([])\n  const [user, setUser] = useState(auth.getCurrentUser())\n  const [staff, setStaff] = useState([])\n  //const user = auth.getCurrentUser();\n  const [daysPayments, setDaysPayments] = useState([])\n  const [show, setShow] = useState(false)\n  const [fullName, setFullName] = useState('')\n  const [bulkCash, setBulkCash] = useState({\n    amount: 0,\n    overage: 0,\n    shortage: 0,\n  })\n  const [todayDate, setTodayDate] = useState(new Date())\n  const [payments, setPayments] = useState(0)\n  const formatToday = (date) => date.toISOString().slice(0, 10)\n  const [pageSize, setPageSize] = useState(1)\n  const [currentPage, setCurrentPage] = useState(1)\n  const [search, setSearch] = useState('')\n  const [edit, setEdit] = useState(false)\n  const [render, setRender] = useState(false)\n  const [save, setSave] = useState(true)\n  const [colPayments, setColPayments] = useState([])\n  const [todaysPayments, setTodaysPayments] = useState([])\n  const [loanBal, setLoanBal] = useState(0)\n  const [loanPayments, setLoanPayments] = useState({\n    dateOfCollection: new Date().toISOString().slice(0, 10),\n    officer: '',\n    customer: '',\n    amount: '',\n    modeOfPayment: '',\n  })\n  const [tdate, setTdate] = useState(new Date().toISOString().slice(0, 10))\n\n  useEffect(() => {\n    const getActiveLoans = async () => {\n      const results = await axios.get(\n        apiUrl + '/loan/dailycollections/' + user.staff,\n      )\n      setLoanees(results.data)\n    }\n    getActiveLoans()\n  }, [loanees, render])\n\n  useEffect(() => {\n    async function getBulkCash() {\n      try {\n        const results = await axios.get(\n          apiUrl + '/loan/bulkCash/submitted/' + tdate + '/' + user.staff,\n        )\n        setBulkCash({\n          ...bulkCash,\n          amount: results.data[0].TotalSubmitted,\n          // overage: results.data[0].overage,\n          // shortage: results.data[0].shortage,\n        })\n      } catch (ex) {}\n    }\n    getBulkCash()\n  }, [tdate, render])\n\n  useEffect(() => {\n    async function getPayments() {\n      const results = await axios.get(\n        apiUrl + '/loan/dailycollections/' + tdate + '/' + user.staff,\n      )\n      setPayments(results.data[0].TotalDailyCollections)\n      // console.log('Payments: ' + formatToday(todayDate))\n    }\n    getPayments()\n    //console.log(tdate)\n  }, [render, tdate])\n\n  useEffect(() => {\n    async function getDaysPayments() {\n      const results = await axios.get(\n        apiUrl +\n          '/loan/dailycollections/dayspayments/' +\n          tdate +\n          '/' +\n          user.staff,\n      )\n      setDaysPayments(results.data)\n      // console.log('Payments: ' + formatToday(todayDate))\n    }\n    getDaysPayments()\n    //console.log(daysPayments)\n  }, [render, tdate])\n\n  const handleAmountChange = (e) => {\n    setLoanPayments({\n      ...loanPayments,\n      amount: e.currentTarget.value,\n      officer: user.staff,\n    })\n  }\n  let formatter = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'GHS',\n\n    // These options are needed to round to whole numbers if that's what you want.\n    //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)\n    //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)\n  })\n\n  const handleCustomerSelect = async (c) => {\n    const loanBalance = await axios.get(\n      apiUrl + '/loan/dailycollections/bal/' + c.id,\n    )\n    setFullName(c.fullName)\n    setLoanBal(loanBalance.data[0].loanBalance)\n    setLoanPayments({\n      customer: c.id,\n      dateOfCollection: tdate,\n      officer: user.staff,\n    })\n  }\n\n  const handleSearch = (event) => {\n    setSearch(event.currentTarget.value)\n  }\n\n  const data = {\n    customer: loanees.filter((c) =>\n      c.fullName.toLowerCase().includes(search.toLowerCase()),\n    ),\n  }\n\n  const dataTouse = search.length === 0 ? loanees : data.customer\n\n  const handleClose = () => {\n    setLoanPayments({\n      customer: '',\n      amount: '',\n      modeOfPayment: '',\n      officer: '',\n      dateOfCollection: '',\n    })\n    setFullName('')\n    setShow(false)\n  }\n\n  const handleSubmit = async () => {\n    if (bulkCash.amount - payments < loanPayments.amount)\n      return Swal.fire(\n        'OOPS',\n        'Payment Unsuccessful - Insufficient Bulk Amount',\n        'error',\n      )\n    try {\n      const results = await axios.post(\n        apiUrl + '/loan/dailycollections',\n        loanPayments,\n      )\n      if (results.statusText === 'OK') {\n        Swal.fire('Success', 'Payment Made', 'success')\n        setLoanPayments({\n          customer: '',\n          amount: '',\n          modeOfPayment: '',\n          officer: '',\n          dateOfCollection: '',\n        })\n        setRender(!render)\n      } else {\n        //console.log(results)\n        return Swal.fire('OOPS', 'Payment Unsuccessful', 'error')\n      }\n    } catch (ex) {\n      //console.log(ex)\n      return Swal.fire('OOPS', ex + ' [Payment Unsuccessful]', 'error')\n    }\n  }\n\n  const showForEdit = (p) => {\n    setLoanPayments({\n      loanId: p.loanId._id,\n      customer: p.customer._id,\n      fullName: p.customer.fullName,\n      entryBy: user._id,\n      dateOfCollection: new Date().toISOString().slice(0, 10),\n      modeOfPayment: p.modeOfPayment,\n      amount: p.amount,\n      officer: p.officer.id,\n      comment: p.comment,\n      id: p.id,\n    })\n    setShow(!show)\n    setEdit(true)\n    setSave(false)\n  }\n\n  const handleRemovePayment = async (p) => {\n    //console.log(p)\n    Swal.fire({\n      title: 'Do you want to remove this payment?',\n      showDenyButton: true,\n      showCancelButton: true,\n      confirmButtonText: 'Remove',\n      denyButtonText: `Don't Remove`,\n    }).then(async (result) => {\n      /* Read more about isConfirmed, isDenied below */\n      if (result.isConfirmed) {\n        try {\n          const results = await axios.delete(\n            apiUrl + '/loan/dailycollections/' + p.id,\n          )\n\n          if (results.status === 200) {\n            Swal.fire('Success', 'Payment Removed', 'success')\n          }\n          setRender(!render)\n        } catch (ex) {\n          Swal.fire('Error', ex + ' Payment Removal Failed', 'error')\n        }\n      } else if (result.isDenied) {\n        Swal.fire('Payment Removal Failed', '', 'error')\n      }\n    })\n    setRender(!render)\n    //console.log(results)\n  }\n  const handleUpdate = async () => {\n    console.log(loanPayments)\n    try {\n      const results = await axios.put(\n        apiUrl + '/collectionsheet/' + loanPayments.id,\n        loanPayments,\n      )\n      if (results.status === 200) {\n        Swal.fire('Success', 'Payment Updated', 'success')\n        setLoanPayments({\n          customer: '',\n          fullName: '',\n          amount: '',\n          modeOfPayment: '',\n          loanId: '',\n          officer: '',\n          comment: '',\n          entryBy: '',\n          dateOfCollection: '',\n        })\n        setRender(!render)\n      } else {\n        return Swal.fire('OOPS', 'Payment Update Unsuccessful', 'error')\n      }\n    } catch (ex) {\n      return Swal.fire('OOPS', ex + ' [Payment Update Unsuccessful]', 'error')\n    }\n  }\n\n  const handleMakePayment = () => {\n    if (bulkCash.amount <= 0)\n      return Swal.fire(\n        'OOPS',\n        'You have NOT submitted Bulk Cash for ' + tdate,\n        'error',\n      )\n    setSave(true)\n    setEdit(false)\n    setShow(true)\n  }\n\n  const handleSubmitCollections = async () => {\n    try {\n      await axios.post(\n        apiUrl + '/loan/dailycollections/' + user.staff + '/' + tdate,\n      )\n      Swal.fire('Submission Done', 'Days Collections Submitted!', 'success')\n      setRender(!render)\n      openCustomerListAsReport(\n        reportUrl + '/dailyEntry.aspx?' + user.staff + '?' + tdate,\n      )\n    } catch (ex) {\n      return Swal.fire('OOPS', ex + ' [Collections Submission Failed]', 'error')\n    }\n  }\n  const openCustomerListAsReport = (url) => {\n    const windowFeatures = 'left=100,top=100,width=380,height=320'\n    window.open(url, 'Daily Entry', 'popup', windowFeatures)\n  }\n  const handleSelectDate = (e) => {\n    setTdate(e.currentTarget.value)\n\n    console.log(\n      bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments,\n    )\n  }\n\n  return (\n    <div>\n      <div className=\"col-sm-12\">\n        <h3 className=\"centertext mt-\">Customer Loan Repayment</h3>\n        <CInput\n          type=\"date\"\n          name=\"dateToday\"\n          className=\"form-control text-center col-sm-12\"\n          id=\"dateToday\"\n          value={tdate}\n          onChange={handleSelectDate}\n        />\n        <div className=\"row text-center col-sm-12 justify-content-center\">\n          <div classname=\"m-3\">\n            <Card style={{ width: '12rem', height: '6rem' }} className=\"m-3\">\n              <Card.Body>\n                <Card.Title>Submitted</Card.Title>\n                {formatter.format(bulkCash.amount)}\n              </Card.Body>\n            </Card>\n          </div>\n\n          <div classname=\"m-3\">\n            <Card style={{ width: '12rem', height: '6rem' }} className=\"m-3\">\n              <Card.Body>\n                <Card.Title>Payments</Card.Title>\n                {formatter.format(payments)}\n              </Card.Body>\n            </Card>\n          </div>\n\n          <div classname=\"m-3 justify-content-right\">\n            <Card\n              style={{ width: '12rem', height: '6rem' }}\n              className={\n                parseFloat(bulkCash.amount - payments) > 0\n                  ? 'positivebalcolor m-3'\n                  : 'negativebalcolor m-3'\n              }\n            >\n              <Card.Body>\n                <Card.Title>\n                  {parseFloat(bulkCash.amount - payments) < 0\n                    ? 'Overage'\n                    : 'Balance'}\n                </Card.Title>\n                {formatter.format(parseFloat(bulkCash.amount - payments))}\n              </Card.Body>\n            </Card>\n          </div>\n        </div>\n\n        <CButton\n          className=\"mt-3 mb-2 float-right\"\n          onClick={handleMakePayment}\n          color=\"success\"\n        >\n          Make Loan Payments\n        </CButton>\n        <Table className=\"table align-left mb-0 bg-white table-sm\">\n          <thead>\n            <tr className=\"fs-sm\">\n              <th></th>\n              <th>Customer</th>\n              <th>Mode</th>\n              <th>Amount</th>\n              <th>Status</th>\n              <th></th>\n            </tr>\n          </thead>\n          <tbody>\n            {daysPayments.map((c, index) => (\n              <tr key={c.id}>\n                <td>{index + 1}</td>\n\n                <td>{c.Customer}</td>\n                <td>{c.ModeOfPayment}</td>\n                <td>{formatter.format(c.Amount)}</td>\n                <td>{c.status}</td>\n                {c.status === 'Not Submitted' ? (\n                  <td>\n                    <CButton\n                      className=\"btn-sm\"\n                      color=\"danger\"\n                      onClick={() => handleRemovePayment(c)}\n                    >\n                      remove\n                    </CButton>\n                  </td>\n                ) : null}\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n        <div className=\"d-flex mt-5 justify-content-center\">\n          {bulkCash.amount + bulkCash.shortage - bulkCash.overage - payments ==\n            0 && (\n            <CButton\n              className=\"col-sm-3 float-center\"\n              color=\"danger\"\n              onClick={handleSubmitCollections}\n            >\n              Submit Days Collections\n            </CButton>\n          )}\n        </div>\n      </div>\n\n      <Modal\n        className=\"modalCustomer fade \"\n        size=\"md\"\n        show={show}\n        data-backdrop=\"static\"\n        data-keyboard=\"false\"\n      >\n        <Modal.Body className=\"modal-body col-sm-12\">\n          <div className=\"float-center mb-2\">\n            <CInput\n              className=\"col-sm-12 mb-2 text-center\"\n              placeholder=\" Search Loan Customer\"\n              onChange={handleSearch}\n            />\n          </div>\n          <Table className=\"table mb-3 mt-2 align-middle mb-0 bg-white table-sm\">\n            <thead>\n              <tr className=\"fs-sm\">\n                <th>A/C No.</th>\n                <th>Name</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {dataTouse.map((c, index) => (\n                <tr key={c.id} onClick={() => handleCustomerSelect(c)}>\n                  <td>{c.accountNumber}</td>\n                  <td>{c.fullName}</td>\n                  <td>\n                    <CButton\n                      color=\"danger\"\n                      onClick={() => handleCustomerSelect(c)}\n                      className=\"btn-sm\"\n                    >\n                      Select\n                    </CButton>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n\n          <form>\n            <label htmlFor=\"nameOfOfficer\" className=\"form-label\">\n              Name of Customer\n            </label>\n            <CInput\n              name=\"nameOfCustomer\"\n              className=\"text-center\"\n              type=\"text\"\n              id=\"nameOfCustomer\"\n              value={fullName}\n              autoComplete=\"off\"\n              readOnly\n            />\n\n            <label htmlFor=\"Balance\" className=\"form-label\">\n              Current Loan Balance\n            </label>\n            <CInput\n              name=\"Balance\"\n              className=\"form-control  text-center\"\n              type=\"text\"\n              id=\"Balance\"\n              value={formatter.format(loanBal)}\n              autoComplete=\"off\"\n              readOnly\n            />\n\n            <CSelect\n              className=\"form-select  mb-3 mt-4 text-center\"\n              aria-label=\".form-select-lg\"\n              value={loanPayments.modeOfPayment}\n              onChange={(e) =>\n                setLoanPayments({\n                  ...loanPayments,\n                  modeOfPayment: e.currentTarget.value,\n                })\n              }\n            >\n              <option value=\"\">Select Mode of Payment</option>\n              <option value=\"Cash\">Cash</option>\n              {/* <option value=\"Mobile Money\">Mobile Money</option>*/}\n            </CSelect>\n\n            <label htmlFor=\"amountReceived\" className=\"form-label\">\n              Amount (GHS)\n            </label>\n            <CInput\n              autoComplete=\"off\"\n              type=\"text\"\n              name=\"amountReceived\"\n              className=\"form-control  text-right\"\n              id=\"amountReceived\"\n              value={loanPayments.amount}\n              onChange={handleAmountChange}\n            />\n\n            <label htmlFor=\"comment\" className=\"form-label\">\n              Comment\n            </label>\n            <CInput\n              autoComplete=\"off\"\n              type=\"textArea\"\n              name=\"comment\"\n              className=\"form-control text-center\"\n              id=\"comment\"\n              value={null}\n              autoComplete=\"off\"\n              onChange={(e) =>\n                setLoanPayments({\n                  ...loanPayments,\n                  //comment: e.currentTarget.value,\n                })\n              }\n            />\n          </form>\n        </Modal.Body>\n        <Modal.Footer>\n          {save && (\n            <CButton onClick={handleSubmit} color=\"success\">\n              Submit\n            </CButton>\n          )}\n          {edit && (\n            <CButton onClick={handleUpdate} color=\"info\">\n              Update\n            </CButton>\n          )}\n          <CButton onClick={handleClose} color=\"danger\">\n            Close\n          </CButton>\n        </Modal.Footer>\n      </Modal>\n    </div>\n  )\n}\n\nexport default LoanRepayment\n"]},"metadata":{},"sourceType":"module"}
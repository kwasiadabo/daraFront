{"ast":null,"code":"import _objectSpread from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/Dara/daraPlusApp/daraFront/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Link}from'react-router-dom';import Swal from'sweetalert2';import{useHistory}from'react-router-dom';import auth from'../../components/services/authService';import Joi from'joi-browser';import{CButton,CCard,CCardBody,CCardGroup,CCol,CContainer,CForm,CInput,CInputGroup,CInputGroupPrepend,CInputGroupText,CRow}from'@coreui/react';import CIcon from'@coreui/icons-react';var Login=function Login(){var _useState=useState({username:'',password:''}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var history=useHistory();var schemaMap={username:Joi.string().required().label('Username Field'),password:Joi.string().required().label('Password Field')};var schema=Joi.object(schemaMap);var validateForm=function validateForm(){var result=Joi.validate(formData,schema);if(result.error){return result.error.details[0].message;}else{return null;}//toast.error(result.error.details[0].message);\n};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var username,password,validate;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(formData);console.log('this is the one at setup');_context.prev=2;username=formData.username,password=formData.password;validate=validateForm();if(!(validate!==null)){_context.next=7;break;}return _context.abrupt(\"return\",Swal.fire('Validation',validate,'error'));case 7:_context.next=9;return auth.login(username,password);case 9:history.push('/home');_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);if(!(_context.t0.response&&_context.t0.response.status===400)){_context.next=16;break;}return _context.abrupt(\"return\",Swal.fire('Fatal :',_context.t0.response.data,'error'));case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function handleSubmit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",{className:\"c-app c-default-layout flex-row align-items-center\"},/*#__PURE__*/React.createElement(CContainer,null,/*#__PURE__*/React.createElement(CRow,{className:\"justify-content-center\"},/*#__PURE__*/React.createElement(CCol,{md:\"8\"},/*#__PURE__*/React.createElement(CCardGroup,null,/*#__PURE__*/React.createElement(CCard,{className:\"p-4\"},/*#__PURE__*/React.createElement(CCardBody,null,/*#__PURE__*/React.createElement(CForm,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Login\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\"},\"Sign In to your account- Adabo\"),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mb-3\"},/*#__PURE__*/React.createElement(CInputGroupPrepend,null,/*#__PURE__*/React.createElement(CInputGroupText,null,/*#__PURE__*/React.createElement(CIcon,{name:\"cil-user\"}))),/*#__PURE__*/React.createElement(CInput,{type:\"text\",placeholder:\"Username\",autoComplete:\"username\",value:formData.email,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{username:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CInputGroup,{className:\"mb-4\"},/*#__PURE__*/React.createElement(CInputGroupPrepend,null,/*#__PURE__*/React.createElement(CInputGroupText,null,/*#__PURE__*/React.createElement(CIcon,{name:\"cil-lock-locked\"}))),/*#__PURE__*/React.createElement(CInput,{type:\"password\",placeholder:\"Password\",autoComplete:\"current-password\",value:formData.password,onChange:function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},{password:e.currentTarget.value}));}})),/*#__PURE__*/React.createElement(CRow,null,/*#__PURE__*/React.createElement(CCol,{xs:\"6\"},/*#__PURE__*/React.createElement(CButton,{color:\"primary\",className:\"px-4\",onClick:handleSubmit},\"Login\")),/*#__PURE__*/React.createElement(CCol,{xs:\"6\",className:\"text-right\"},/*#__PURE__*/React.createElement(CButton,{color:\"link\",className:\"px-0\"},\"Forgot password?\")))))),/*#__PURE__*/React.createElement(CCard,{className:\"text-white bg-primary py-5 d-md-down-none\",style:{width:'44%'}},/*#__PURE__*/React.createElement(CCardBody,{className:\"text-center\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Sign up\"),/*#__PURE__*/React.createElement(\"p\",null,\"If You Encounter Any Challengies, Kindly Contact The System Administrator\"),/*#__PURE__*/React.createElement(Link,{to:\"/register\"},/*#__PURE__*/React.createElement(CButton,{color:\"primary\",className:\"mt-3\",active:true,tabIndex:-1},\"Register Now!\"))))))))));};export default Login;","map":{"version":3,"sources":["/Users/mac/Documents/Dara/daraPlusApp/daraFront/src/views/setup/Login.js"],"names":["React","useState","Link","Swal","useHistory","auth","Joi","CButton","CCard","CCardBody","CCardGroup","CCol","CContainer","CForm","CInput","CInputGroup","CInputGroupPrepend","CInputGroupText","CRow","CIcon","Login","username","password","formData","setFormData","history","schemaMap","string","required","label","schema","object","validateForm","result","validate","error","details","message","handleSubmit","console","log","fire","login","push","response","status","data","email","e","currentTarget","value","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport Swal from 'sweetalert2'\nimport { useHistory } from 'react-router-dom'\nimport auth from '../../components/services/authService'\nimport Joi from 'joi-browser'\n\nimport {\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow,\n} from '@coreui/react'\nimport CIcon from '@coreui/icons-react'\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    username: '',\n    password: '',\n  })\n  let history = useHistory()\n\n  const schemaMap = {\n    username: Joi.string().required().label('Username Field'),\n    password: Joi.string().required().label('Password Field'),\n  }\n\n  const schema = Joi.object(schemaMap)\n\n  const validateForm = () => {\n    const result = Joi.validate(formData, schema)\n    if (result.error) {\n      return result.error.details[0].message\n    } else {\n      return null\n    }\n    //toast.error(result.error.details[0].message);\n  }\n\n  const handleSubmit = async () => {\n    console.log(formData)\n    console.log('this is the one at setup')\n    try {\n      const { username, password } = formData\n      const validate = validateForm()\n      if (validate !== null) {\n        return Swal.fire('Validation', validate, 'error')\n      }\n      await auth.login(username, password)\n      history.push('/home')\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400) {\n        return Swal.fire('Fatal :', ex.response.data, 'error')\n      }\n    }\n  }\n\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"8\">\n            <CCardGroup>\n              <CCard className=\"p-4\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account- Adabo</p>\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput\n                        type=\"text\"\n                        placeholder=\"Username\"\n                        autoComplete=\"username\"\n                        value={formData.email}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            username: e.currentTarget.value,\n                          })\n                        }\n                      />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput\n                        type=\"password\"\n                        placeholder=\"Password\"\n                        autoComplete=\"current-password\"\n                        value={formData.password}\n                        onChange={(e) =>\n                          setFormData({\n                            ...formData,\n                            password: e.currentTarget.value,\n                          })\n                        }\n                      />\n                    </CInputGroup>\n                    <CRow>\n                      <CCol xs=\"6\">\n                        <CButton\n                          color=\"primary\"\n                          className=\"px-4\"\n                          onClick={handleSubmit}\n                        >\n                          Login\n                        </CButton>\n                      </CCol>\n                      <CCol xs=\"6\" className=\"text-right\">\n                        <CButton color=\"link\" className=\"px-0\">\n                          Forgot password?\n                        </CButton>\n                      </CCol>\n                    </CRow>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n              <CCard\n                className=\"text-white bg-primary py-5 d-md-down-none\"\n                style={{ width: '44%' }}\n              >\n                <CCardBody className=\"text-center\">\n                  <div>\n                    <h2>Sign up</h2>\n                    <p>\n                      If You Encounter Any Challengies, Kindly Contact The\n                      System Administrator\n                    </p>\n                    <Link to=\"/register\">\n                      <CButton\n                        color=\"primary\"\n                        className=\"mt-3\"\n                        active\n                        tabIndex={-1}\n                      >\n                        Register Now!\n                      </CButton>\n                    </Link>\n                  </div>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}